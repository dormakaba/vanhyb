!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,s){"use strict";var a,i,o,l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},u=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{}),c={};function d(){if(i)return a;i=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}return a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(s,a){for(var i,o,l=n(s),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))t.call(i,c)&&(l[c]=i[c]);if(e){o=e(i);for(var d=0;d<o.length;d++)r.call(i,o[d])&&(l[o[d]]=i[o[d]])}}return l},a}!function(e){e.exports=function(){if(o)return c;o=1,d();var e=t,r=60103;if(c.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;r=n("react.element"),c.Fragment=n("react.fragment")}var s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,l={},u=null,c=null;for(o in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:r,type:e,key:u,ref:c,props:l,_owner:s.current}}return c.jsx=l,c.jsxs=l,c}()}({get exports(){return u},set exports(e){u=e}});var f=t.createContext(null),m=function(e){var r=e.appId,n=e.children,s=t.useMemo((function(){var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");try{return JSON.parse(n.innerHTML)}catch(e){throw Error("Couldn't load config of #"+r)}}),[r]);return u.jsx(f.Provider,{value:s,children:n})},y=t.createContext(null),h=function(e){var r=e.children,n=t.useState(new URL(location.href));return u.jsx(y.Provider,{value:n,children:r})};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function g(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(){var e=t.useContext(f),r=t.useCallback((function(t){var r,n=null==(r=e.translations)?void 0:r[t];if(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return a.length?l(n,a):n}return t}),[e]);return x(x({},e),{},{t:r})};function j(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,s)}var k={},S={get exports(){return k},set exports(e){k=e}},O={};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return O},set exports(e){O=e}}),function(e){var t=O.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},s=Object.prototype,a=s.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new T(n||[]);return i(a,"_invoke",{value:S(e,r,o)}),a}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var y={};function h(){}function p(){}function v(){}var g={};d(g,l,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==s&&a.call(x,l)&&(g=x);var w=v.prototype=h.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,r){function n(s,i,o,l){var u=m(e[s],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&a.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):r.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(u.arg)}var s;i(this,"_invoke",{value:function(e,t){function a(){return new r((function(r,s){n(e,t,r,s)}))}return s=s?s.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(s,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw a;return D()}for(r.method=s,r.arg=a;;){var i=r.delegate;if(i){var o=O(i,r);if(o){if(o===y)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=m(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var s=m(n,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,y;var a=s.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function A(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=d(v,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},n.awrap=function(e){return{__await:e}},j(k.prototype),d(k.prototype,u,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,s,a){void 0===a&&(a=Promise);var i=new k(f(e,t,r,s),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(w),d(w,c,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;C(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),y}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(S);var _=k(),C=_;try{regeneratorRuntime=_}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=_:Function("r","regeneratorRuntime = r")(_)}var T="vanguard.keysystem.header.standard",A="vanguard.keysystem.header.standard.category",D="vanguard.keysystem.header.standard.category.placeholder",N="mks.Systemheader.CategoryType",V="vanguard.keysystem.header.standard.technology",E="vanguard.keysystem.header.standard.technology.placeholder",P="vanguard.keysystem.header.standard.systemLanguage",F="vanguard.keysystem.header.standard.systemLanguage.placeholder",$="mks.Systemheader.Language",M="vanguard.keysystem.header.epos",L="vanguard.keysystem.header.property",I="vanguard.keysystem.header.property.description",R="vanguard.keysystem.new",B="vanguard.keysystem.new.header",q="vanguard.keysystem.new.electronic",U="vanguard.keysystem.keyPlan",H="vanguard.keysystem.new.prev",z="vanguard.keysystem.new.next",Y="vanguard.keysystem.header.epos.name",W="vanguard.keysystem.header.epos.status",G="vanguard.keysystem.header.epos.technology",J="vanguard.keysystem.header.epos.add",K="vanguard.keysystem.header.epos.status.active",Q="vanguard.keysystem.header.epos.status.inactive",Z="vanguard.keysystem.header.property.address",X="vanguard.keysystem.keyPlan.keysCylinders",ee="vanguard.keysystem.keyPlan.key.lockingPosition",te="vanguard.keysystem.keyPlan.key.epos",re="vanguard.keysystem.keyPlan.key.function",ne="vanguard.keysystem.keyPlan.key.product",se="vanguard.keysystem.keyPlan.key.configuration",ae="vanguard.keysystem.keyPlan.key.quantity",ie="vanguard.keysystem.keyplan.pagination.gotoPage",oe="vanguard.keysystem.keyplan.pagination.pageOf",le="vanguard.keysystem.keyplan.pagination.show",ue="vanguard.keysystem.keyplan.filters.all",ce="vanguard.keysystem.keyplan.filters.searchNRecords",de=t.createContext(null),fe=function(){return t.useContext(de)},me=function(r){var n=r.children,s=t.useState("headerData"),a=s[0],i=s[1],o=t.useState({}),l=o[0],c=o[1],d=e.store.api.keysystem.useGetDeliveryCountriesQuery().data,f=t.useMemo((function(){return{pageName:a,setPageName:function(e){return i(e)},address:l,setAddress:function(e){return c(e)},availableCountries:null==d?void 0:d.countries}}),[a,l,d]);return u.jsx(de.Provider,{value:f,children:n})},ye=function(){var e=fe(),t=e.pageName,r=e.setPageName,s=w().t;return u.jsxs("div",{className:"flex justify-between items-center h-14 px-4 border",children:[u.jsx("div",{children:"keyPlan"===t&&u.jsxs("div",{className:"flex justify-center items-center cursor-pointer mr-2",onClick:function(){return r("headerData")},children:[u.jsx(n.Icon,{type:"arrowleft"}),u.jsx(n.Text,{color:"primary",bold:!0,children:s(H)})]})}),u.jsx("div",{children:"headerData"===t&&u.jsxs("div",{className:"flex justify-center items-center cursor-pointer mr-2",onClick:function(){return r("keyPlan")},children:[u.jsx(n.Text,{color:"primary",bold:!0,children:s(z)}),u.jsx(n.Icon,{type:"arrowright"})]})})]})},he=function(e){var t=e.keyTypeName,r=e.onClose,s=e.onBackArrow,a=e.headerTitle,i=e.showArrow,o=void 0!==i&&i,l=w().t;return u.jsxs("div",{className:"flex justify-between items-center h-14 px-4 border","data-testid":"header",children:[o&&u.jsx("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:s,children:u.jsx(n.Icon,{type:"arrowleft",testid:"arrowLeftIcon"})}),u.jsx(n.Text,{type:"h3",color:"primary",size:"xl",bold:!0,children:l(R)+" - "+l(t)+" - "+l(a)}),u.jsx("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:r,children:u.jsx(n.Icon,{type:"close",className:"text-red-500",color:"#ff426c",testid:"closeIcon"})})]})},pe=function(){var e="headerData"===fe().pageName?B:U;return u.jsx(he,{headerTitle:e,keyTypeName:q,onBackArrow:function(){},onClose:function(){}})},ve=function(e){var t=e.name,r=e.technology,s=e.isTitle,a=void 0!==s&&s,i=e.status,o=w().t;return u.jsxs("div",{className:"flex justify-between items-center mt-2 pb-2 border-b border-b-text-gray-300","data-testid":"row",children:[u.jsx("div",{className:"w-1/3",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:a,testid:"name",children:o(t)})}),u.jsx("div",{className:"w-1/3",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:a,testid:"technology",children:o(r)})}),u.jsx("div",{className:"w-1/4",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:a,testid:"status",children:o(i)})}),u.jsx("div",{className:"w-12 h-12",children:!a&&u.jsx(n.ActionsMenu,{})})]})},ge=function(){var t,r=w(),s=r.headPositionCode,a=r.t,i=e.store.api.keysystem.useGetEposQuery({headPositionCode:s}).data;return u.jsxs(n.Tile,{header:M,className:"mt-4",isAccordionType:!0,testid:"eposTile",children:[u.jsx(ve,{name:Y,technology:G,status:W,isTitle:!0}),null==i||null==(t=i.electronicPositions)?void 0:t.map((function(e,t){var r=e.authMediaTechnology,n=r.eposName,s=r.technology,a=e.deactivated;return u.jsx(ve,{name:n,technology:s,status:a?Q:K},""+n+s+t)})),u.jsx("button",{className:"flex justify-end mt-6 cursor-pointer",onClick:function(){},children:u.jsx(n.Text,{color:"primary",transform:["underline","capitalize"],bold:!0,children:a(J)})})]})},be=function(r){var n=t.useState([]),s=n[0],a=n[1],i=e.store.api.keysystem.useSearchProductsMutation()[0],o=t.useCallback(function(){var e,t=(e=C.mark((function e(t){var n,s;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({technicalSystem:"K30",emksProductType:r.toUpperCase(),searchTerm:t,page:0}).unwrap();case 3:n=e.sent,s=n.data,a(s.products),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){j(a,n,s,i,o,"next",e)}function o(e){j(a,n,s,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[i,r]);return t.useMemo((function(){return{products:s,handleProductSearch:o}}),[o,s])},xe=function(e){var t=e.value,r=e.column,s=e.row,a=e.selectedKeyTab,i=e.updateCallback,o=be(a),l=o.products,c=o.handleProductSearch;return u.jsx(n.AutocompleteInput,{className:"border border-gray-500",dropdownClassName:"w-64",initialValue:t.toString(),items:l.map((function(e){return e.name+", "+e.code})),onDispatchSearch:c,onItemSelect:function(e){var t=l[e].name;i("update",s,r,t)}})},we=t.memo(xe);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se={pos:"",epos:"epos1",function:"",product:"",configuration:"",quantity:0,cellsToDisable:void 0},Oe=function(){var r,s,a=t.useState([Se]),i=a[0],o=a[1],l=t.useState(!1),c=l[0],d=l[1],f=t.useState("key"),m=f[0],y=f[1],h=(r=w().headPositionCode,{businessCase:null==(s=e.store.api.keysystem.useGetHeadPositionQuery({headPositionCode:r}).data)?void 0:s.businessCase}).businessCase,p=w().t,v=t.useMemo((function(){return{gotoPage:p(ie),pageOf:p(oe),show:p(le),all:p(ue),searchNRecords:p(ce)}}),[p]),g=t.useCallback((function(e,t,r,n){void 0!==t&&(d(!0),o((function(s){switch(e){case"create":return s.splice(t+1,0,{pos:s[t].pos||"",epos:"",function:s[t].function||"",product:"",configuration:"",quantity:0,cellsToDisable:""!==s[t].pos&&"REORDER"===h?["pos"]:void 0}),[].concat(s);case"delete":return s.splice(t,1),[].concat(s);case"copy":var a=ke({},s[t]);return a.quantity=0,a.cellsToDisable="REORDER"===h||"EXTENSION"===h?["pos"]:void 0,s.splice(t+1,0,a),[].concat(s);case"update":if(void 0===r)return[].concat(s);var i=s.map((function(e,a){var i;return a===t?ke(ke({},s[t]),{},((i={})[r]=n,i)):e}));return[].concat(i);default:return[].concat(s)}})))}),[h]),b=t.useMemo((function(){return[{Header:"",accessor:"keyIcon",cellElement:function(){return u.jsx("div",{className:"flex justify-center items-center w-full h-full",children:u.jsx(n.Icon,{type:"locked"})})},disableFilter:!0,disableSorting:!0,width:50},{Header:p(ee),accessor:"pos",customCellType:"textEdit",isSelectFilter:!0,width:100},{Header:p(te),accessor:"epos",isSelectFilter:!0,customCellType:"selectEdit",selectOptions:["epos1","epos2"]},{Header:p(re),accessor:"function",customCellType:"textEdit"},{Header:p(ne),accessor:"product",isSelectFilter:!0,cellElement:function(e){var t=e.value,r=e.row.index,n=e.column.id;return u.jsx(we,{value:t,row:r,column:n,selectedKeyTab:m,updateCallback:g})}},{Header:p(se),accessor:"configuration",customCellType:"textEdit",width:350},{Header:p(ae),accessor:"quantity",customCellType:"numberEdit",width:75},{Header:"",accessor:"actions",customCellType:"tableModification",disableFilter:!0,disableSorting:!0,width:75}]}),[m,p,g]);return t.useEffect((function(){d(!1)}),[i]),u.jsx(n.Tile,{header:p(X),className:"my-2 px-4",testid:"keyAndCylindersTile",children:u.jsxs("div",{className:"w-full pt-3",children:[u.jsxs(n.Tabs,{onSelectTab:function(e){return y(e)},size:"sm",children:[u.jsx(n.Tabs.Tab,{testid:"keysTab",tabKey:"key",title:"Keys",iconType:"locked"}),u.jsx(n.Tabs.Tab,{testid:"cylindersTab",tabKey:"cylinder",title:"Cylinders",iconType:"cylinder"}),u.jsx(n.Tabs.Tab,{testid:"securityCardsTab",tabKey:"securityCard",title:"Security Cards",iconType:"card"})]}),u.jsx(n.DataTable,{className:"w-full",columns:b,data:i,updateData:g,skipPageReset:c,translations:v,disableDeletion:"EXTENSION"===h||"REORDER"===h})]})})};var _e=e=>"checkbox"===e.type,Ce=e=>e instanceof Date,Te=e=>null==e;const Ae=e=>"object"==typeof e;var De=e=>!Te(e)&&!Array.isArray(e)&&Ae(e)&&!Ce(e),Ne=e=>De(e)&&e.target?_e(e.target)?e.target.checked:e.target.value:e,Ve=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Ee=e=>Array.isArray(e)?e.filter(Boolean):[],Pe=e=>void 0===e,Fe=(e,t,r)=>{if(!t||!De(e))return r;const n=Ee(t.split(/[,[\].]+?/)).reduce(((e,t)=>Te(e)?e:e[t]),e);return Pe(n)||n===e?Pe(e[t])?r:e[t]:n};const $e="blur",Me="focusout",Le="change",Ie="onBlur",Re="onChange",Be="onSubmit",qe="onTouched",Ue="all",He="max",ze="min",Ye="maxLength",We="minLength",Ge="pattern",Je="required",Ke="validate",Qe=t.createContext(null),Ze=()=>t.useContext(Qe);var Xe=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const s=a;return t._proxyFormState[s]!==Ue&&(t._proxyFormState[s]=!n||Ue),r&&(r[s]=!0),e[s]}});return s},et=e=>De(e)&&!Object.keys(e).length,tt=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return et(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!n||Ue)))},rt=e=>Array.isArray(e)?e:[e],nt=(e,t,r)=>r&&t?e===t:!e||!t||e===t||rt(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function st(e){const r=t.useRef(e);r.current=e,t.useEffect((()=>{const t=!e.disabled&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}var at=e=>"string"==typeof e,it=(e,t,r,n,s)=>at(e)?(n&&t.watch.add(e),Fe(r,e,s)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),Fe(r,e)))):(n&&(t.watchAll=!0),r),ot="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function lt(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(ot&&(e instanceof Blob||e instanceof FileList)||!r&&!De(e))return e;if(t=r?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return De(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)t[r]=lt(e[r]);else t=e}return t}function ut(e){const r=Ze(),{name:n,control:s=r.control,shouldUnregister:a}=e,i=Ve(s._names.array,n),o=function(e){const r=Ze(),{control:n=r.control,name:s,defaultValue:a,disabled:i,exact:o}=e||{},l=t.useRef(s);l.current=s,st({disabled:i,subject:n._subjects.watch,next:e=>{nt(l.current,e.name,o)&&c(lt(it(l.current,n._names,e.values||n._formValues,!1,a)))}});const[u,c]=t.useState(n._getWatch(s,a));return t.useEffect((()=>n._removeUnmounted())),u}({control:s,name:n,defaultValue:Fe(s._formValues,n,Fe(s._defaultValues,n,e.defaultValue)),exact:!0}),l=function(e){const r=Ze(),{control:n=r.control,disabled:s,name:a,exact:i}=e||{},[o,l]=t.useState(n._formState),u=t.useRef(!0),c=t.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=t.useRef(a);return d.current=a,st({disabled:s,next:e=>u.current&&nt(d.current,e.name,i)&&tt(e,c.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),t.useEffect((()=>{u.current=!0;const e=n._proxyFormState.isDirty&&n._getDirty();return e!==n._formState.isDirty&&n._subjects.state.next({isDirty:e}),c.current.isValid&&n._updateValid(!0),()=>{u.current=!1}}),[n]),Xe(o,n,c.current,!1)}({control:s,name:n}),u=t.useRef(s.register(n,{...e.rules,value:o}));return t.useEffect((()=>{const e=(e,t)=>{const r=Fe(s._fields,e);r&&(r._f.mount=t)};return e(n,!0),()=>{const t=s._options.shouldUnregister||a;(i?t&&!s._stateFlags.action:t)?s.unregister(n):e(n,!1)}}),[n,s,i,a]),{field:{name:n,value:o,onChange:t.useCallback((e=>u.current.onChange({target:{value:Ne(e),name:n},type:Le})),[n]),onBlur:t.useCallback((()=>u.current.onBlur({target:{value:Fe(s._formValues,n),name:n},type:$e})),[n,s]),ref:e=>{const t=Fe(s._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Fe(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Fe(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Fe(l.touchedFields,n)},error:{enumerable:!0,get:()=>Fe(l.errors,n)}})}}const ct=e=>e.render(ut(e));var dt=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},ft=e=>/^\w*$/.test(e),mt=e=>Ee(e.replace(/["|']|\]/g,"").split(/\.|\[/));function yt(e,t,r){let n=-1;const s=ft(t)?[t]:mt(t),a=s.length,i=a-1;for(;++n<a;){const t=s[n];let a=r;if(n!==i){const r=e[t];a=De(r)||Array.isArray(r)?r:isNaN(+s[n+1])?{}:[]}e[t]=a,e=e[t]}return e}const ht=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=Fe(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else De(n)&&ht(n,t)}}};var pt=e=>({isOnSubmit:!e||e===Be,isOnBlur:e===Ie,isOnChange:e===Re,isOnAll:e===Ue,isOnTouch:e===qe}),vt=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),gt=(e,t,r)=>{const n=Ee(Fe(e,r));return yt(n,"root",t[r]),yt(e,r,n),e},bt=e=>"boolean"==typeof e,xt=e=>"file"===e.type,wt=e=>"function"==typeof e,jt=e=>{if(!ot)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},kt=e=>at(e)||t.isValidElement(e),St=e=>"radio"===e.type,Ot=e=>e instanceof RegExp;const _t={value:!1,isValid:!1},Ct={value:!0,isValid:!0};var Tt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Pe(e[0].attributes.value)?Pe(e[0].value)||""===e[0].value?Ct:{value:e[0].value,isValid:!0}:Ct:_t}return _t};const At={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),At):At;function Nt(e,t,r="validate"){if(kt(e)||Array.isArray(e)&&e.every(kt)||bt(e)&&!e)return{type:r,message:kt(e)?e:"",ref:t}}var Vt=e=>De(e)&&!Ot(e)?e:{value:e,message:""},Et=async(e,t,r,n,s)=>{const{ref:a,refs:i,required:o,maxLength:l,minLength:u,min:c,max:d,pattern:f,validate:m,name:y,valueAsNumber:h,mount:p,disabled:v}=e._f,g=Fe(t,y);if(!p||v)return{};const b=i?i[0]:a,x=e=>{n&&b.reportValidity&&(b.setCustomValidity(bt(e)?"":e||""),b.reportValidity())},w={},j=St(a),k=_e(a),S=j||k,O=(h||xt(a))&&Pe(a.value)&&Pe(g)||jt(a)&&""===a.value||""===g||Array.isArray(g)&&!g.length,_=dt.bind(null,y,r,w),C=(e,t,r,n=Ye,s=We)=>{const i=e?t:r;w[y]={type:e?n:s,message:i,ref:a,..._(e?n:s,i)}};if(s?!Array.isArray(g)||!g.length:o&&(!S&&(O||Te(g))||bt(g)&&!g||k&&!Tt(i).isValid||j&&!Dt(i).isValid)){const{value:e,message:t}=kt(o)?{value:!!o,message:o}:Vt(o);if(e&&(w[y]={type:Je,message:t,ref:b,..._(Je,t)},!r))return x(t),w}if(!(O||Te(c)&&Te(d))){let e,t;const n=Vt(d),s=Vt(c);if(Te(g)||isNaN(g)){const r=a.valueAsDate||new Date(g),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;at(n.value)&&g&&(e=o?i(g)>i(n.value):l?g>n.value:r>new Date(n.value)),at(s.value)&&g&&(t=o?i(g)<i(s.value):l?g<s.value:r<new Date(s.value))}else{const r=a.valueAsNumber||(g?+g:g);Te(n.value)||(e=r>n.value),Te(s.value)||(t=r<s.value)}if((e||t)&&(C(!!e,n.message,s.message,He,ze),!r))return x(w[y].message),w}if((l||u)&&!O&&(at(g)||s&&Array.isArray(g))){const e=Vt(l),t=Vt(u),n=!Te(e.value)&&g.length>e.value,s=!Te(t.value)&&g.length<t.value;if((n||s)&&(C(n,e.message,t.message),!r))return x(w[y].message),w}if(f&&!O&&at(g)){const{value:e,message:t}=Vt(f);if(Ot(e)&&!g.match(e)&&(w[y]={type:Ge,message:t,ref:a,..._(Ge,t)},!r))return x(t),w}if(m)if(wt(m)){const e=Nt(await m(g,t),b);if(e&&(w[y]={...e,..._(Ke,e.message)},!r))return x(e.message),w}else if(De(m)){let e={};for(const n in m){if(!et(e)&&!r)break;const s=Nt(await m[n](g,t),b,n);s&&(e={...s,..._(n,s.message)},x(s.message),r&&(w[y]=e))}if(!et(e)&&(w[y]={ref:b,...e},!r))return w}return x(!0),w};function Pt(e,t){const r=Array.isArray(t)?t:ft(t)?[t]:mt(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Pe(e)?n++:e[t[n++]];return e}(e,r),s=r.length-1,a=r[s];return n&&delete n[a],0!==s&&(De(n)&&et(n)||Array.isArray(n)&&function(e){for(const t in e)if(!Pe(e[t]))return!1;return!0}(n))&&Pt(e,r.slice(0,-1)),e}function Ft(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var $t=e=>Te(e)||!Ae(e);function Mt(e,t){if($t(e)||$t(t))return e===t;if(Ce(e)&&Ce(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(Ce(r)&&Ce(e)||De(r)&&De(e)||Array.isArray(r)&&Array.isArray(e)?!Mt(r,e):r!==e)return!1}}return!0}var Lt=e=>"select-multiple"===e.type,It=e=>jt(e)&&e.isConnected,Rt=e=>{for(const t in e)if(wt(e[t]))return!0;return!1};function Bt(e,t={}){const r=Array.isArray(e);if(De(e)||r)for(const r in e)Array.isArray(e[r])||De(e[r])&&!Rt(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Bt(e[r],t[r])):Te(e[r])||(t[r]=!0);return t}function qt(e,t,r){const n=Array.isArray(e);if(De(e)||n)for(const n in e)Array.isArray(e[n])||De(e[n])&&!Rt(e[n])?Pe(t)||$t(r[n])?r[n]=Array.isArray(e[n])?Bt(e[n],[]):{...Bt(e[n])}:qt(e[n],Te(t)?{}:t[n],r[n]):Mt(e[n],t[n])?delete r[n]:r[n]=!0;return r}var Ut=(e,t)=>qt(e,t,Bt(t)),Ht=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Pe(e)?e:t?""===e?NaN:e?+e:e:r&&at(e)?new Date(e):n?n(e):e;function zt(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return xt(t)?t.files:St(t)?Dt(e.refs).value:Lt(t)?[...t.selectedOptions].map((({value:e})=>e)):_e(t)?Tt(e.refs).value:Ht(Pe(t.value)?e.ref.value:t.value,e)}var Yt=e=>Pe(e)?e:Ot(e)?e.source:De(e)?Ot(e.value)?e.value.source:e.value:e;function Wt(e,t,r){const n=Fe(e,r);if(n||ft(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),a=Fe(t,n),i=Fe(e,n);if(a&&!Array.isArray(a)&&r!==n)return{name:r};if(i&&i.type)return{name:n,error:i};s.pop()}return{name:r}}const Gt={mode:Be,reValidateMode:Re,shouldFocusError:!0};function Jt(e={},t){let r={...Gt,...e};const n=e.resetOptions&&e.resetOptions.keepDirtyValues;let s,a={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},o=(De(r.defaultValues)||De(r.values))&&lt(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:lt(o),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={watch:Ft(),array:Ft(),state:Ft()},y=pt(r.mode),h=pt(r.reValidateMode),p=r.criteriaMode===Ue,v=async e=>{if(f.isValid||e){const e=r.resolver?et((await j()).errors):await k(i,!0);e!==a.isValid&&m.state.next({isValid:e})}},g=e=>f.isValidating&&m.state.next({isValidating:e}),b=(e,t,r,n)=>{const s=Fe(i,e);if(s){const a=Fe(l,e,Pe(r)?Fe(o,e):r);Pe(a)||n&&n.defaultChecked||t?yt(l,e,t?a:zt(s._f)):_(e,a),u.mount&&v()}},x=(e,t,r,n,s)=>{let i=!1,l=!1;const u={name:e};if(!r||n){f.isDirty&&(l=a.isDirty,a.isDirty=u.isDirty=S(),i=l!==u.isDirty);const r=Mt(Fe(o,e),t);l=Fe(a.dirtyFields,e),r?Pt(a.dirtyFields,e):yt(a.dirtyFields,e,!0),u.dirtyFields=a.dirtyFields,i=i||f.dirtyFields&&l!==!r}if(r){const t=Fe(a.touchedFields,e);t||(yt(a.touchedFields,e,r),u.touchedFields=a.touchedFields,i=i||f.touchedFields&&t!==r)}return i&&s&&m.state.next(u),i?u:{}},w=(t,r,n,i)=>{const o=Fe(a.errors,t),l=f.isValid&&bt(r)&&a.isValid!==r;var u;if(e.delayError&&n?(u=()=>((e,t)=>{yt(a.errors,e,t),m.state.next({errors:a.errors})})(t,n),s=e=>{clearTimeout(d),d=window.setTimeout(u,e)},s(e.delayError)):(clearTimeout(d),s=null,n?yt(a.errors,t,n):Pt(a.errors,t)),(n?!Mt(o,n):o)||!et(i)||l){const e={...i,...l&&bt(r)?{isValid:r}:{},errors:a.errors,name:t};a={...a,...e},m.state.next(e)}g(!1)},j=async e=>await r.resolver(l,r.context,((e,t,r,n)=>{const s={};for(const r of e){const e=Fe(t,r);e&&yt(s,r,e._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||c.mount,i,r.criteriaMode,r.shouldUseNativeValidation)),k=async(e,t,n={valid:!0})=>{for(const s in e){const i=e[s];if(i){const{_f:e,...s}=i;if(e){const s=c.array.has(e.name),o=await Et(i,l,p,r.shouldUseNativeValidation,s);if(o[e.name]&&(n.valid=!1,t))break;!t&&(Fe(o,e.name)?s?gt(a.errors,o,e.name):yt(a.errors,e.name,o[e.name]):Pt(a.errors,e.name))}s&&await k(s,t,n)}}return n.valid},S=(e,t)=>(e&&t&&yt(l,e,t),!Mt(N(),o)),O=(e,t,r)=>it(e,c,{...u.mount?l:Pe(t)?o:at(e)?{[e]:t}:t},r,t),_=(e,t,r={})=>{const n=Fe(i,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&yt(l,e,Ht(t,r)),s=jt(r.ref)&&Te(t)?"":t,Lt(r.ref)?[...r.ref.options].forEach((e=>e.selected=s.includes(e.value))):r.refs?_e(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach((e=>e.checked=e.value===s)):xt(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||m.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&x(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&D(e)},C=(e,t,r)=>{for(const n in t){const s=t[n],a=`${e}.${n}`,o=Fe(i,a);!c.array.has(e)&&$t(s)&&(!o||o._f)||Ce(s)?_(a,s,r):C(a,s,r)}},T=(e,r,n={})=>{const s=Fe(i,e),a=c.array.has(e),d=lt(r);yt(l,e,d),a?(m.array.next({name:e,values:l}),(f.isDirty||f.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:Ut(o,l),isDirty:S(e,d)})):!s||s._f||Te(d)?_(e,d,n):C(e,d,n),vt(e,c)&&m.state.next({}),m.watch.next({name:e}),!u.mount&&t()},A=async e=>{const t=e.target;let n=t.name;const o=Fe(i,n);if(o){let d,b;const S=t.type?zt(o._f):Ne(e),O=e.type===$e||e.type===Me,_=!((u=o._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||r.resolver||Fe(a.errors,n)||o._f.deps)||((e,t,r,n,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:!(r?n.isOnChange:s.isOnChange)||e))(O,Fe(a.touchedFields,n),a.isSubmitted,h,y),C=vt(n,c,O);yt(l,n,S),O?(o._f.onBlur&&o._f.onBlur(e),s&&s(0)):o._f.onChange&&o._f.onChange(e);const T=x(n,S,O,!1),A=!et(T)||C;if(!O&&m.watch.next({name:n,type:e.type}),_)return f.isValid&&v(),A&&m.state.next({name:n,...C?{}:T});if(!O&&C&&m.state.next({}),g(!0),r.resolver){const{errors:e}=await j([n]),t=Wt(a.errors,i,n),r=Wt(e,i,t.name||n);d=r.error,n=r.name,b=et(e)}else d=(await Et(o,l,p,r.shouldUseNativeValidation))[n],d?b=!1:f.isValid&&(b=await k(i,!0));o._f.deps&&D(o._f.deps),w(n,b,d,T)}var u},D=async(e,t={})=>{let n,s;const o=rt(e);if(g(!0),r.resolver){const t=await(async e=>{const{errors:t}=await j();if(e)for(const r of e){const e=Fe(t,r);e?yt(a.errors,r,e):Pt(a.errors,r)}else a.errors=t;return t})(Pe(e)?e:o);n=et(t),s=e?!o.some((e=>Fe(t,e))):n}else e?(s=(await Promise.all(o.map((async e=>{const t=Fe(i,e);return await k(t&&t._f?{[e]:t}:t)})))).every(Boolean),(s||a.isValid)&&v()):s=n=await k(i);return m.state.next({...!at(e)||f.isValid&&n!==a.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:a.errors,isValidating:!1}),t.shouldFocus&&!s&&ht(i,(e=>e&&Fe(a.errors,e)),e?o:c.mount),s},N=e=>{const t={...o,...u.mount?l:{}};return Pe(e)?t:at(e)?Fe(t,e):e.map((e=>Fe(t,e)))},V=(e,t)=>({invalid:!!Fe((t||a).errors,e),isDirty:!!Fe((t||a).dirtyFields,e),isTouched:!!Fe((t||a).touchedFields,e),error:Fe((t||a).errors,e)}),E=(e,t={})=>{for(const n of e?rt(e):c.mount)c.mount.delete(n),c.array.delete(n),Fe(i,n)&&(t.keepValue||(Pt(i,n),Pt(l,n)),!t.keepError&&Pt(a.errors,n),!t.keepDirty&&Pt(a.dirtyFields,n),!t.keepTouched&&Pt(a.touchedFields,n),!r.shouldUnregister&&!t.keepDefaultValue&&Pt(o,n));m.watch.next({}),m.state.next({...a,...t.keepDirty?{isDirty:S()}:{}}),!t.keepIsValid&&v()},P=(e,t={})=>{let n=Fe(i,e);const s=bt(t.disabled);return yt(i,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),n?s&&yt(l,e,t.disabled?void 0:Fe(l,e,zt(n._f))):b(e,!0,t.value),{...s?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:Yt(t.min),max:Yt(t.max),minLength:Yt(t.minLength),maxLength:Yt(t.maxLength),pattern:Yt(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:s=>{if(s){P(e,t),n=Fe(i,e);const r=Pe(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,a=(e=>St(e)||_e(e))(r),l=n._f.refs||[];if(a?l.find((e=>e===r)):r===n._f.ref)return;yt(i,e,{_f:{...n._f,...a?{refs:[...l.filter(It),r,...Array.isArray(Fe(o,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),b(e,!1,void 0,r)}else n=Fe(i,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!Ve(c.array,e)||!u.action)&&c.unMount.add(e)}}},F=()=>r.shouldFocusError&&ht(i,(e=>e&&Fe(a.errors,e)),c.mount),$=(r,s={})=>{const d=r||o,y=lt(d),h=r&&!et(r)?y:o;if(s.keepDefaultValues||(o=d),!s.keepValues){if(s.keepDirtyValues||n)for(const e of c.mount)Fe(a.dirtyFields,e)?yt(h,e,Fe(l,e)):T(e,Fe(h,e));else{if(ot&&Pe(r))for(const e of c.mount){const t=Fe(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(jt(e)){const t=e.closest("form");if(t){t.reset();break}}}}i={}}l=e.shouldUnregister?s.keepDefaultValues?lt(o):{}:y,m.array.next({values:h}),m.watch.next({values:h})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!f.isValid||!!s.keepIsValid,u.watch=!!e.shouldUnregister,m.state.next({submitCount:s.keepSubmitCount?a.submitCount:0,isDirty:s.keepDirty||s.keepDirtyValues?a.isDirty:!(!s.keepDefaultValues||Mt(r,o)),isSubmitted:!!s.keepIsSubmitted&&a.isSubmitted,dirtyFields:s.keepDirty||s.keepDirtyValues?a.dirtyFields:s.keepDefaultValues&&r?Ut(o,r):{},touchedFields:s.keepTouched?a.touchedFields:{},errors:s.keepErrors?a.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},M=(e,t)=>$(wt(e)?e(l):e,t);return wt(r.defaultValues)&&r.defaultValues().then((e=>{M(e,r.resetOptions),m.state.next({isLoading:!1})})),{control:{register:P,unregister:E,getFieldState:V,_executeSchema:j,_focusError:F,_getWatch:O,_getDirty:S,_updateValid:v,_removeUnmounted:()=>{for(const e of c.unMount){const t=Fe(i,e);t&&(t._f.refs?t._f.refs.every((e=>!It(e))):!It(t._f.ref))&&E(e)}c.unMount=new Set},_updateFieldArray:(e,t=[],r,n,s=!0,c=!0)=>{if(n&&r){if(u.action=!0,c&&Array.isArray(Fe(i,e))){const t=r(Fe(i,e),n.argA,n.argB);s&&yt(i,e,t)}if(c&&Array.isArray(Fe(a.errors,e))){const t=r(Fe(a.errors,e),n.argA,n.argB);s&&yt(a.errors,e,t),((e,t)=>{!Ee(Fe(e,t)).length&&Pt(e,t)})(a.errors,e)}if(f.touchedFields&&c&&Array.isArray(Fe(a.touchedFields,e))){const t=r(Fe(a.touchedFields,e),n.argA,n.argB);s&&yt(a.touchedFields,e,t)}f.dirtyFields&&(a.dirtyFields=Ut(o,l)),m.state.next({name:e,isDirty:S(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else yt(l,e,t)},_getFieldArray:t=>Ee(Fe(u.mount?l:o,t,e.shouldUnregister?Fe(o,t,[]):[])),_reset:$,_updateFormState:e=>{a={...a,...e}},_subjects:m,_proxyFormState:f,get _fields(){return i},get _formValues(){return l},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return o},get _names(){return c},set _names(e){c=e},get _formState(){return a},set _formState(e){a=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:D,register:P,handleSubmit:(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let s=lt(l);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await j();a.errors=e,s=t}else await k(i);Pt(a.errors,"root"),et(a.errors)?(m.state.next({errors:{}}),await e(s,n)):(t&&await t({...a.errors},n),F()),m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:et(a.errors),submitCount:a.submitCount+1,errors:a.errors})},watch:(e,t)=>wt(e)?m.watch.subscribe({next:r=>e(O(void 0,t),r)}):O(e,t,!0),setValue:T,getValues:N,reset:M,resetField:(e,t={})=>{Fe(i,e)&&(Pe(t.defaultValue)?T(e,Fe(o,e)):(T(e,t.defaultValue),yt(o,e,t.defaultValue)),t.keepTouched||Pt(a.touchedFields,e),t.keepDirty||(Pt(a.dirtyFields,e),a.isDirty=t.defaultValue?S(e,Fe(o,e)):S()),t.keepError||(Pt(a.errors,e),f.isValid&&v()),m.state.next({...a}))},clearErrors:e=>{e&&rt(e).forEach((e=>Pt(a.errors,e))),m.state.next({errors:e?a.errors:{}})},unregister:E,setError:(e,t,r)=>{const n=(Fe(i,e,{_f:{}})._f||{}).ref;yt(a.errors,e,{...t,ref:n}),m.state.next({name:e,errors:a.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},setFocus:(e,t={})=>{const r=Fe(i,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:V}}var Kt="vanguard.checkout.address.cta.change",Qt="vanguard.checkout.address.cta.add",Zt="vanguard.checkout.address.formTitle",Xt="vanguard.checkout.address.name",er="vanguard.checkout.address.required",tr="vanguard.checkout.address.line1",rr="vanguard.checkout.address.line2",nr="vanguard.checkout.address.zipcode",sr="vanguard.checkout.address.cityTown",ar="vanguard.checkout.address.country",ir="vanguard.checkout.address.cta.cancel",or="vanguard.checkout.address.search",lr="vanguard.checkout.address.addNew",ur="vanguard.cart.overlay.delete",cr="vanguard.common.nameTitle",dr="vanguard.common.name.optionalNames",fr="vanguard.confirmationDialog.message",mr="vanguard.checkout.address.cancel",yr="vanguard.checkout.address.confirm",hr="vanguard.cart.delete",pr="vanguard.common.name.person",vr="vanguard.common.name.company";function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xr=function(e){var r=e.form,s=e.availableCountries,a=e.titles,i=w().t,o=r.register,l=r.setValue,c=r.control,d=r.formState,f=r.watch,m=d.errors,y=f("titleCode"),h=t.useRef(null),p=o("streetName",{required:i(er)}),v=t.useMemo((function(){return s.map((function(e){return{label:e.name,value:e.isocode}}))}),[s]);return t.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var n=new google.maps.places.Autocomplete(h.current,{fields:["address_components"]});n.setComponentRestrictions({country:v.map((function(e){return e.value.toString()}))}),n.addListener("place_changed",(function(){var e,t=((null==(e=n.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});Object.keys(t).forEach((function(e){return l(e,t[e])}))}))}}),[l,v]),u.jsxs("form",{"data-testid":"addAddress",className:"space-y-1",children:[(null==a?void 0:a.length)>0&&u.jsx(ct,{control:c,name:"titleCode",render:function(e){var t=e.field;return u.jsx(n.Select,{label:""+i(cr),testid:"titleInput",options:null==a?void 0:a.map((function(e){return{label:e.name,value:e.code}})),error:Boolean(null==m?void 0:m.titleCode),value:t.value,onChange:t.onChange})}}),u.jsx(n.TextInput,br(br({},o("name1",{required:i(er)})),{},{label:i(Xt)+"*",testid:"nameInput1",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name1),placeholder:{"0001":i(pr),"0002":i(pr),"0003":i(vr),"0004":i(pr)}[y]})),u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(n.TextInput,br(br({},o("name2")),{},{testid:"nameInput2",label:i(dr),autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name2)})),u.jsx(n.TextInput,br(br({},o("name3")),{},{testid:"nameInput3",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name3)})),u.jsx(n.TextInput,br(br({},o("name4")),{},{testid:"nameInput4",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name4)}))]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-10/12",children:u.jsx(n.TextInput,br(br({},p),{},{ref:function(e){p.ref(e),h.current=e},testid:"streetNameInput",label:i(tr)+"*",autoComplete:"street-address",maxlength:60,error:Boolean(null==m?void 0:m.streetName),inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-2/12",children:u.jsx(n.TextInput,br(br({},o("streetNumber",{required:i(er)})),{},{testid:"streetNumberInput",label:i(rr)+"*",error:Boolean(null==m?void 0:m.streetNumber),maxlength:12,autoComplete:"street-address",inputClassName:"w-full"}))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[u.jsx("div",{className:"sm:w-2/12",children:u.jsx(n.TextInput,br(br({},o("zipCode",{required:i(er)})),{},{testid:"zipCodeInput",label:i(nr)+"*",error:Boolean(null==m?void 0:m.zipCode),maxlength:10,autoComplete:"postal-code",inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-10/12",children:u.jsx(n.TextInput,br(br({},o("city",{required:i(er)})),{},{testid:"cityInput",label:i(sr)+"*",error:Boolean(null==m?void 0:m.city),maxlength:40,autoComplete:"address-level2",inputClassName:"w-full"}))})]}),u.jsx("div",{className:"w-12/12",children:u.jsx(ct,{control:c,name:"country",rules:{required:!0},render:function(e){var t=e.field;return u.jsx(n.Select,{label:i(ar)+"*",testid:"countryInput",options:v,error:Boolean(null==m?void 0:m.country),value:t.value,onChange:t.onChange})}})})]})},wr=function(e){var r=e.address,s=t.useMemo((function(){var e;return{name1:null==r?void 0:r.name1,name2:null==r?void 0:r.name2,name3:null==r?void 0:r.name3,name4:null==r?void 0:r.name4,imprint:[null==r?void 0:r.line1,null==r?void 0:r.line2].join(" "),region:[null==r?void 0:r.postalCode,null==r?void 0:r.town].join(" "),country:null==r||null==(e=r.country)?void 0:e.name,first_name:null==r?void 0:r.first_name,last_name:null==r?void 0:r.last_name,title:null==r?void 0:r.title}}),[r]);return u.jsxs("div",{"data-testid":"addressPreview",children:[(null==s?void 0:s.title)&&u.jsx(n.Text,{testid:"title",children:null==s?void 0:s.title}),((null==s?void 0:s.first_name)||(null==s?void 0:s.last_name))&&u.jsxs(n.Text,{testid:"name",children:[null==s?void 0:s.first_name," ",null==s?void 0:s.last_name]}),(null==s?void 0:s.name1)&&u.jsx(n.Text,{testid:"name1",children:null==s?void 0:s.name1}),(null==s?void 0:s.name2)&&u.jsx(n.Text,{testid:"name2",children:null==s?void 0:s.name2}),(null==s?void 0:s.name3)&&u.jsx(n.Text,{testid:"name3",children:null==s?void 0:s.name3}),(null==s?void 0:s.name4)&&u.jsx(n.Text,{testid:"name4",children:null==s?void 0:s.name4}),(null==s?void 0:s.imprint)&&u.jsx(n.Text,{testid:"imprint",children:null==s?void 0:s.imprint}),(null==s?void 0:s.region)&&u.jsx(n.Text,{testid:"region",children:null==s?void 0:s.region}),(null==s?void 0:s.country)&&u.jsx(n.Text,{testid:"country",children:null==s?void 0:s.country})]})},jr=t.createContext(null),kr=function(e){var r=e.children,n=e.onAdd,s=e.onChange,a=e.onRemove,i=e.available,o=void 0===i?[]:i,l=e.showOneTimeAddress,c=e.address,d=t.useState(c||null),f=d[0],m=d[1],y=t.useState(!1),h=y[0],p=y[1],v=t.useState(!1),g=v[0],b=v[1],x=t.useState([]),w=x[0],j=x[1],k=function(){var e=t.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),r=t.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),n=t.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:t.useCallback((function(){return sessionStorage.clear()}),[]),setItem:e,getItem:r,removeItem:n}}(),S=k.setItem,O=k.getItem;return t.useEffect((function(){var e=O("OneTimeAddress")&&JSON.parse(O("OneTimeAddress").value);h&&j(e||[])}),[h,O]),u.jsx(jr.Provider,{value:{address:c,availableAddresses:[].concat(o,l?w:[]),showOneTimeAddress:l,selectedAddress:f,setSelectedAddress:m,isAddressDialogVisible:h,setAddressDialogVisible:p,isRemoveAddressDialogVisible:g,setRemoveAddressDialogVisible:b,handleAddOneTimeAddress:function(e){m(e),n(e),S("OneTimeAddress",JSON.stringify([].concat(w,[e]))),p(!1)},handleChange:function(){f.id?s(f):n(f),p(!1)},handleRemove:function(e){a(e),b(!1)}},children:r})},Sr=function(){return t.useContext(jr)},Or=function(){var e=Sr(),r=e.availableAddresses,a=e.selectedAddress,i=e.setSelectedAddress,o=t.useState(""),l=o[0],c=o[1],d=function(e,t){return e.id&&t.id?e.id===t.id:(null==e||null==(r=e.name1)?void 0:r.trim())===(null==t||null==(n=t.name1)?void 0:n.trim())&&(null==e||null==(s=e.name2)?void 0:s.trim())===(null==t||null==(a=t.name2)?void 0:a.trim())&&(null==e||null==(i=e.name3)?void 0:i.trim())===(null==t||null==(o=t.name3)?void 0:o.trim())&&(null==e||null==(l=e.name4)?void 0:l.trim())===(null==t||null==(u=t.name4)?void 0:u.trim())&&(null==e||null==(c=e.line1)?void 0:c.trim())===(null==t||null==(d=t.line1)?void 0:d.trim())&&(null==e||null==(f=e.line2)?void 0:f.trim())===(null==t||null==(m=t.line2)?void 0:m.trim())&&(null==e||null==(y=e.town)?void 0:y.trim())===(null==t||null==(h=t.town)?void 0:h.trim())&&(null==e?void 0:e.postalCode)===(null==t?void 0:t.postalCode)&&JSON.stringify(null==e?void 0:e.country)===JSON.stringify(null==t?void 0:t.country);var r,n,s,a,i,o,l,u,c,d,f,m,y,h};return u.jsxs("div",{"data-testid":"searchAddress",className:"mt-6 sm:mt-0",children:[u.jsx(n.TextInput,{testid:"searchInput",inputClassName:"w-full",value:l,onChange:function(e){var t=e.target.value;c(t)},icon:{type:"search"}}),u.jsx("div",{className:"h-96 overflow-y-auto mt-2 space-y-2","data-testid":"list",children:r.filter((function(e){return[e.name1,e.name2,e.name3,e.name4].join(" ").toLowerCase().includes(l.toLowerCase())})).map((function(e,t){return u.jsx("div",{className:s("p-2","cursor-pointer","border-l-4",a&&{"hover:border-gray-300":!d(e,a),"border-primary":d(e,a)}),onClick:function(){return i(e)},"data-testid":"item",children:u.jsx(wr,{address:e})},t)}))})]})},_r=function(){var r=t.useState("addNew"),s=r[0],a=r[1],i=w(),o=i.t,l=i.cartCode,c=Sr(),d=c.availableAddresses,f=c.showOneTimeAddress,m=c.isAddressDialogVisible,y=c.setAddressDialogVisible,h=c.handleChange,p=c.handleAddOneTimeAddress,v=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:l}).data,g=e.store.api.checkout.useGetTitlesQuery({cartCode:l}).data,b=function(e={}){const r=t.useRef(),[n,s]=t.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:wt(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Jt(e,(()=>s((e=>({...e}))))),formState:n});const a=r.current.control;return a._options=e,st({subject:a._subjects.state,next:e=>{tt(e,a._proxyFormState,a._updateFormState,!0)&&s({...a._formState})}}),t.useEffect((()=>{a._stateFlags.mount||(a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()})),t.useEffect((()=>{e.values&&!Mt(e.values,a._defaultValues)&&a._reset(e.values,a._options.resetOptions)}),[e.values,a]),t.useEffect((()=>{n.submitCount&&a._focusError()}),[a,n.submitCount]),r.current.formState=Xe(n,a),r.current}(),x=function(e){var t={titleCode:e.titleCode||"",name1:e.name1.trim()||null,name2:e.name2.trim()||null,name3:e.name3.trim()||null,name4:e.name4.trim()||null,line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:v.find((function(t){return t.isocode===e.country}))};b.reset(),p(t)};return t.useEffect((function(){a((null==d?void 0:d.length)>0?"search":"addNew")}),[d]),u.jsxs(n.Dialog,{title:o(Zt),isOpen:m,onClose:function(){return y(!1)},testid:"addressDialog",children:[(null==d?void 0:d.length)>0&&f&&u.jsxs(n.Tabs,{className:"flex-col sm:flex-row",onSelectTab:function(e){return a(e)},size:"sm",children:[u.jsx(n.Tabs.Tab,{testid:"searchTab",tabKey:"search",title:o(or),selected:"search"===s}),u.jsx(n.Tabs.Tab,{testid:"addNewTab",tabKey:"addNew",title:o(lr),selected:"addNew"===s})]}),"search"===s?u.jsx(Or,{}):u.jsx(xr,{form:b,availableCountries:v,titles:null==g?void 0:g.titles}),u.jsxs("div",{className:"flex mt-6 space-x-4 justify-between sm:justify-end",children:[u.jsx(n.Button,{variant:"outlined",testid:"cancelButton",onClick:function(){return y(!1),void b.reset()},children:o(mr)}),u.jsx(n.Button,{testid:"confirmButton",onClick:function(){return"search"===s?h():b.handleSubmit(x)()},children:o(yr)})]})]})},Cr=function(e){var t=e.hasRemove,r=Sr(),s=r.address,a=r.availableAddresses,i=r.showOneTimeAddress,o=r.setAddressDialogVisible,l=r.setRemoveAddressDialogVisible,c=w().t,d=(null==a?void 0:a.length)>1||i;return u.jsxs(u.Fragment,{children:[u.jsx(wr,{address:s}),d&&u.jsxs("div",{className:"flex divide-x-2 space-x-2 mt-1",children:[u.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return o(!0)},children:c(s?Kt:Qt)}),s&&t&&u.jsx("div",{className:"pl-2",children:u.jsx(n.Button,{testid:"removeAddressButton",variant:"text",onClick:function(){return l(!0)},children:c(ur)})})]})]})},Tr=function(){var e=w().t,t=Sr(),r=t.setRemoveAddressDialogVisible,s=t.isRemoveAddressDialogVisible,a=t.handleRemove,i=t.address;return u.jsxs(n.Dialog,{title:e(hr),testid:"deleteAddressDialog",isOpen:s,onClose:function(){return r(!1)},children:[u.jsx(n.Text,{children:e(fr)}),u.jsxs("div",{className:"flex mt-8 space-x-4 justify-end",children:[u.jsx(n.Button,{testid:"cancelButton",variant:"outlined",onClick:function(){return r(!1)},children:e(ir)}),u.jsx(n.Button,{testid:"confirmButton",onClick:function(){return a(i)},children:e(ur)})]})]})};function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nr,Vr,Er=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return u.jsxs(kr,Dr(Dr({},t),{},{children:[u.jsx(Cr,{hasRemove:!!t.onRemove}),u.jsx(_r,{}),u.jsx(Tr,{})]}))},Pr={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",i="hour",o="day",l="week",u="month",c="quarter",d="year",f="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,u),a=r-s<0,i=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:l,d:o,D:f,h:i,m:a,s:s,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",x={};x[b]=p;var w=function(e){return e instanceof O},j=function e(t,r,n){var s;if(!t)return b;if("string"==typeof t){var a=t.toLowerCase();x[a]&&(s=a),r&&(x[a]=r,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var o=t.name;x[o]=t,s=o}return!n&&s&&(b=s),s||!n&&b},k=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new O(r)},S=g;S.l=j,S.i=w,S.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function p(e){this.$L=j(e.locale,null,!0),this.parse(e)}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(y);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===m)},v.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!S.u(t)||t,c=S.p(e),m=function(e,t){var s=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(o)},y=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case d:return n?m(1,0):m(31,11);case u:return n?m(1,p):m(0,p+1);case l:var b=this.$locale().weekStart||0,x=(h<b?h+7:h)-b;return m(n?v-x:v+(6-x),p);case o:case f:return y(g+"Hours",0);case i:return y(g+"Minutes",1);case a:return y(g+"Seconds",2);case s:return y(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,l=S.p(e),c="set"+(this.$u?"UTC":""),m=(r={},r[o]=c+"Date",r[f]=c+"Date",r[u]=c+"Month",r[d]=c+"FullYear",r[i]=c+"Hours",r[a]=c+"Minutes",r[s]=c+"Seconds",r[n]=c+"Milliseconds",r)[l],y=l===o?this.$D+(t-this.$W):t;if(l===u||l===d){var h=this.clone().set(f,1);h.$d[m](y),h.init(),this.$d=h.set(f,Math.min(this.$D,h.daysInMonth())).$d}else m&&this.$d[m](y);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(n,c){var f,m=this;n=Number(n);var y=S.p(c),h=function(e){var t=k(m);return S.w(t.date(t.date()+Math.round(e*n)),m)};if(y===u)return this.set(u,this.$M+n);if(y===d)return this.set(d,this.$y+n);if(y===o)return h(1);if(y===l)return h(7);var p=(f={},f[a]=t,f[i]=r,f[s]=e,f)[y]||1,v=this.$d.getTime()+n*p;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),a=this.$H,i=this.$m,o=this.$M,l=r.weekdays,u=r.months,c=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},d=function(e){return S.s(a%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:S.s(o+1,2,"0"),MMM:c(r.monthsShort,o,u,3),MMMM:c(u,o),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:S.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:S.s(i,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:s};return n.replace(h,(function(e,t){return t||y[e]||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,m){var y,h=S.p(f),p=k(n),v=(p.utcOffset()-this.utcOffset())*t,g=this-p,b=S.m(this,p);return b=(y={},y[d]=b/12,y[u]=b,y[c]=b/3,y[l]=(g-v)/6048e5,y[o]=(g-v)/864e5,y[i]=g/r,y[a]=g/t,y[s]=g/e,y)[h]||g,m?b:S.a(b)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return x[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=j(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),_=O.prototype;return k.prototype=_,[["$ms",n],["$s",s],["$m",a],["$H",i],["$W",o],["$M",u],["$y",d],["$D",f]].forEach((function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,O,k),e.$i=!0),k},k.locale=j,k.isDayjs=w,k.unix=function(e){return k(1e3*e)},k.en=x[b],k.Ls=x,k.p={},k}()}({get exports(){return Pr},set exports(e){Pr=e}}),function(e){e.Copy="copy",e.Move="move"}(Nr||(Nr={})),function(e){e.private="private",e.public="public"}(Vr||(Vr={}));var Fr=function(){var e=w().t,t=fe(),r=t.setAddress,s=t.address,a=function(e){r(e)};return u.jsx(n.Tile,{header:L,className:"my-4",isAccordionType:!0,testid:"propertyDetailsTile",children:u.jsxs("div",{className:"flex flex-row space-between",children:[u.jsxs("div",{className:"pr-8 space-y-2","data-testid":"description",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:e(I)}),u.jsx(n.TextInput,{testid:I,size:40,multiline:!0,rows:3})]}),u.jsxs("div",{className:"space-y-2","data-testid":"property",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:e(Z)}),u.jsx(Er,{showOneTimeAddress:!0,address:s,onChange:a,onAdd:a})]})]})})},$r=function(){var r=w().t,s=T,a=A,i=D,o=V,l=E,c=P,d=F,f=function(){var r=w(),n=r.t,s=r.headPositionCode,a=t.useState(null),i=a[0],o=a[1],l=t.useState(null),u=l[0],c=l[1],d=t.useState(null),f=d[0],m=d[1],y=e.store.api.keysystem.useGetStandardQuery({headPositionCode:s}).data,h=t.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:n(N+"."+e.key),color:"default"}})):[]}),[n]),p=t.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:e.value,color:"default"}})):[]}),[]),v=t.useCallback((function(e){return e?e.map((function(e){return{value:e.isocode,label:n($+"."+e.isocode.substring(0,2).toUpperCase()),color:"default"}})):[]}),[n]);return t.useMemo((function(){return{categories:h(null==y?void 0:y.categories),technologies:p(null==y?void 0:y.technologies),languages:v(null==y?void 0:y.languages),selectedCategory:i,selectedTechnology:u,selectedLanguage:f,setSelectedCategory:o,setSelectedTechnology:c,setSelectedLanguage:m}}),[h,null==y?void 0:y.categories,null==y?void 0:y.technologies,null==y?void 0:y.languages,p,v,i,u,f])}(),m=f.categories,y=f.technologies,h=f.languages,p=f.selectedCategory,v=f.selectedTechnology,g=f.selectedLanguage,b=f.setSelectedCategory,x=f.setSelectedTechnology,j=f.setSelectedLanguage;return u.jsx(n.Tile,{header:s,className:"mt-4",isAccordionType:!0,testid:"standardTile",children:u.jsxs("div",{className:"flex flex-row space-between",children:[u.jsx(n.Select,{className:"p-4",label:r(a),placeholder:r(i),testid:"categorySelect",options:m,value:p,onChange:function(e){return b(e.target.value)}}),u.jsx(n.Select,{className:"p-4",label:r(o),placeholder:r(l),testid:"technologySelect",options:y,value:v,onChange:function(e){return x(e.target.value)}}),u.jsx(n.Select,{className:"p-4",label:r(c),placeholder:r(d),testid:"languageSelect",options:h,value:g,onChange:function(e){return j(e.target.value)}})]})})},Mr=function(){var e=fe().pageName;return u.jsxs("div",{className:"flex flex-col",children:["headerData"===e&&u.jsxs(u.Fragment,{children:[u.jsx($r,{}),u.jsx(ge,{}),u.jsx(Fr,{})]}),"keyPlan"===e&&u.jsx(u.Fragment,{children:u.jsx(Oe,{})})]})};!function(t,n){var s='[data-react-app="'+n+'"]:not([data-rendered])',a=document.querySelector(s);if(!a)throw new Error(s+" is missing");var i=document.createElement("div");a.appendChild(i),a.setAttribute("data-rendered","true"),r.render(function(t,r){return u.jsx(e.StoreProvider,{children:u.jsx(m,{appId:r,children:u.jsx(h,{children:u.jsx(t,{})})})})}(t,n),i)}((function(){return u.jsx(me,{children:u.jsxs("div",{"data-testid":"newKeySystem",children:[u.jsx(pe,{}),u.jsx(Mr,{}),u.jsx(ye,{})]})})}),"new-key-system")}));
