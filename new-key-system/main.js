!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,a){"use strict";var s,o,i,l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},u=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{}),c={};function d(){if(o)return s;o=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}return s=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(a,s){for(var o,i,l=n(a),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))t.call(o,c)&&(l[c]=o[c]);if(e){i=e(o);for(var d=0;d<i.length;d++)r.call(o,i[d])&&(l[i[d]]=o[i[d]])}}return l},s}!function(e){e.exports=function(){if(i)return c;i=1,d();var e=t,r=60103;if(c.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;r=n("react.element"),c.Fragment=n("react.fragment")}var a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,l={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,i)&&!o.hasOwnProperty(i)&&(l[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===l[i]&&(l[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:l,_owner:a.current}}return c.jsx=l,c.jsxs=l,c}()}({get exports(){return u},set exports(e){u=e}});var f=t.createContext(null),m=function(e){var r=e.appId,n=e.children,a=t.useMemo((function(){var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");try{return JSON.parse(n.innerHTML)}catch(e){throw Error("Couldn't load config of #"+r)}}),[r]);return u.jsx(f.Provider,{value:a,children:n})},h=t.createContext(null),y=function(e){var r=e.children,n=t.useState(new URL(location.href));return u.jsx(h.Provider,{value:n,children:r})};var p={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",a="second",s="minute",o="hour",i="day",l="week",u="month",c="quarter",d="year",f="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,u),s=r-a<0,o=t.clone().add(n+(s?-1:1),u);return+(-(n+(r-a)/(s?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:l,d:i,D:f,h:o,m:s,s:a,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},x="en",b={};b[x]=p;var w=function(e){return e instanceof C},j=function e(t,r,n){var a;if(!t)return x;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(a=s),r&&(b[s]=r,a=s);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var i=t.name;b[i]=t,a=i}return!n&&a&&(x=a),a||!n&&x},k=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new C(r)},S=g;S.l=j,S.i=w,S.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function p(e){this.$L=j(e.locale,null,!0),this.parse(e)}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var a=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===m)},v.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!S.u(t)||t,c=S.p(e),m=function(e,t){var a=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?a:a.endOf(i)},h=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case d:return n?m(1,0):m(31,11);case u:return n?m(1,p):m(0,p+1);case l:var x=this.$locale().weekStart||0,b=(y<x?y+7:y)-x;return m(n?v-b:v+(6-b),p);case i:case f:return h(g+"Hours",0);case o:return h(g+"Minutes",1);case s:return h(g+"Seconds",2);case a:return h(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,l=S.p(e),c="set"+(this.$u?"UTC":""),m=(r={},r[i]=c+"Date",r[f]=c+"Date",r[u]=c+"Month",r[d]=c+"FullYear",r[o]=c+"Hours",r[s]=c+"Minutes",r[a]=c+"Seconds",r[n]=c+"Milliseconds",r)[l],h=l===i?this.$D+(t-this.$W):t;if(l===u||l===d){var y=this.clone().set(f,1);y.$d[m](h),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(n,c){var f,m=this;n=Number(n);var h=S.p(c),y=function(e){var t=k(m);return S.w(t.date(t.date()+Math.round(e*n)),m)};if(h===u)return this.set(u,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===i)return y(1);if(h===l)return y(7);var p=(f={},f[s]=t,f[o]=r,f[a]=e,f)[h]||1,v=this.$d.getTime()+n*p;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),s=this.$H,o=this.$m,i=this.$M,l=r.weekdays,u=r.months,c=function(e,r,a,s){return e&&(e[r]||e(t,n))||a[r].slice(0,s)},d=function(e){return S.s(s%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:S.s(i+1,2,"0"),MMM:c(r.monthsShort,i,u,3),MMMM:c(u,i),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:S.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,o,!0),A:f(s,o,!1),m:String(o),mm:S.s(o,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:a};return n.replace(y,(function(e,t){return t||h[e]||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,m){var h,y=S.p(f),p=k(n),v=(p.utcOffset()-this.utcOffset())*t,g=this-p,x=S.m(this,p);return x=(h={},h[d]=x/12,h[u]=x,h[c]=x/3,h[l]=(g-v)/6048e5,h[i]=(g-v)/864e5,h[o]=g/r,h[s]=g/t,h[a]=g/e,h)[y]||g,m?x:S.a(x)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=j(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),N=C.prototype;return k.prototype=N,[["$ms",n],["$s",a],["$m",s],["$H",o],["$W",i],["$M",u],["$y",d],["$D",f]].forEach((function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,C,k),e.$i=!0),k},k.locale=j,k.isDayjs=w,k.unix=function(e){return k(1e3*e)},k.en=b[x],k.Ls=b,k.p={},k}()}({get exports(){return p},set exports(e){p=e}});var v=p,g={};!function(e,t){e.exports=function(e,t,r){var n=function(e,t){if(!t||!t.length||!t[0]||1===t.length&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=t[0];for(var n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}({get exports(){return g},set exports(e){g=e}});var x=g;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}function j(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}v.extend(x);var C=function(){var e=t.useContext(f),r=t.useCallback((function(t){var r,n=null==(r=e.translations)?void 0:r[t];if(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.length?l(n,s):n}return t}),[e]);return S(S({},e),{},{t:r})};function N(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}var _={},O={get exports(){return _},set exports(e){_=e}},T={};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return T},set exports(e){T=e}}),function(e){var t=T.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},a=Object.prototype,s=a.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,s=Object.create(a.prototype),i=new O(n||[]);return o(s,"_invoke",{value:S(e,r,i)}),s}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var h={};function y(){}function p(){}function v(){}var g={};d(g,l,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(T([])));b&&b!==a&&s.call(b,l)&&(g=b);var w=v.prototype=y.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,r){function n(a,o,i,l){var u=m(e[a],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&s.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):r.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(u.arg)}var a;o(this,"_invoke",{value:function(e,t){function s(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(s,s):s()}})}function S(e,t,r){var n="suspendedStart";return function(a,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw s;return D()}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var i=C(o,r);if(i){if(i===h)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=m(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function C(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=m(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var s=a.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function T(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:p,configurable:!0}),p.displayName=d(v,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},n.awrap=function(e){return{__await:e}},j(k.prototype),d(k.prototype,u,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,a,s){void 0===s&&(s=Promise);var o=new k(f(e,t,r,a),s);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(w),d(w,c,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var i=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(O);var D=_(),A=D;try{regeneratorRuntime=D}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=D:Function("r","regeneratorRuntime = r")(D)}var L="vanguard.keysystem.header.standard",V="vanguard.keysystem.header.standard.category",E="vanguard.keysystem.header.standard.category.placeholder",F="mks.Systemheader.CategoryType",$="vanguard.keysystem.header.standard.technology",P="vanguard.keysystem.header.standard.technology.placeholder",M="vanguard.keysystem.header.standard.systemLanguage",I="vanguard.keysystem.header.standard.systemLanguage.placeholder",q="mks.Systemheader.Language",B="vanguard.keysystem.header.epos",R="vanguard.keysystem.header.property",z="vanguard.keysystem.header.property.description",U="vanguard.keysystem.new",H="vanguard.keysystem.new.header",G="vanguard.keysystem.new.electronic",Y="vanguard.keysystem.keyPlan",W="vanguard.keysystem.new.prev",Q="vanguard.keysystem.new.next",K="vanguard.keysystem.header.epos.name",J="vanguard.keysystem.header.epos.status",Z="vanguard.keysystem.header.epos.technology",X="vanguard.keysystem.header.epos.add",ee="vanguard.keysystem.header.epos.status.active",te="vanguard.keysystem.header.epos.status.inactive",re="vanguard.keysystem.header.property.address",ne="vanguard.keysystem.keyPlan.keysCylinders",ae="vanguard.keysystem.keyPlan.key.lockingPosition",se="vanguard.keysystem.keyPlan.key.epos",oe="vanguard.keysystem.keyPlan.key.function",ie="vanguard.keysystem.keyPlan.key.product",le="vanguard.keysystem.keyPlan.key.configuration",ue="vanguard.keysystem.keyPlan.key.quantity",ce="vanguard.keysystem.keyplan.pagination.gotoPage",de="vanguard.keysystem.keyplan.pagination.pageOf",fe="vanguard.keysystem.keyplan.pagination.show",me="vanguard.keysystem.keyplan.filters.all",he="vanguard.keysystem.keyplan.filters.searchNRecords",ye=t.createContext(null),pe=function(){return t.useContext(ye)},ve=function(r){var n=r.children,a=t.useState("headerData"),s=a[0],o=a[1],i=t.useState({}),l=i[0],c=i[1],d=e.store.api.keysystem.useGetDeliveryCountriesQuery().data,f=t.useMemo((function(){return{pageName:s,setPageName:function(e){return o(e)},address:l,setAddress:function(e){return c(e)},availableCountries:null==d?void 0:d.countries}}),[s,l,d]);return u.jsx(ye.Provider,{value:f,children:n})},ge=function(){var e=pe(),t=e.pageName,r=e.setPageName,a=C().t;return u.jsxs("div",{className:"flex justify-between items-center h-14 px-4 border",children:[u.jsx("div",{children:"keyPlan"===t&&u.jsxs("div",{className:"flex justify-center items-center cursor-pointer mr-2",onClick:function(){return r("headerData")},children:[u.jsx(n.Icon,{type:"arrowleft"}),u.jsx(n.Text,{color:"primary",bold:!0,children:a(W)})]})}),u.jsx("div",{children:"headerData"===t&&u.jsxs("div",{className:"flex justify-center items-center cursor-pointer mr-2",onClick:function(){return r("keyPlan")},children:[u.jsx(n.Text,{color:"primary",bold:!0,children:a(Q)}),u.jsx(n.Icon,{type:"arrowright"})]})})]})},xe=function(e){var t=e.keyTypeName,r=e.onClose,a=e.onBackArrow,s=e.headerTitle,o=e.showArrow,i=void 0!==o&&o,l=C().t;return u.jsxs("div",{className:"flex justify-between items-center h-14 px-4 border","data-testid":"header",children:[i&&u.jsx("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:a,children:u.jsx(n.Icon,{type:"arrowleft",testid:"arrowLeftIcon"})}),u.jsx(n.Text,{type:"h3",color:"primary",size:"xl",bold:!0,children:l(U)+" - "+l(t)+" - "+l(s)}),u.jsx("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:r,children:u.jsx(n.Icon,{type:"close",className:"text-red-500",color:"#ff426c",testid:"closeIcon"})})]})},be=function(){var e="headerData"===pe().pageName?H:Y;return u.jsx(xe,{headerTitle:e,keyTypeName:G,onBackArrow:function(){},onClose:function(){}})},we=function(e){var t=e.name,r=e.technology,a=e.isTitle,s=void 0!==a&&a,o=e.status,i=C().t;return u.jsxs("div",{className:"flex justify-between items-center mt-2 pb-2 border-b border-b-text-gray-300","data-testid":"row",children:[u.jsx("div",{className:"w-1/3",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:s,testid:"name",children:i(t)})}),u.jsx("div",{className:"w-1/3",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:s,testid:"technology",children:i(r)})}),u.jsx("div",{className:"w-1/4",children:u.jsx(n.Text,{size:"sm",color:"gray",bold:s,testid:"status",children:i(o)})}),u.jsx("div",{className:"w-12 h-12",children:!s&&u.jsx(n.ActionsMenu,{})})]})},je=function(){var t,r=C(),a=r.headPositionCode,s=r.t,o=e.store.api.keysystem.useGetEposQuery({headPositionCode:a}).data;return u.jsxs(n.Tile,{header:B,className:"mt-4",isAccordionType:!0,testid:"eposTile",children:[u.jsx(we,{name:K,technology:Z,status:J,isTitle:!0}),null==o||null==(t=o.electronicPositions)?void 0:t.map((function(e,t){var r=e.authMediaTechnology,n=r.eposName,a=r.technology,s=e.deactivated;return u.jsx(we,{name:n,technology:a,status:s?te:ee},""+n+a+t)})),u.jsx("button",{className:"flex justify-end mt-6 cursor-pointer",onClick:function(){},children:u.jsx(n.Text,{color:"primary",transform:["underline","capitalize"],bold:!0,children:s(X)})})]})},ke=function(r){var n=t.useState([]),a=n[0],s=n[1],o=e.store.api.keysystem.useSearchProductsMutation()[0],i=t.useCallback(function(){var e,t=(e=A.mark((function e(t){var n,a;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({technicalSystem:"K30",emksProductType:r.toUpperCase(),searchTerm:t,page:0}).unwrap();case 3:n=e.sent,a=n.data,s(a.products),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){N(s,n,a,o,i,"next",e)}function i(e){N(s,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[o,r]);return t.useMemo((function(){return{products:a,handleProductSearch:i}}),[i,a])},Se=function(e){var t=e.value,r=e.column,a=e.row,s=e.selectedKeyTab,o=e.updateCallback,i=ke(s),l=i.products,c=i.handleProductSearch;return u.jsx(n.AutocompleteInput,{dropdownClassName:"w-64",initialValue:t.toString(),items:l.map((function(e){return e.name+", "+e.code})),onDispatchSearch:c,onItemSelect:function(e){var t=l[e].name;o("update",a,r,t)}})},Ce=t.memo(Se);function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe={pos:"",epos:"epos1",function:"",product:"",configuration:"",quantity:0,cellsToDisable:void 0},Te=function(){var r,a,s=t.useState([Oe]),o=s[0],i=s[1],l=t.useState(!1),c=l[0],d=l[1],f=t.useState("key"),m=f[0],h=f[1],y=(r=C().headPositionCode,{businessCase:null==(a=e.store.api.keysystem.useGetHeadPositionQuery({headPositionCode:r}).data)?void 0:a.businessCase}).businessCase,p=C().t,v=t.useMemo((function(){return{gotoPage:p(ce),pageOf:p(de),show:p(fe),all:p(me),searchNRecords:p(he)}}),[p]),g=t.useCallback((function(e,t,r,n){void 0!==t&&(d(!0),i((function(a){switch(e){case"create":return a.splice(t+1,0,{pos:a[t].pos||"",epos:"",function:a[t].function||"",product:"",configuration:"",quantity:0,cellsToDisable:""!==a[t].pos&&"REORDER"===y?["pos"]:void 0}),[].concat(a);case"delete":return a.splice(t,1),[].concat(a);case"copy":var s=_e({},a[t]);return s.quantity=0,s.cellsToDisable="REORDER"===y||"EXTENSION"===y?["pos"]:void 0,a.splice(t+1,0,s),[].concat(a);case"update":if(void 0===r)return[].concat(a);var o=a.map((function(e,s){var o;return s===t?_e(_e({},a[t]),{},((o={})[r]=n,o)):e}));return[].concat(o);default:return[].concat(a)}})))}),[y]),x=t.useMemo((function(){return[{Header:"",accessor:"keyIcon",cellElement:function(){return u.jsx("div",{className:"flex justify-center items-center w-full h-full",children:u.jsx(n.Icon,{type:"locked"})})},disableFilter:!0,disableSorting:!0,width:50},{Header:p(ae),accessor:"pos",customCellType:"textEdit",isSelectFilter:!0,width:100},{Header:p(se),accessor:"epos",isSelectFilter:!0,customCellType:"selectEdit",selectOptions:["epos1","epos2"]},{Header:p(oe),accessor:"function",customCellType:"textEdit"},{Header:p(ie),accessor:"product",isSelectFilter:!0,cellElement:function(e){var t=e.value,r=e.row.index,n=e.column.id;return u.jsx(Ce,{value:t,row:r,column:n,selectedKeyTab:m,updateCallback:g})}},{Header:p(le),accessor:"configuration",customCellType:"textEdit",width:350},{Header:p(ue),accessor:"quantity",customCellType:"numberEdit",width:75},{Header:"",accessor:"actions",customCellType:"tableModification",disableFilter:!0,disableSorting:!0,width:75}]}),[m,p,g]);return t.useEffect((function(){d(!1)}),[o]),u.jsx(n.Tile,{header:p(ne),className:"my-2 px-4",testid:"keyAndCylindersTile",children:u.jsxs("div",{className:"w-full pt-3",children:[u.jsxs(n.Tabs,{onSelectTab:function(e){return h(e)},size:"sm",children:[u.jsx(n.Tabs.Tab,{testid:"keysTab",tabKey:"key",title:"Keys",iconType:"locked"}),u.jsx(n.Tabs.Tab,{testid:"cylindersTab",tabKey:"cylinder",title:"Cylinders",iconType:"cylinder"}),u.jsx(n.Tabs.Tab,{testid:"securityCardsTab",tabKey:"securityCard",title:"Security Cards",iconType:"card"})]}),u.jsx(n.DataTable,{className:"w-full",columns:x,data:o,updateData:g,skipPageReset:c,translations:v,disableDeletion:"EXTENSION"===y||"REORDER"===y})]})})},De=e=>"checkbox"===e.type,Ae=e=>e instanceof Date,Le=e=>null==e;const Ve=e=>"object"==typeof e;var Ee=e=>!Le(e)&&!Array.isArray(e)&&Ve(e)&&!Ae(e),Fe=e=>Ee(e)&&e.target?De(e.target)?e.target.checked:e.target.value:e,$e=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Pe=e=>Array.isArray(e)?e.filter(Boolean):[],Me=e=>void 0===e,Ie=(e,t,r)=>{if(!t||!Ee(e))return r;const n=Pe(t.split(/[,[\].]+?/)).reduce(((e,t)=>Le(e)?e:e[t]),e);return Me(n)||n===e?Me(e[t])?r:e[t]:n};const qe="blur",Be="focusout",Re="change",ze="onBlur",Ue="onChange",He="onSubmit",Ge="onTouched",Ye="all",We="max",Qe="min",Ke="maxLength",Je="minLength",Ze="pattern",Xe="required",et="validate",tt=t.createContext(null),rt=()=>t.useContext(tt);var nt=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t._proxyFormState[a]!==Ye&&(t._proxyFormState[a]=!n||Ye),r&&(r[a]=!0),e[a]}});return a},at=e=>Ee(e)&&!Object.keys(e).length,st=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return at(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!n||Ye)))},ot=e=>Array.isArray(e)?e:[e],it=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ot(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function lt(e){const r=t.useRef(e);r.current=e,t.useEffect((()=>{const t=!e.disabled&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}var ut=e=>"string"==typeof e,ct=(e,t,r,n,a)=>ut(e)?(n&&t.watch.add(e),Ie(r,e,a)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),Ie(r,e)))):(n&&(t.watchAll=!0),r),dt="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function ft(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(dt&&(e instanceof Blob||e instanceof FileList)||!r&&!Ee(e))return e;if(t=r?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return Ee(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)t[r]=ft(e[r]);else t=e}return t}function mt(e){const r=rt(),{name:n,control:a=r.control,shouldUnregister:s}=e,o=$e(a._names.array,n),i=function(e){const r=rt(),{control:n=r.control,name:a,defaultValue:s,disabled:o,exact:i}=e||{},l=t.useRef(a);l.current=a,lt({disabled:o,subject:n._subjects.watch,next:e=>{it(l.current,e.name,i)&&c(ft(ct(l.current,n._names,e.values||n._formValues,!1,s)))}});const[u,c]=t.useState(n._getWatch(a,s));return t.useEffect((()=>n._removeUnmounted())),u}({control:a,name:n,defaultValue:Ie(a._formValues,n,Ie(a._defaultValues,n,e.defaultValue)),exact:!0}),l=function(e){const r=rt(),{control:n=r.control,disabled:a,name:s,exact:o}=e||{},[i,l]=t.useState(n._formState),u=t.useRef(!0),c=t.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=t.useRef(s);return d.current=s,lt({disabled:a,next:e=>u.current&&it(d.current,e.name,o)&&st(e,c.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),t.useEffect((()=>{u.current=!0;const e=n._proxyFormState.isDirty&&n._getDirty();return e!==n._formState.isDirty&&n._subjects.state.next({isDirty:e}),c.current.isValid&&n._updateValid(!0),()=>{u.current=!1}}),[n]),nt(i,n,c.current,!1)}({control:a,name:n}),u=t.useRef(a.register(n,{...e.rules,value:i}));return t.useEffect((()=>{const e=(e,t)=>{const r=Ie(a._fields,e);r&&(r._f.mount=t)};return e(n,!0),()=>{const t=a._options.shouldUnregister||s;(o?t&&!a._stateFlags.action:t)?a.unregister(n):e(n,!1)}}),[n,a,o,s]),{field:{name:n,value:i,onChange:t.useCallback((e=>u.current.onChange({target:{value:Fe(e),name:n},type:Re})),[n]),onBlur:t.useCallback((()=>u.current.onBlur({target:{value:Ie(a._formValues,n),name:n},type:qe})),[n,a]),ref:e=>{const t=Ie(a._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ie(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ie(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ie(l.touchedFields,n)},error:{enumerable:!0,get:()=>Ie(l.errors,n)}})}}const ht=e=>e.render(mt(e));var yt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},pt=e=>/^\w*$/.test(e),vt=e=>Pe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function gt(e,t,r){let n=-1;const a=pt(t)?[t]:vt(t),s=a.length,o=s-1;for(;++n<s;){const t=a[n];let s=r;if(n!==o){const r=e[t];s=Ee(r)||Array.isArray(r)?r:isNaN(+a[n+1])?{}:[]}e[t]=s,e=e[t]}return e}const xt=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=Ie(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else Ee(n)&&xt(n,t)}}};var bt=e=>({isOnSubmit:!e||e===He,isOnBlur:e===ze,isOnChange:e===Ue,isOnAll:e===Ye,isOnTouch:e===Ge}),wt=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),jt=(e,t,r)=>{const n=Pe(Ie(e,r));return gt(n,"root",t[r]),gt(e,r,n),e},kt=e=>"boolean"==typeof e,St=e=>"file"===e.type,Ct=e=>"function"==typeof e,Nt=e=>{if(!dt)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_t=e=>ut(e)||t.isValidElement(e),Ot=e=>"radio"===e.type,Tt=e=>e instanceof RegExp;const Dt={value:!1,isValid:!1},At={value:!0,isValid:!0};var Lt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Me(e[0].attributes.value)?Me(e[0].value)||""===e[0].value?At:{value:e[0].value,isValid:!0}:At:Dt}return Dt};const Vt={isValid:!1,value:null};var Et=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Vt):Vt;function Ft(e,t,r="validate"){if(_t(e)||Array.isArray(e)&&e.every(_t)||kt(e)&&!e)return{type:r,message:_t(e)?e:"",ref:t}}var $t=e=>Ee(e)&&!Tt(e)?e:{value:e,message:""},Pt=async(e,t,r,n,a)=>{const{ref:s,refs:o,required:i,maxLength:l,minLength:u,min:c,max:d,pattern:f,validate:m,name:h,valueAsNumber:y,mount:p,disabled:v}=e._f,g=Ie(t,h);if(!p||v)return{};const x=o?o[0]:s,b=e=>{n&&x.reportValidity&&(x.setCustomValidity(kt(e)?"":e||""),x.reportValidity())},w={},j=Ot(s),k=De(s),S=j||k,C=(y||St(s))&&Me(s.value)&&Me(g)||Nt(s)&&""===s.value||""===g||Array.isArray(g)&&!g.length,N=yt.bind(null,h,r,w),_=(e,t,r,n=Ke,a=Je)=>{const o=e?t:r;w[h]={type:e?n:a,message:o,ref:s,...N(e?n:a,o)}};if(a?!Array.isArray(g)||!g.length:i&&(!S&&(C||Le(g))||kt(g)&&!g||k&&!Lt(o).isValid||j&&!Et(o).isValid)){const{value:e,message:t}=_t(i)?{value:!!i,message:i}:$t(i);if(e&&(w[h]={type:Xe,message:t,ref:x,...N(Xe,t)},!r))return b(t),w}if(!(C||Le(c)&&Le(d))){let e,t;const n=$t(d),a=$t(c);if(Le(g)||isNaN(g)){const r=s.valueAsDate||new Date(g),o=e=>new Date((new Date).toDateString()+" "+e),i="time"==s.type,l="week"==s.type;ut(n.value)&&g&&(e=i?o(g)>o(n.value):l?g>n.value:r>new Date(n.value)),ut(a.value)&&g&&(t=i?o(g)<o(a.value):l?g<a.value:r<new Date(a.value))}else{const r=s.valueAsNumber||(g?+g:g);Le(n.value)||(e=r>n.value),Le(a.value)||(t=r<a.value)}if((e||t)&&(_(!!e,n.message,a.message,We,Qe),!r))return b(w[h].message),w}if((l||u)&&!C&&(ut(g)||a&&Array.isArray(g))){const e=$t(l),t=$t(u),n=!Le(e.value)&&g.length>e.value,a=!Le(t.value)&&g.length<t.value;if((n||a)&&(_(n,e.message,t.message),!r))return b(w[h].message),w}if(f&&!C&&ut(g)){const{value:e,message:t}=$t(f);if(Tt(e)&&!g.match(e)&&(w[h]={type:Ze,message:t,ref:s,...N(Ze,t)},!r))return b(t),w}if(m)if(Ct(m)){const e=Ft(await m(g,t),x);if(e&&(w[h]={...e,...N(et,e.message)},!r))return b(e.message),w}else if(Ee(m)){let e={};for(const n in m){if(!at(e)&&!r)break;const a=Ft(await m[n](g,t),x,n);a&&(e={...a,...N(n,a.message)},b(a.message),r&&(w[h]=e))}if(!at(e)&&(w[h]={ref:x,...e},!r))return w}return b(!0),w};function Mt(e,t){const r=Array.isArray(t)?t:pt(t)?[t]:vt(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Me(e)?n++:e[t[n++]];return e}(e,r),a=r.length-1,s=r[a];return n&&delete n[s],0!==a&&(Ee(n)&&at(n)||Array.isArray(n)&&function(e){for(const t in e)if(!Me(e[t]))return!1;return!0}(n))&&Mt(e,r.slice(0,-1)),e}function It(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var qt=e=>Le(e)||!Ve(e);function Bt(e,t){if(qt(e)||qt(t))return e===t;if(Ae(e)&&Ae(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const r=e[a];if(!n.includes(a))return!1;if("ref"!==a){const e=t[a];if(Ae(r)&&Ae(e)||Ee(r)&&Ee(e)||Array.isArray(r)&&Array.isArray(e)?!Bt(r,e):r!==e)return!1}}return!0}var Rt=e=>"select-multiple"===e.type,zt=e=>Nt(e)&&e.isConnected,Ut=e=>{for(const t in e)if(Ct(e[t]))return!0;return!1};function Ht(e,t={}){const r=Array.isArray(e);if(Ee(e)||r)for(const r in e)Array.isArray(e[r])||Ee(e[r])&&!Ut(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ht(e[r],t[r])):Le(e[r])||(t[r]=!0);return t}function Gt(e,t,r){const n=Array.isArray(e);if(Ee(e)||n)for(const n in e)Array.isArray(e[n])||Ee(e[n])&&!Ut(e[n])?Me(t)||qt(r[n])?r[n]=Array.isArray(e[n])?Ht(e[n],[]):{...Ht(e[n])}:Gt(e[n],Le(t)?{}:t[n],r[n]):Bt(e[n],t[n])?delete r[n]:r[n]=!0;return r}var Yt=(e,t)=>Gt(e,t,Ht(t)),Wt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Me(e)?e:t?""===e?NaN:e?+e:e:r&&ut(e)?new Date(e):n?n(e):e;function Qt(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return St(t)?t.files:Ot(t)?Et(e.refs).value:Rt(t)?[...t.selectedOptions].map((({value:e})=>e)):De(t)?Lt(e.refs).value:Wt(Me(t.value)?e.ref.value:t.value,e)}var Kt=e=>Me(e)?e:Tt(e)?e.source:Ee(e)?Tt(e.value)?e.value.source:e.value:e;function Jt(e,t,r){const n=Ie(e,r);if(n||pt(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const n=a.join("."),s=Ie(t,n),o=Ie(e,n);if(s&&!Array.isArray(s)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};a.pop()}return{name:r}}const Zt={mode:He,reValidateMode:Ue,shouldFocusError:!0};function Xt(e={},t){let r={...Zt,...e};const n=e.resetOptions&&e.resetOptions.keepDirtyValues;let a,s={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},o={},i=(Ee(r.defaultValues)||Ee(r.values))&&ft(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:ft(i),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={watch:It(),array:It(),state:It()},h=bt(r.mode),y=bt(r.reValidateMode),p=r.criteriaMode===Ye,v=async e=>{if(f.isValid||e){const e=r.resolver?at((await j()).errors):await k(o,!0);e!==s.isValid&&m.state.next({isValid:e})}},g=e=>f.isValidating&&m.state.next({isValidating:e}),x=(e,t,r,n)=>{const a=Ie(o,e);if(a){const s=Ie(l,e,Me(r)?Ie(i,e):r);Me(s)||n&&n.defaultChecked||t?gt(l,e,t?s:Qt(a._f)):N(e,s),u.mount&&v()}},b=(e,t,r,n,a)=>{let o=!1,l=!1;const u={name:e};if(!r||n){f.isDirty&&(l=s.isDirty,s.isDirty=u.isDirty=S(),o=l!==u.isDirty);const r=Bt(Ie(i,e),t);l=Ie(s.dirtyFields,e),r?Mt(s.dirtyFields,e):gt(s.dirtyFields,e,!0),u.dirtyFields=s.dirtyFields,o=o||f.dirtyFields&&l!==!r}if(r){const t=Ie(s.touchedFields,e);t||(gt(s.touchedFields,e,r),u.touchedFields=s.touchedFields,o=o||f.touchedFields&&t!==r)}return o&&a&&m.state.next(u),o?u:{}},w=(t,r,n,o)=>{const i=Ie(s.errors,t),l=f.isValid&&kt(r)&&s.isValid!==r;var u;if(e.delayError&&n?(u=()=>((e,t)=>{gt(s.errors,e,t),m.state.next({errors:s.errors})})(t,n),a=e=>{clearTimeout(d),d=window.setTimeout(u,e)},a(e.delayError)):(clearTimeout(d),a=null,n?gt(s.errors,t,n):Mt(s.errors,t)),(n?!Bt(i,n):i)||!at(o)||l){const e={...o,...l&&kt(r)?{isValid:r}:{},errors:s.errors,name:t};s={...s,...e},m.state.next(e)}g(!1)},j=async e=>await r.resolver(l,r.context,((e,t,r,n)=>{const a={};for(const r of e){const e=Ie(t,r);e&&gt(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}})(e||c.mount,o,r.criteriaMode,r.shouldUseNativeValidation)),k=async(e,t,n={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...a}=o;if(e){const a=c.array.has(e.name),i=await Pt(o,l,p,r.shouldUseNativeValidation,a);if(i[e.name]&&(n.valid=!1,t))break;!t&&(Ie(i,e.name)?a?jt(s.errors,i,e.name):gt(s.errors,e.name,i[e.name]):Mt(s.errors,e.name))}a&&await k(a,t,n)}}return n.valid},S=(e,t)=>(e&&t&&gt(l,e,t),!Bt(A(),i)),C=(e,t,r)=>ct(e,c,{...u.mount?l:Me(t)?i:ut(e)?{[e]:t}:t},r,t),N=(e,t,r={})=>{const n=Ie(o,e);let a=t;if(n){const r=n._f;r&&(!r.disabled&&gt(l,e,Wt(t,r)),a=Nt(r.ref)&&Le(t)?"":t,Rt(r.ref)?[...r.ref.options].forEach((e=>e.selected=a.includes(e.value))):r.refs?De(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(a)?!!a.find((t=>t===e.value)):a===e.value))):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach((e=>e.checked=e.value===a)):St(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||m.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&b(e,a,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&D(e)},_=(e,t,r)=>{for(const n in t){const a=t[n],s=`${e}.${n}`,i=Ie(o,s);!c.array.has(e)&&qt(a)&&(!i||i._f)||Ae(a)?N(s,a,r):_(s,a,r)}},O=(e,r,n={})=>{const a=Ie(o,e),s=c.array.has(e),d=ft(r);gt(l,e,d),s?(m.array.next({name:e,values:l}),(f.isDirty||f.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:Yt(i,l),isDirty:S(e,d)})):!a||a._f||Le(d)?N(e,d,n):_(e,d,n),wt(e,c)&&m.state.next({}),m.watch.next({name:e}),!u.mount&&t()},T=async e=>{const t=e.target;let n=t.name;const i=Ie(o,n);if(i){let d,x;const S=t.type?Qt(i._f):Fe(e),C=e.type===qe||e.type===Be,N=!((u=i._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||r.resolver||Ie(s.errors,n)||i._f.deps)||((e,t,r,n,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:!(r?n.isOnChange:a.isOnChange)||e))(C,Ie(s.touchedFields,n),s.isSubmitted,y,h),_=wt(n,c,C);gt(l,n,S),C?(i._f.onBlur&&i._f.onBlur(e),a&&a(0)):i._f.onChange&&i._f.onChange(e);const O=b(n,S,C,!1),T=!at(O)||_;if(!C&&m.watch.next({name:n,type:e.type}),N)return f.isValid&&v(),T&&m.state.next({name:n,..._?{}:O});if(!C&&_&&m.state.next({}),g(!0),r.resolver){const{errors:e}=await j([n]),t=Jt(s.errors,o,n),r=Jt(e,o,t.name||n);d=r.error,n=r.name,x=at(e)}else d=(await Pt(i,l,p,r.shouldUseNativeValidation))[n],d?x=!1:f.isValid&&(x=await k(o,!0));i._f.deps&&D(i._f.deps),w(n,x,d,O)}var u},D=async(e,t={})=>{let n,a;const i=ot(e);if(g(!0),r.resolver){const t=await(async e=>{const{errors:t}=await j();if(e)for(const r of e){const e=Ie(t,r);e?gt(s.errors,r,e):Mt(s.errors,r)}else s.errors=t;return t})(Me(e)?e:i);n=at(t),a=e?!i.some((e=>Ie(t,e))):n}else e?(a=(await Promise.all(i.map((async e=>{const t=Ie(o,e);return await k(t&&t._f?{[e]:t}:t)})))).every(Boolean),(a||s.isValid)&&v()):a=n=await k(o);return m.state.next({...!ut(e)||f.isValid&&n!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!a&&xt(o,(e=>e&&Ie(s.errors,e)),e?i:c.mount),a},A=e=>{const t={...i,...u.mount?l:{}};return Me(e)?t:ut(e)?Ie(t,e):e.map((e=>Ie(t,e)))},L=(e,t)=>({invalid:!!Ie((t||s).errors,e),isDirty:!!Ie((t||s).dirtyFields,e),isTouched:!!Ie((t||s).touchedFields,e),error:Ie((t||s).errors,e)}),V=(e,t={})=>{for(const n of e?ot(e):c.mount)c.mount.delete(n),c.array.delete(n),Ie(o,n)&&(t.keepValue||(Mt(o,n),Mt(l,n)),!t.keepError&&Mt(s.errors,n),!t.keepDirty&&Mt(s.dirtyFields,n),!t.keepTouched&&Mt(s.touchedFields,n),!r.shouldUnregister&&!t.keepDefaultValue&&Mt(i,n));m.watch.next({}),m.state.next({...s,...t.keepDirty?{isDirty:S()}:{}}),!t.keepIsValid&&v()},E=(e,t={})=>{let n=Ie(o,e);const a=kt(t.disabled);return gt(o,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),n?a&&gt(l,e,t.disabled?void 0:Ie(l,e,Qt(n._f))):x(e,!0,t.value),{...a?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:Kt(t.min),max:Kt(t.max),minLength:Kt(t.minLength),maxLength:Kt(t.maxLength),pattern:Kt(t.pattern)}:{},name:e,onChange:T,onBlur:T,ref:a=>{if(a){E(e,t),n=Ie(o,e);const r=Me(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,s=(e=>Ot(e)||De(e))(r),l=n._f.refs||[];if(s?l.find((e=>e===r)):r===n._f.ref)return;gt(o,e,{_f:{...n._f,...s?{refs:[...l.filter(zt),r,...Array.isArray(Ie(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),x(e,!1,void 0,r)}else n=Ie(o,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!$e(c.array,e)||!u.action)&&c.unMount.add(e)}}},F=()=>r.shouldFocusError&&xt(o,(e=>e&&Ie(s.errors,e)),c.mount),$=(r,a={})=>{const d=r||i,h=ft(d),y=r&&!at(r)?h:i;if(a.keepDefaultValues||(i=d),!a.keepValues){if(a.keepDirtyValues||n)for(const e of c.mount)Ie(s.dirtyFields,e)?gt(y,e,Ie(l,e)):O(e,Ie(y,e));else{if(dt&&Me(r))for(const e of c.mount){const t=Ie(o,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Nt(e)){const t=e.closest("form");if(t){t.reset();break}}}}o={}}l=e.shouldUnregister?a.keepDefaultValues?ft(i):{}:h,m.array.next({values:y}),m.watch.next({values:y})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!f.isValid||!!a.keepIsValid,u.watch=!!e.shouldUnregister,m.state.next({submitCount:a.keepSubmitCount?s.submitCount:0,isDirty:a.keepDirty||a.keepDirtyValues?s.isDirty:!(!a.keepDefaultValues||Bt(r,i)),isSubmitted:!!a.keepIsSubmitted&&s.isSubmitted,dirtyFields:a.keepDirty||a.keepDirtyValues?s.dirtyFields:a.keepDefaultValues&&r?Yt(i,r):{},touchedFields:a.keepTouched?s.touchedFields:{},errors:a.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},P=(e,t)=>$(Ct(e)?e(l):e,t);return Ct(r.defaultValues)&&r.defaultValues().then((e=>{P(e,r.resetOptions),m.state.next({isLoading:!1})})),{control:{register:E,unregister:V,getFieldState:L,_executeSchema:j,_focusError:F,_getWatch:C,_getDirty:S,_updateValid:v,_removeUnmounted:()=>{for(const e of c.unMount){const t=Ie(o,e);t&&(t._f.refs?t._f.refs.every((e=>!zt(e))):!zt(t._f.ref))&&V(e)}c.unMount=new Set},_updateFieldArray:(e,t=[],r,n,a=!0,c=!0)=>{if(n&&r){if(u.action=!0,c&&Array.isArray(Ie(o,e))){const t=r(Ie(o,e),n.argA,n.argB);a&&gt(o,e,t)}if(c&&Array.isArray(Ie(s.errors,e))){const t=r(Ie(s.errors,e),n.argA,n.argB);a&&gt(s.errors,e,t),((e,t)=>{!Pe(Ie(e,t)).length&&Mt(e,t)})(s.errors,e)}if(f.touchedFields&&c&&Array.isArray(Ie(s.touchedFields,e))){const t=r(Ie(s.touchedFields,e),n.argA,n.argB);a&&gt(s.touchedFields,e,t)}f.dirtyFields&&(s.dirtyFields=Yt(i,l)),m.state.next({name:e,isDirty:S(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else gt(l,e,t)},_getFieldArray:t=>Pe(Ie(u.mount?l:i,t,e.shouldUnregister?Ie(i,t,[]):[])),_reset:$,_updateFormState:e=>{s={...s,...e}},_subjects:m,_proxyFormState:f,get _fields(){return o},get _formValues(){return l},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return i},get _names(){return c},set _names(e){c=e},get _formState(){return s},set _formState(e){s=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:D,register:E,handleSubmit:(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let a=ft(l);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await j();s.errors=e,a=t}else await k(o);Mt(s.errors,"root"),at(s.errors)?(m.state.next({errors:{}}),await e(a,n)):(t&&await t({...s.errors},n),F()),m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:at(s.errors),submitCount:s.submitCount+1,errors:s.errors})},watch:(e,t)=>Ct(e)?m.watch.subscribe({next:r=>e(C(void 0,t),r)}):C(e,t,!0),setValue:O,getValues:A,reset:P,resetField:(e,t={})=>{Ie(o,e)&&(Me(t.defaultValue)?O(e,Ie(i,e)):(O(e,t.defaultValue),gt(i,e,t.defaultValue)),t.keepTouched||Mt(s.touchedFields,e),t.keepDirty||(Mt(s.dirtyFields,e),s.isDirty=t.defaultValue?S(e,Ie(i,e)):S()),t.keepError||(Mt(s.errors,e),f.isValid&&v()),m.state.next({...s}))},clearErrors:e=>{e&&ot(e).forEach((e=>Mt(s.errors,e))),m.state.next({errors:e?s.errors:{}})},unregister:V,setError:(e,t,r)=>{const n=(Ie(o,e,{_f:{}})._f||{}).ref;gt(s.errors,e,{...t,ref:n}),m.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},setFocus:(e,t={})=>{const r=Ie(o,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:L}}var er="vanguard.checkout.address.cta.change",tr="vanguard.checkout.address.cta.add",rr="vanguard.checkout.address.formTitle",nr="vanguard.checkout.address.name",ar="vanguard.checkout.address.line1",sr="vanguard.checkout.address.line2",or="vanguard.checkout.address.zipcode",ir="vanguard.checkout.address.cityTown",lr="vanguard.checkout.address.country",ur="vanguard.cart.overlay.delete",cr="vanguard.common.nameTitle",dr="vanguard.common.name.optionalNames",fr="vanguard.confirmationDialog.message",mr="vanguard.checkout.address.cancel",hr="vanguard.checkout.address.confirm",yr="vanguard.common.name.person",pr="vanguard.common.name.company",vr="vanguard.common.address.region",gr="vanguard.common.back",xr="vanguard.common.address.onetime.tooltip",br=function(e){var t=e.isRemove,r=e.onCancel,a=e.onConfirm,s=C().t;return u.jsxs("div",{className:"flex space-x-4 justify-end",children:[u.jsx(n.Button,{variant:"outlined",testid:"cancel",onClick:r,children:s(mr)}),u.jsx(n.Button,{testid:"confirm",onClick:a,children:s(t?ur:hr)})]})};function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kr=function(r){var a,s,o,i,l,c,d,f,m,h,y,p,v,g,x,b,w,j,k,S,N,_,O,T,D,A,L,V,E,F,$,P,M,I,q,B=r.hideDialog,R=r.setSessionAddresses,z=r.switchMode,U=r.onAdd,H=r.editAddress,G=r.sessionAddresses,Y=C(),W=Y.t,Q=Y.cartCode,K=function(e={}){const r=t.useRef(),[n,a]=t.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Ct(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Xt(e,(()=>a((e=>({...e}))))),formState:n});const s=r.current.control;return s._options=e,lt({subject:s._subjects.state,next:e=>{st(e,s._proxyFormState,s._updateFormState,!0)&&a({...s._formState})}}),t.useEffect((()=>{s._stateFlags.mount||(s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.useEffect((()=>{e.values&&!Bt(e.values,s._defaultValues)&&s._reset(e.values,s._options.resetOptions)}),[e.values,s]),t.useEffect((()=>{n.submitCount&&s._focusError()}),[s,n.submitCount]),r.current.formState=nt(n,s),r.current}({defaultValues:H?{titleCode:H.titleCode,companyNameLine1:H.companyNameLine1,companyNameLine2:H.companyNameLine2,companyNameLine3:H.companyNameLine3,companyNameLine4:H.companyNameLine4,country:null==(a=H.country)?void 0:a.isocode,regionCode:null==(s=H.region)?void 0:s.isocode,streetName:H.line1,houseNumber:H.line2,zipCode:H.postalCode,city:H.town}:null}),J=K.register,Z=K.control,X=K.formState,ee=K.watch,te=K.setValue,re=K.handleSubmit,ne=X.errors,ae=ee(["titleCode","country"]),se=ae[0],oe=ae[1],ie=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:Q}).data,le=e.store.api.checkout.useGetTitlesQuery({cartCode:Q}).data,ue=e.store.api.checkout.useGetRegionsQuery({countryCode:oe}).data,ce=e.store.api.checkout.useGetAddressValidationQuery({isoCode:null!=oe?oe:""}).data,de=function(e,r){var n=t.useRef();return t.useEffect((function(){var t,a,s;if("undefined"!=typeof google&&null!=(t=google)&&null!=(a=t.maps)&&null!=(s=a.places)&&s.Autocomplete&&e){var o=new google.maps.places.Autocomplete(n.current,{fields:["address_components"]});return o.setComponentRestrictions({country:e.map((function(e){return e.isocode.toString()}))}),o.addListener("place_changed",(function(){var e,t=((null==(e=o.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("house_number")&&(e.houseNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});Object.keys(t).forEach((function(e){return r(e,t[e])}))})),function(){return o.unbindAll()}}}),[e,r]),n}(ie,te),fe=Object.keys(null!=ce?ce:{}).reduce((function(e,t){return e[t].pattern&&(e[t].pattern.value=new RegExp(e[t].pattern.value)),e}),structuredClone(ce||{})),me=J("streetName",fe.streetName);return u.jsxs("div",{className:"space-y-3",children:[u.jsx(n.Button,{variant:"text",iconType:"arrowleft",onClick:function(){return z()},children:W(gr)}),u.jsxs("form",{"data-testid":"addAddress",className:"space-y-1",children:[(null==le||null==(o=le.titles)?void 0:o.length)>0&&u.jsx(ht,{control:Z,name:"titleCode",rules:fe.titleCode,render:function(e){var t,r,a,s=e.field;return u.jsx(n.Select,{label:W(cr),testid:"titleInput",options:null==le||null==(t=le.titles)?void 0:t.map((function(e){return{label:e.name,value:e.code}})),error:Boolean(null==ne?void 0:ne.titleCode),value:s.value,onChange:s.onChange,required:null==(r=fe.titleCode)||null==(a=r.required)?void 0:a.value})}}),u.jsx(n.TextInput,jr(jr({},J("companyNameLine1",fe.companyNameLine1)),{},{label:W(nr),testid:"nameInput1",autoComplete:"organization",maxlength:null==(i=fe.companyNameLine1)?void 0:i.maxLength.value,required:null==(l=fe.companyNameLine1)||null==(c=l.required)?void 0:c.value,error:Boolean(null==ne?void 0:ne.companyNameLine1),hint:null==ne||null==(d=ne.companyNameLine1)?void 0:d.message,placeholder:{"0001":W(yr),"0002":W(yr),"0003":W(pr),"0004":W(yr)}[se]})),u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(n.TextInput,jr(jr({},J("companyNameLine2",fe.companyNameLine2)),{},{testid:"nameInput2",label:W(dr),autoComplete:"organization",maxlength:null==(f=fe.companyNameLine2)?void 0:f.maxLength.value,required:null==(m=fe.companyNameLine2)||null==(h=m.required)?void 0:h.value,error:Boolean(null==ne?void 0:ne.companyNameLine2),hint:null==ne||null==(y=ne.companyNameLine2)?void 0:y.message})),u.jsx(n.TextInput,jr(jr({},J("companyNameLine3",fe.companyNameLine3)),{},{testid:"nameInput3",autoComplete:"organization",maxlength:null==(p=fe.companyNameLine3)?void 0:p.maxLength.value,required:null==(v=fe.companyNameLine3)||null==(g=v.required)?void 0:g.value,error:Boolean(null==ne?void 0:ne.companyNameLine3),hint:null==ne||null==(x=ne.companyNameLine3)?void 0:x.message})),u.jsx(n.TextInput,jr(jr({},J("companyNameLine4",fe.companyNameLine4)),{},{testid:"nameInput4",autoComplete:"organization",maxlength:null==(b=fe.companyNameLine4)?void 0:b.maxLength.value,required:null==(w=fe.companyNameLine4)||null==(j=w.required)?void 0:j.value,error:Boolean(null==ne?void 0:ne.companyNameLine4),hint:null==ne||null==(k=ne.companyNameLine4)?void 0:k.message}))]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-6/12",children:u.jsx(ht,{control:Z,name:"country",rules:fe.country,render:function(e){var t,r,a,s=e.field;return u.jsx(n.Select,{label:W(lr),testid:"countryInput",options:null==ie?void 0:ie.map((function(e){return{label:e.name,value:e.isocode}})),required:null==(t=fe.country)||null==(r=t.required)?void 0:r.value,error:Boolean(null==ne?void 0:ne.country),errorText:null==ne||null==(a=ne.country)?void 0:a.message,value:s.value,onChange:function(e){s.onChange(e),K.resetField("regionCode",{defaultValue:""})}})}})}),u.jsx("div",{className:"sm:w-6/12",children:(null==ue?void 0:ue.length)>0&&u.jsx(ht,{control:Z,name:"regionCode",rules:fe.regionCode,render:function(e){var t,r,a,s=e.field;return u.jsx(n.Select,{label:W(vr),testid:"regionInput",options:null==ue?void 0:ue.map((function(e){return{label:e.name,value:e.isocode}})),required:null==(t=fe.region)||null==(r=t.required)?void 0:r.value,error:Boolean(null==ne?void 0:ne.regionCode),errorText:null==ne||null==(a=ne.regionCode)?void 0:a.message,value:s.value,onChange:s.onChange})}})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-9/12",children:u.jsx(n.TextInput,jr(jr({},me),{},{ref:function(e){me.ref(e),de.current=e},testid:"streetNameInput",label:W(ar),autoComplete:"street-address",maxlength:null==(S=fe.streetName)?void 0:S.maxLength.value,required:null==(N=fe.streetName)||null==(_=N.required)?void 0:_.value,error:Boolean(null==ne?void 0:ne.streetName),hint:null==ne||null==(O=ne.streetName)?void 0:O.message,inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-3/12",children:u.jsx(n.TextInput,jr(jr({},J("houseNumber",fe.houseNumber)),{},{testid:"houseNumberInput",label:W(sr),error:Boolean(null==ne?void 0:ne.houseNumber),hint:null==ne||null==(T=ne.houseNumber)?void 0:T.message,maxlength:null==(D=fe.houseNumber)?void 0:D.maxLength.value,required:null==(A=fe.houseNumber)||null==(L=A.required)?void 0:L.value,autoComplete:"house-address",inputClassName:"w-full"}))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[u.jsx("div",{className:"sm:w-3/12",children:u.jsx(n.TextInput,jr(jr({},J("zipCode",fe.zipCode)),{},{testid:"zipCodeInput",label:W(or),error:Boolean(null==ne?void 0:ne.zipCode),hint:null==ne||null==(V=ne.zipCode)?void 0:V.message,maxlength:null==(E=fe.zipCode)?void 0:E.maxLength.value,required:null==(F=fe.zipCode)||null==($=F.required)?void 0:$.value,autoComplete:"postal-code",inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-9/12",children:u.jsx(n.TextInput,jr(jr({},J("city",fe.city)),{},{testid:"cityInput",label:W(ir),error:Boolean(null==ne?void 0:ne.city),hint:null==ne||null==(P=ne.city)?void 0:P.message,maxlength:null==(M=fe.city)?void 0:M.maxLength.value,required:null==(I=fe.city)||null==(q=I.required)?void 0:q.value,autoComplete:"address-level2",inputClassName:"w-full"}))})]})]}),u.jsx(br,{onCancel:z,onConfirm:function(){re((function(e){var t,r,n,a,s,o={title:null==le||null==(t=le.titles)||null==(r=t.find((function(t){return t.code===e.titleCode})))?void 0:r.name,titleCode:e.titleCode||"",companyNameLine1:e.companyNameLine1.trim()||null,companyNameLine2:(null==(n=e.companyNameLine2)?void 0:n.trim())||null,companyNameLine3:(null==(a=e.companyNameLine3)?void 0:a.trim())||null,companyNameLine4:(null==(s=e.companyNameLine4)?void 0:s.trim())||null,country:ie.find((function(t){return t.isocode===e.country})),region:ue.find((function(t){return t.isocode===e.regionCode}))||null,line1:e.streetName,line2:e.houseNumber,postalCode:e.zipCode,town:e.city};H?(G.splice(G.indexOf(H),1,jr(jr({},o),{},{id:H.id})),R([].concat(G))):R([].concat(G,[jr(jr({},o),{},{id:"session-"+Date.now()})])),U(o),B()}))()}})]})},Sr=function(e){var t=e.value,r=e.highlight,a=t.companyNameLine1,s=t.companyNameLine2,o=t.companyNameLine3,i=t.companyNameLine4,l=t.line1,c=t.line2,d=t.postalCode,f=t.town,m=t.country,h=t.title,y=t.region;return u.jsxs("div",{"data-testid":"addressPreview",className:"flex-grow",children:[h&&u.jsx(n.Text,{testid:"title",highlight:r,children:h}),a&&u.jsx(n.Text,{testid:"companyNameLine1",highlight:r,children:a}),s&&u.jsx(n.Text,{testid:"companyNameLine2",highlight:r,children:s}),o&&u.jsx(n.Text,{testid:"companyNameLine3",highlight:r,children:o}),i&&u.jsx(n.Text,{testid:"companyNameLine4",highlight:r,children:i}),u.jsxs("div",{className:"flex space-x-1",children:[l&&u.jsx(n.Text,{testid:"street",highlight:r,children:l}),c&&u.jsx(n.Text,{testid:"houseNumber",highlight:r,children:c})]}),u.jsxs("div",{className:"flex space-x-1",children:[d&&u.jsx(n.Text,{testid:"postalCode",highlight:r,children:d}),f&&u.jsx(n.Text,{testid:"town",highlight:r,children:f})]}),y&&u.jsx(n.Text,{testid:"region",highlight:r,children:y.name}),m&&u.jsx(n.Text,{testid:"country",highlight:r,children:m.name})]})},Cr=function(e){var r=e.value,s=e.allAddresses,o=e.hideDialog,i=e.switchMode,l=e.onAdd,c=e.onChange,d=C().t,f=t.useState(null==r?void 0:r.id),m=f[0],h=f[1],y=t.useState(""),p=y[0],v=y[1],g=s.filter((function(e){var t;return[e.title,e.companyNameLine1,e.companyNameLine2,e.companyNameLine3,e.companyNameLine4,e.line1,e.line2,e.town,e.country.name,e.postalCode,null==(t=e.region)?void 0:t.name].join(" ").toLowerCase().includes(p.toLowerCase())}));return u.jsxs("div",{"data-testid":"searchAddress",className:"mt-6 sm:mt-0 space-y-3",children:[u.jsx(n.TextInput,{testid:"searchInput",inputClassName:"w-full",value:p,onChange:function(e){return v(e.target.value)},icon:{type:"search"}}),g.length>0&&u.jsx("div",{className:"p-2 space-y-4 max-h-96 overflow-y-auto","data-testid":"list",children:g.map((function(e,t){var r;return u.jsxs("div",{className:a("flex items-start p-2 text-left w-3/4 shadow-xl border-2 hover:bg-primarypalette-200 cursor-pointer flex-shrink-0 space-x-3",{"border-primary":(null==e?void 0:e.id)===m}),onClick:function(){return h(null==e?void 0:e.id)},"data-testid":"item",children:[u.jsx(n.Icon,{type:"location",size:"md",color:"tertiary",className:"self-center ml-1"}),u.jsx(Sr,{value:e,highlight:p}),(null==(r=e.id)?void 0:r.includes("session"))&&u.jsxs("div",{className:"space-x-2 flex px-1",children:[u.jsx(n.Tooltip,{position:"bottom",render:d(xr),children:u.jsx(n.Icon,{type:"clockLeft",color:"tertiary",className:"py-1"})}),u.jsx(n.Button,{iconType:"edit",variant:"text",onClick:function(){i(e)}})]})]},t)}))}),l&&u.jsx(n.Button,{variant:"text",iconType:"plus",onClick:function(){return i()},children:d(tr)}),u.jsx(br,{onCancel:o,onConfirm:function(){var e,t=s.find((function(e){return e.id===m}));null!=t&&null!=(e=t.id)&&e.includes("session")?(t.id=null,l(t)):c(t),o()}})]})},Nr=function(e){var r=e.value,a=e.savedAddresses,s=e.hideDialog,o=e.onChange,i=e.onAdd,l=C().t,c=function(e,r){var n=t.useState((function(){try{var t=sessionStorage.getItem(e);return JSON.parse(t)||r}catch(e){return r}})),a=n[0],s=n[1];return[a,t.useCallback((function(t){try{s(t),sessionStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}),[e])]}("SessionAddresses",[]),d=c[0],f=c[1],m=i?[].concat(a,d):a,h=t.useState(0===(null==m?void 0:m.length)),y=h[0],p=h[1],v=t.useState(null),g=v[0],x=v[1],b=function(e){p((function(e){return!e})),x(e)};return u.jsxs(n.Dialog,{title:l(rr),onClose:s,children:[!y&&u.jsx(Cr,{value:r,allAddresses:m,hideDialog:s,switchMode:b,onAdd:i,onChange:o,setEditAddress:x}),y&&u.jsx(kr,{hideDialog:s,setSessionAddresses:f,switchMode:b,onAdd:i,editAddress:g,sessionAddresses:d})]})},_r=function(e){var t=e.value,r=e.hideDialog,a=e.onRemove,s=C().t;return u.jsxs(n.Dialog,{title:s(ur),testid:"deleteAddressDialog",onClose:r,children:[u.jsx(n.Text,{children:s(fr)}),u.jsx(br,{isRemove:!0,onCancel:r,onConfirm:function(){a(null==t?void 0:t.id),r()}})]})},Or=function(e){var r=e.label,a=e.value,s=e.savedAddresses,o=void 0===s?[]:s,i=e.onChange,l=e.onAdd,c=e.onRemove,d=C().t,f=t.useState(!1),m=f[0],h=f[1],y=t.useState(!1),p=y[0],v=y[1],g=Boolean(l)||Boolean(i)&&o.length>1;return u.jsxs("div",{"data-testid":"address",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:r}),a&&u.jsx(Sr,{value:a}),u.jsxs("div",{className:"flex space-x-2 mt-1 divide-x-2",children:[g&&u.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return h(!0)},children:d(a?er:tr)}),c&&a&&u.jsx("div",{className:g&&"pl-2",children:u.jsx(n.Button,{testid:"remove",variant:"text",onClick:function(){return v(!0)},children:d(ur)})})]}),m&&u.jsx(Nr,{value:a,savedAddresses:o,hideDialog:function(){return h(!1)},onChange:i,onAdd:l}),p&&u.jsx(_r,{value:a,hideDialog:function(){return v(!1)},onRemove:c})]})},Tr=function(){var e=C().t,t=pe(),r=t.setAddress,a=t.address,s=function(e){r(e)};return u.jsx(n.Tile,{header:R,className:"my-4",isAccordionType:!0,testid:"propertyDetailsTile",children:u.jsxs("div",{className:"flex flex-row space-between",children:[u.jsxs("div",{className:"pr-8 space-y-2","data-testid":"description",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:e(z)}),u.jsx(n.TextInput,{testid:z,size:40,multiline:!0,rows:3})]}),u.jsx("div",{className:"space-y-2","data-testid":"property",children:u.jsx(Or,{label:e(re),value:a,onChange:s,onAdd:s})})]})})},Dr=function(){var r=C().t,a=L,s=V,o=E,i=$,l=P,c=M,d=I,f=function(){var r=C(),n=r.t,a=r.headPositionCode,s=t.useState(null),o=s[0],i=s[1],l=t.useState(null),u=l[0],c=l[1],d=t.useState(null),f=d[0],m=d[1],h=e.store.api.keysystem.useGetStandardQuery({headPositionCode:a}).data,y=t.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:n(F+"."+e.key),color:"default"}})):[]}),[n]),p=t.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:e.value,color:"default"}})):[]}),[]),v=t.useCallback((function(e){return e?e.map((function(e){return{value:e.isocode,label:n(q+"."+e.isocode.substring(0,2).toUpperCase()),color:"default"}})):[]}),[n]);return t.useMemo((function(){return{categories:y(null==h?void 0:h.categories),technologies:p(null==h?void 0:h.technologies),languages:v(null==h?void 0:h.languages),selectedCategory:o,selectedTechnology:u,selectedLanguage:f,setSelectedCategory:i,setSelectedTechnology:c,setSelectedLanguage:m}}),[y,null==h?void 0:h.categories,null==h?void 0:h.technologies,null==h?void 0:h.languages,p,v,o,u,f])}(),m=f.categories,h=f.technologies,y=f.languages,p=f.selectedCategory,v=f.selectedTechnology,g=f.selectedLanguage,x=f.setSelectedCategory,b=f.setSelectedTechnology,w=f.setSelectedLanguage;return u.jsx(n.Tile,{header:a,className:"mt-4",isAccordionType:!0,testid:"standardTile",children:u.jsxs("div",{className:"flex flex-row space-between",children:[u.jsx(n.Select,{className:"p-4",label:r(s),placeholder:r(o),testid:"categorySelect",options:m,value:p,onChange:function(e){return x(e.target.value)}}),u.jsx(n.Select,{className:"p-4",label:r(i),placeholder:r(l),testid:"technologySelect",options:h,value:v,onChange:function(e){return b(e.target.value)}}),u.jsx(n.Select,{className:"p-4",label:r(c),placeholder:r(d),testid:"languageSelect",options:y,value:g,onChange:function(e){return w(e.target.value)}})]})})},Ar=function(){var e=pe().pageName;return u.jsxs("div",{className:"flex flex-col",children:["headerData"===e&&u.jsxs(u.Fragment,{children:[u.jsx(Dr,{}),u.jsx(je,{}),u.jsx(Tr,{})]}),"keyPlan"===e&&u.jsx(u.Fragment,{children:u.jsx(Te,{})})]})};!function(t,n){var a='[data-react-app="'+n+'"]:not([data-rendered])',s=document.querySelector(a);if(!s)throw new Error(a+" is missing");var o=document.createElement("div");s.appendChild(o),s.setAttribute("data-rendered","true"),r.render(function(t,r){return u.jsx(e.StoreProvider,{children:u.jsx(m,{appId:r,children:u.jsx(y,{children:u.jsx(t,{})})})})}(t,n),o)}((function(){return u.jsx(ve,{children:u.jsxs("div",{"data-testid":"newKeySystem",children:[u.jsx(be,{}),u.jsx(Ar,{}),u.jsx(ge,{})]})})}),"new-key-system")}));
