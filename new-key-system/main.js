!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("react"),require("@vanhyb/backbone"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames"),require("crypto")):"function"==typeof define&&define.amd?define(["react","@vanhyb/backbone","react-dom","@dormakaba/vanguard","classnames","crypto"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).dormakaba.vendorReact["vendor/react"],e.backbone,e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,a){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),i=s(a),u=e.createContext(null),l=function(t){var r=t.appId,n=t.children,a=t.defaultValue,s=void 0===a?{}:a,i=e.useMemo((function(){if(!r)return s;var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");return null!=n&&n.innerHTML?JSON.parse(n.innerHTML):s}),[r,s]);return o.default.createElement(u.Provider,{value:i},n)},c=e.createContext(void 0),d=function(t){var r=t.appId,n=t.children,a=e.useMemo((function(){return{appId:r}}),[r]);return o.default.createElement(c.Provider,{value:a},n)},f=function(){return e.useContext(u)},h=function(){var r=function(t){var r=e.useContext(c);if(!r)throw new Error(t+" could not be used outside the Backbone context. Please wrap you component with BackboneProvider.");return r}("useApplicationConfig").appId,n=e.useState({}),a=n[0],s=n[1];return e.useEffect((function(){if(r){var e=t.ApplicationConfigs.subscribe((function(e){return s(e[r]||{})}));return function(){return e.unsubscribe()}}}),[r,s]),a};function m(e,t,r,n,a,s,o){try{var i=e[s](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){m(s,n,a,o,i,"next",e)}function i(e){m(s,n,a,o,i,"throw",e)}o(void 0)}))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var p={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof p?t:p,s=Object.create(a.prototype),o=new A(n||[]);return s._invoke=function(e,t,r){var n=d;return function(a,s){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw s;return O()}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var i=S(o,r);if(i){if(i===y)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?m:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=m,r.method="throw",r.arg=u.arg)}}}(e,r,o),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",y={};function p(){}function v(){}function g(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(N([])));k&&k!==r&&n.call(k,s)&&(b=k);var E=g.prototype=p.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,s,o,i){var u=c(e[a],e,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,i)}),(function(e){r("throw",e,o,i)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,i)}))}i(u.arg)}var a;this._invoke=function(e,n){function s(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(s,s):s()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var a=c(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var s=a.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=g,u(E,"constructor",g),u(g,"constructor",v),v.displayName=u(g,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(C.prototype),u(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,a,s){void 0===s&&(s=Promise);var o=new C(l(t,r,n,a),s);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(E),u(E,i,"Generator"),u(E,s,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(p);var v=p.exports;function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}var w=function(){var e=this;this.cache={},this.cacheClearListener=[],this.lastCacheClear=new Date,this.addEntry=function(t,r){e.cache[t]=r},this.hasEntry=function(t){return Object.keys(e.cache).some((function(e){return e===t}))},this.getEntry=function(t){return e.cache[t]},this.clearCache=function(){e.cache={},e.lastCacheClear=new Date,setTimeout((function(){e.cacheClearListener.forEach((function(t){return t(e.lastCacheClear)}))}))},this.subscribeToCacheClear=function(t){e.cacheClearListener.push(t)},this.unsubscribeFromCacheClear=function(t){var r=e.cacheClearListener.indexOf(t);r>-1&&e.cacheClearListener.splice(r,1)}},k=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).supportedStatusCodes=[401],t.supportedErrorIds=["account.error.unauthorized.user"],t.getApiErrorResponse=function(e){try{return JSON.parse(e.responseText)}catch(t){console.warn(new Error("Could not parse authentication error: "+e.status+" "+JSON.stringify(e.responseText)))}},t}b(t,e);var r=t.prototype;return r.supports=function(e){return this.supportedStatusCodes.some((function(t){return e.status===t}))},r.handleRequestInternal=function(e){var t=this.getApiErrorResponse(e);if(t&&(t&&this.supportedErrorIds.some((function(e){return e===t.errorId}))))return void window.location.reload();return Promise.reject(e)},t}(function(){function e(e){var t=(void 0===e?{overlayClosable:!1}:e).overlayClosable;this.overlayClosable=void 0,this.getApiErrorResponse=function(e){try{var t=JSON.parse(e.responseText);return!t&&!t.errors&&t.errors.length<=0&&console.warn(new Error("Could not parse authentication error: "+e.status+" "+JSON.stringify(e.responseText))),t.errors[0]}catch(t){console.warn(new Error("Could not parse authentication error: "+e.status+" "+JSON.stringify(e.responseText)))}},this.overlayClosable=t}return e.prototype.handleRequest=function(e){return this.supports(e)?this.handleRequestInternal(e,this.overlayClosable):Promise.reject(e)},e}()),E=new k;function x(e){var t=function(e){var t={errors:[{errorId:String(e.status),message:e.responseText||e.statusText,stackTrace:""}]};try{var r=JSON.parse(e.responseText);return r.errors[0].message?r:t}catch(e){return t}}(e);t.errors.forEach((function(e){var t=[e.message,e.technicalMksMessage].filter(Boolean);console.log(e.errorId,t.join("<br>"))}))}var C=function e(t){var r=this,n=t.url,a=t.cacheEnabled,s=void 0!==a&&a,o=t.options;this.cache=void 0,this.url=void 0,this.cacheEnabled=void 0,this.options=void 0,this.ajax=function(e){var t=e.keys,n=e.body,a=e.headerOptions,s=e.errorInterceptors,o=e.omitErrorMessage,i=void 0!==o&&o,u=Object.assign({},r.getOptions(t),{headerOptions:a}),l=r.doRequestInternal(t,n);return l.catch((function(t){return s?s.reduce((function(t,n){return t.catch((function(t){var a,s;return null==n||null==(a=n.handleRequest(t))||null==(s=a.then((function(){return r.ajax(e)})))?void 0:s.catch((function(e){return Promise.reject(e)}))}))}),Promise.reject(t)):l})).catch((function(e){return void 0===E.handleRequest(e)?l:Promise.reject(e)})).catch((function(e){return i||x(e),u.afterError&&u.afterError(e,r),l})).then((function(e){return u.afterSuccess&&e&&u.afterSuccess(e),e}))},this.generateHash=function(e){var t=0;if(0===e.length)return t.toString();for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t.toString()},this.getCacheEntryKey=function(e){return r.generateHash(r.getHeader(e)+" : "+r.getUrl(e))},this.getUrl=function(e){return r.url(e)},this.getOptions=function(e){return r.options(e)},this.getHeader=function(t){var n=e.createHeaders(r.getOptions(t).headerOptions),a=JSON.stringify(n).split(/\{([^\ "}]+)\}/);return n?a.map((function(e,t){return t%2?n[e]:e})).join(""):a.join("")},this.onCacheClear=function(e){r.cache&&r.cache.subscribeToCacheClear(e)},this.offCacheClear=function(e){r.cache&&r.cache.unsubscribeFromCacheClear(e)},this.clearCache=function(){r.cache&&r.cache.clearCache()},this.doRequestInternal=function(e,t){var n,a=r.getCacheEntryKey(e);if(r.cacheEnabled&&null!=(n=r.cache)&&n.hasEntry(a))return r.cache.getEntry(a);var s=r.request(e,t);return r.cacheEnabled&&s.then((function(){var e;return null==(e=r.cache)?void 0:e.addEntry(a,s)})).catch((function(e){return console.warn("Omit cache entry",e)})),s},this.url=n,this.cacheEnabled=s||!1,this.options=o||function(){return{}},this.cacheEnabled&&(this.cache=new w)};function S(e){return JSON.parse(e,(function(e,t){return"string"==typeof t&&/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(\.\d{1,3})?([+-][0-2]\d:[0-5]\d|Z)$/.test(t)?new Date(t):t}))}C.createHeaders=function(e){var t=e||{};return t={defaultContentTypeJsonUTF8:void 0===t.defaultContentTypeJsonUTF8||t.defaultContentTypeJsonUTF8,customHeaders:t.customHeaders||{},authToken:t.authToken,requestedWith:t.requestedWith||"XMLHttpRequest"},Object.assign({},t.defaultContentTypeJsonUTF8&&{"Content-Type":"application/json; charset=UTF-8"},t.authToken&&{Authorization:"Bearer "+t.authToken},t.requestedWith&&{"X-Requested-With":t.requestedWith},t.customHeaders&&t.customHeaders)};var T=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).request=function(e){return new Promise((function(r,n){var a=new XMLHttpRequest;a.open("GET",t.getUrl(e),!0),a.timeout=t.getOptions(e).timeout||18e4;var s=JSON.parse(t.getHeader(e));Object.keys(s).forEach((function(e){a.setRequestHeader(e,s[e])})),a.onload=function(){var e,t=-1!==(a.getResponseHeader("Content-Type")||"").indexOf("html");if(a.status<200||a.status>=400)return n(a);if(t)return r(a.responseText);try{e=a.responseText?S(a.responseText):void 0}catch(e){return n(a)}r(e)},a.onerror=function(){n(a)},a.send();var o=t.getAjaxSignal(e);o&&(o.onabort=function(){console.log("GetEndpoint: request aborted by user "+t.getUrl(e)),a.abort(),r(void 0)})}))},t.getAjaxSignal=function(e){return e.signal},t}return b(t,e),t}(C);T.create=function(e){var t=e.url,r=e.cacheEnabled,n=e.options;return new T({url:t,cacheEnabled:r,options:n})};var _=T.create({url:function(e){return e.encodedContextPath+"/login/token"},cacheEnabled:!1}),A=function(){try{var e,t;return JSON.parse(null!=(e=null==(t=document.querySelector("#terrific-config"))?void 0:t.innerHTML)?e:"{}")}catch(e){throw new Error("Could not read terrific-config from #terrific-config "+e)}},N=function(){var e=document.getElementById("user-service-config");return JSON.parse((null==e?void 0:e.innerHTML)||"{}")},O=function(){var e=document.documentElement.getAttribute("lang")||"";if(!e)throw new Error("html[lang] is missing");return e},D=function(){var t=function(){var t=e.useState(A),r=t[0],n=t[1];return{config:r,reload:e.useCallback((function(){return n(A())}),[n])}}(),r=t.config,n=e.useState(N),a=n[0],s=n[1],o=e.useState(O),i=o[0],u=o[1],l=function(){var t=e.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),r=e.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),n=e.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:e.useCallback((function(){return sessionStorage.clear()}),[]),setItem:t,getItem:r,removeItem:n}}(),c=l.setItem,d=l.getItem,f=l.removeItem,h=e.useState(),m=h[0],y=h[1],p=e.useCallback((function(){s(N()),u(O())}),[s,u]),v=e.useCallback((function(e,t){"loggedIn"===e&&t?y(c(a.currentUserId,t)):(f(a.currentUserId),y(void 0))}),[a,f,c,y]);return e.useEffect((function(){return a.currentUserId&&y(d(a.currentUserId))}),[a,d,y]),e.useEffect((function(){var e,t=Date.now()-(null==m||null==(e=m.meta)?void 0:e.createdAt);(null==m||!m.value||t>=36e5)&&_.ajax({keys:{encodedContextPath:r.encodedContextPath}}).then((function(e){return v("loggedIn",e)}),(function(){return v("loggedOut")}))}),[r,m,v]),{info:a,language:i,token:null==m?void 0:m.value,reload:p}},V="{undefined}",F={baseSiteId:"hybrisStoreName",userId:"currentUserId"},L=function(t,r){void 0===t&&(t=""),void 0===r&&(r={});var n=e.useState({get:{data:null,isLoading:!1,errors:null},post:{data:null,isLoading:!1,errors:null},put:{data:null,isLoading:!1,errors:null},patch:{data:null,isLoading:!1,errors:null}}),a=n[0],s=n[1],o=D(),i=o.info,u=o.token,l=e.useMemo((function(){var e=Object.assign({},r,i),n="",a=function(e){var t=/[{}]/g;return(e.match(/{([\w\d]+)}/g)||[]).map((function(e){return e.replace(t,"")}))}(t),s=new RegExp(V);return a.forEach((function(r){var a;n=n||t;var s=null!=(a=e[F[r]||r])?a:V;n=n.replace("{"+r+"}",s)})),s.test(n)?"":n}),[i,t,r]),c=e.useCallback((function(e,t){return s((function(r){var n;return Object.assign({},r,((n={})[e]=Object.assign({},r[e],{isLoading:t}),n))}))}),[s]),d=e.useCallback((function(e,t,r){return s((function(n){var a;return Object.assign({},n,((a={})[e]=Object.assign({},n[e],{data:t,errors:r}),a))}))}),[s]),f=e.useCallback((function(e,t){if(void 0===t&&(t={}),!l||!u)return Promise.reject(new Error("No target or token!"));var r=/get|options/.test(e),n=r?void 0:t,a=new URLSearchParams;r&&Object.keys(t).forEach((function(e){return a.append(e,t[e])})),t.queryParams&&Object.keys(t.queryParams).forEach((function(e){return a.append(e,t.queryParams[e])}));var s=a.toString(),o=s.length>0?l+"&"+s:l,i={Authorization:"Bearer "+u,"X-Requested-With":"XMLHttpRequest"};return r||(i["Content-Type"]="application/json; charset=utf-8"),c(e,!0),fetch(o,{method:e,headers:i,body:JSON.stringify(n)}).then(function(){var e=y(v.mark((function e(t){var r;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().catch((function(){return null}));case 2:if(r=e.sent,t.ok){e.next=5;break}throw r;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return d(e,t,null),t})).catch((function(t){var r=t.errors||[{message:t.message}];throw d(e,null,r),r})).finally((function(){return c(e,!1)}))}),[l,u,d,c]),h=e.useCallback((function(e){return void 0===e&&(e={}),f("get",e)}),[f]),m=e.useCallback((function(e){return void 0===e&&(e={}),f("post",e)}),[f]),p=e.useCallback((function(e){return void 0===e&&(e={}),f("put",e)}),[f]);return{responses:a,get:h,post:m,patch:e.useCallback((function(e){return void 0===e&&(e={}),f("patch",e)}),[f]),put:p}},j=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},$=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},M=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=$(e)}return r};var I=function(){var t=f().translations,r=e.useCallback((function(e){var r=null==t?void 0:t[e];if(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return a.length?j(r,a):r}return e}),[t]);return{t:r}},P=function(){var t=h().translations,r=void 0===t?{}:t,n=e.useCallback((function(e){var t=null==r?void 0:r[e];if(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return a.length?j(t,a):t}return e}),[r]);return{t:n}};var q=e=>"checkbox"===e.type,R=e=>e instanceof Date,H=e=>null==e;const U=e=>"object"==typeof e;var B=e=>!H(e)&&!Array.isArray(e)&&U(e)&&!R(e),J=e=>B(e)&&e.target?q(e.target)?e.target.checked:e.target.value:e,W=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),z=e=>Array.isArray(e)?e.filter(Boolean):[],K=e=>void 0===e,Y=(e,t,r)=>{if(!t||!B(e))return r;const n=z(t.split(/[,[\].]+?/)).reduce(((e,t)=>H(e)?e:e[t]),e);return K(n)||n===e?K(e[t])?r:e[t]:n};const G="blur",X="focusout",Z="change",Q="onBlur",ee="onChange",te="onSubmit",re="onTouched",ne="all",ae="max",se="min",oe="maxLength",ie="minLength",ue="pattern",le="required",ce="validate",de=o.default.createContext(null),fe=()=>o.default.useContext(de),he=e=>{const{children:t,...r}=e;return o.default.createElement(de.Provider,{value:r},e.children)};var me=(e,t,r,n=!0)=>{const a={};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t[a]!==ne&&(t[a]=!n||ne),r&&(r[a]=!0),e[a]}});return a},ye=e=>B(e)&&!Object.keys(e).length,pe=(e,t,r)=>{const{name:n,...a}=e;return ye(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!r||ne)))},ve=e=>Array.isArray(e)?e:[e],ge=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ve(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function be(e){const t=o.default.useRef(e);t.current=e,o.default.useEffect((()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>(e=>{e&&e.unsubscribe()})(r)}),[e.disabled])}var we=e=>"string"==typeof e,ke=(e,t,r,n)=>{const a=Array.isArray(e);return we(e)?(n&&t.watch.add(e),Y(r,e)):a?e.map((e=>(n&&t.watch.add(e),Y(r,e)))):(n&&(t.watchAll=!0),r)},Ee=e=>"function"==typeof e,xe=e=>{for(const t in e)if(Ee(e[t]))return!0;return!1};function Ce(e){const t=fe(),{name:r,control:n=t.control,shouldUnregister:a}=e,s=W(n._names.array,r),i=function(e){const t=fe(),{control:r=t.control,name:n,defaultValue:a,disabled:s,exact:i}=e||{},u=o.default.useRef(n);u.current=n;const l=o.default.useCallback((e=>{if(ge(u.current,e.name,i)){const t=ke(u.current,r._names,e.values||r._formValues);d(K(u.current)||B(t)&&!xe(t)?{...t}:Array.isArray(t)?[...t]:K(t)?a:t)}}),[r,i,a]);be({disabled:s,subject:r._subjects.watch,callback:l});const[c,d]=o.default.useState(K(a)?r._getWatch(n):a);return o.default.useEffect((()=>{r._removeUnmounted()})),c}({control:n,name:r,defaultValue:Y(n._formValues,r,Y(n._defaultValues,r,e.defaultValue)),exact:!0}),u=function(e){const t=fe(),{control:r=t.control,disabled:n,name:a,exact:s}=e||{},[i,u]=o.default.useState(r._formState),l=o.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=o.default.useRef(a),d=o.default.useRef(!0);return c.current=a,be({disabled:n,callback:o.default.useCallback((e=>d.current&&ge(c.current,e.name,s)&&pe(e,l.current)&&u({...r._formState,...e})),[r,s]),subject:r._subjects.state}),o.default.useEffect((()=>(d.current=!0,()=>{d.current=!1})),[]),me(i,r._proxyFormState,l.current,!1)}({control:n,name:r}),l=o.default.useRef(n.register(r,{...e.rules,value:i}));return o.default.useEffect((()=>{const e=(e,t)=>{const r=Y(n._fields,e);r&&(r._f.mount=t)};return e(r,!0),()=>{const t=n._options.shouldUnregister||a;(s?t&&!n._stateFlags.action:t)?n.unregister(r):e(r,!1)}}),[r,n,s,a]),{field:{name:r,value:i,onChange:o.default.useCallback((e=>{l.current.onChange({target:{value:J(e),name:r},type:Z})}),[r]),onBlur:o.default.useCallback((()=>{l.current.onBlur({target:{value:Y(n._formValues,r),name:r},type:G})}),[r,n]),ref:o.default.useCallback((e=>{const t=Y(n._fields,r);e&&t&&e.focus&&(t._f.ref={focus:()=>e.focus(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r,n._fields])},formState:u,fieldState:Object.defineProperties({},{invalid:{get:()=>!!Y(u.errors,r)},isDirty:{get:()=>!!Y(u.dirtyFields,r)},isTouched:{get:()=>!!Y(u.touchedFields,r)},error:{get:()=>Y(u.errors,r)}})}}const Se=e=>e.render(Ce(e));var Te=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},_e=e=>/^\w*$/.test(e),Ae=e=>z(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Ne(e,t,r){let n=-1;const a=_e(t)?[t]:Ae(t),s=a.length,o=s-1;for(;++n<s;){const t=a[n];let s=r;if(n!==o){const r=e[t];s=B(r)||Array.isArray(r)?r:isNaN(+a[n+1])?{}:[]}e[t]=s,e=e[t]}return e}const Oe=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=Y(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus&&K(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else B(n)&&Oe(n,t)}}};var De=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));function Ve(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(globalThis.Blob&&e instanceof Blob)t=e;else if(globalThis.FileList&&e instanceof FileList)t=e;else{if(!r&&!B(e))return e;t=r?[]:{};for(const r in e)t[r]=Ee(e[r])?e[r]:Ve(e[r])}return t}function Fe(e,t){const r=_e(t)?[t]:Ae(t),n=1==r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=K(e)?n++:e[t[n++]];return e}(e,r),a=r[r.length-1];let s;n&&delete n[a];for(let t=0;t<r.slice(0,-1).length;t++){let n,a=-1;const o=r.slice(0,-(t+1)),i=o.length-1;for(t>0&&(s=e);++a<o.length;){const t=o[a];n=n?n[t]:e[t],i===a&&(B(n)&&ye(n)||Array.isArray(n)&&!n.filter((e=>!K(e))).length)&&(s?delete s[t]:delete e[t]),s=n}}return e}function Le(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var je=e=>H(e)||!U(e);function $e(e,t){if(je(e)||je(t))return e===t;if(R(e)&&R(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const r=e[a];if(!n.includes(a))return!1;if("ref"!==a){const e=t[a];if(R(r)&&R(e)||B(r)&&B(e)||Array.isArray(r)&&Array.isArray(e)?!$e(r,e):r!==e)return!1}}return!0}var Me=e=>({isOnSubmit:!e||e===te,isOnBlur:e===Q,isOnChange:e===ee,isOnAll:e===ne,isOnTouch:e===re}),Ie=e=>"boolean"==typeof e,Pe=e=>"file"===e.type,qe=e=>e instanceof HTMLElement,Re=e=>"select-multiple"===e.type,He=e=>"radio"===e.type,Ue="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document,Be=e=>qe(e)&&e.isConnected;function Je(e,t={}){const r=Array.isArray(e);if(B(e)||r)for(const r in e)Array.isArray(e[r])||B(e[r])&&!xe(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Je(e[r],t[r])):H(e[r])||(t[r]=!0);return t}function We(e,t,r){const n=Array.isArray(e);if(B(e)||n)for(const n in e)Array.isArray(e[n])||B(e[n])&&!xe(e[n])?K(t)||je(r[n])?r[n]=Array.isArray(e[n])?Je(e[n],[]):{...Je(e[n])}:We(e[n],H(t)?{}:t[n],r[n]):r[n]=!$e(e[n],t[n]);return r}var ze=(e,t)=>We(e,t,Je(t));const Ke={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var Ge=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!K(e[0].attributes.value)?K(e[0].value)||""===e[0].value?Ye:{value:e[0].value,isValid:!0}:Ye:Ke}return Ke},Xe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>K(e)?e:t?""===e?NaN:+e:r&&we(e)?new Date(e):n?n(e):e;const Ze={isValid:!1,value:null};var Qe=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Ze):Ze;function et(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Pe(t)?t.files:He(t)?Qe(e.refs).value:Re(t)?[...t.selectedOptions].map((({value:e})=>e)):q(t)?Ge(e.refs).value:Xe(K(t.value)?e.ref.value:t.value,e)}var tt=e=>e instanceof RegExp,rt=e=>K(e)?void 0:tt(e)?e.source:B(e)?tt(e.value)?e.value.source:e.value:e;function nt(e,t,r){const n=Y(e,r);if(n||_e(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const n=a.join("."),s=Y(t,n),o=Y(e,n);if(s&&!Array.isArray(s)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};a.pop()}return{name:r}}var at=e=>we(e)||o.default.isValidElement(e);function st(e,t,r="validate"){if(at(e)||Array.isArray(e)&&e.every(at)||Ie(e)&&!e)return{type:r,message:at(e)?e:"",ref:t}}var ot=e=>B(e)&&!tt(e)?e:{value:e,message:""},it=async(e,t,r,n)=>{const{ref:a,refs:s,required:o,maxLength:i,minLength:u,min:l,max:c,pattern:d,validate:f,name:h,valueAsNumber:m,mount:y,disabled:p}=e._f;if(!y||p)return{};const v=s?s[0]:a,g=e=>{n&&v.reportValidity&&(v.setCustomValidity(Ie(e)?"":e||" "),v.reportValidity())},b={},w=He(a),k=q(a),E=w||k,x=(m||Pe(a))&&!a.value||""===t||Array.isArray(t)&&!t.length,C=Te.bind(null,h,r,b),S=(e,t,r,n=oe,s=ie)=>{const o=e?t:r;b[h]={type:e?n:s,message:o,ref:a,...C(e?n:s,o)}};if(o&&(!E&&(x||H(t))||Ie(t)&&!t||k&&!Ge(s).isValid||w&&!Qe(s).isValid)){const{value:e,message:t}=at(o)?{value:!!o,message:o}:ot(o);if(e&&(b[h]={type:le,message:t,ref:v,...C(le,t)},!r))return g(t),b}if(!(x||H(l)&&H(c))){let e,n;const s=ot(c),o=ot(l);if(isNaN(t)){const r=a.valueAsDate||new Date(t);we(s.value)&&(e=r>new Date(s.value)),we(o.value)&&(n=r<new Date(o.value))}else{const r=a.valueAsNumber||+t;H(s.value)||(e=r>s.value),H(o.value)||(n=r<o.value)}if((e||n)&&(S(!!e,s.message,o.message,ae,se),!r))return g(b[h].message),b}if((i||u)&&!x&&we(t)){const e=ot(i),n=ot(u),a=!H(e.value)&&t.length>e.value,s=!H(n.value)&&t.length<n.value;if((a||s)&&(S(a,e.message,n.message),!r))return g(b[h].message),b}if(d&&!x&&we(t)){const{value:e,message:n}=ot(d);if(tt(e)&&!t.match(e)&&(b[h]={type:ue,message:n,ref:a,...C(ue,n)},!r))return g(n),b}if(f)if(Ee(f)){const e=st(await f(t),v);if(e&&(b[h]={...e,...C(ce,e.message)},!r))return g(e.message),b}else if(B(f)){let e={};for(const n in f){if(!ye(e)&&!r)break;const a=st(await f[n](t),v,n);a&&(e={...a,...C(n,a.message)},g(a.message),r&&(b[h]=e))}if(!ye(e)&&(b[h]={ref:v,...e},!r))return b}return g(!0),b};const ut={mode:te,reValidateMode:ee,shouldFocusError:!0};function lt(e={}){let t,r={...ut,...e},n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},a={},s=Ve(r.defaultValues)||{},o=r.shouldUnregister?{}:Ve(s),i={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0,c={};const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={watch:Le(),array:Le(),state:Le()},h=Me(r.mode),m=Me(r.reValidateMode),y=r.criteriaMode===ne,p=async e=>{let t=!1;return d.isValid&&(t=r.resolver?ye((await k()).errors):await E(a,!0),e||t===n.isValid||(n.isValid=t,f.state.next({isValid:t}))),t},v=(e,t)=>(Ne(n.errors,e,t),f.state.next({errors:n.errors})),g=(e,t,r,n)=>{const u=Y(a,e);if(u){const a=Y(o,e,K(r)?Y(s,e):r);K(a)||n&&n.defaultChecked||t?Ne(o,e,t?a:et(u._f)):S(e,a),i.mount&&p()}},b=(e,t,r,a,o)=>{let i=!1;const u={name:e},l=Y(n.touchedFields,e);if(d.isDirty){const e=n.isDirty;n.isDirty=u.isDirty=x(),i=e!==u.isDirty}if(d.dirtyFields&&(!r||a)){const r=Y(n.dirtyFields,e);$e(Y(s,e),t)?Fe(n.dirtyFields,e):Ne(n.dirtyFields,e,!0),u.dirtyFields=n.dirtyFields,i=i||r!==Y(n.dirtyFields,e)}return r&&!l&&(Ne(n.touchedFields,e,r),u.touchedFields=n.touchedFields,i=i||d.touchedFields&&l!==r),i&&o&&f.state.next(u),i?u:{}},w=async(r,a,s,o,i)=>{const u=Y(n.errors,a),h=d.isValid&&n.isValid!==s;var m,y;if(e.delayError&&o?(t=t||(m=v,y=e.delayError,(...e)=>{clearTimeout(l),l=window.setTimeout((()=>m(...e)),y)}),t(a,o)):(clearTimeout(l),o?Ne(n.errors,a,o):Fe(n.errors,a)),((o?!$e(u,o):u)||!ye(i)||h)&&!r){const e={...i,...h?{isValid:s}:{},errors:n.errors,name:a};n={...n,...e},f.state.next(e)}c[a]--,d.isValidating&&!Object.values(c).some((e=>e))&&(f.state.next({isValidating:!1}),c={})},k=async e=>r.resolver?await r.resolver({...o},r.context,((e,t,r,n)=>{const a={};for(const r of e){const e=Y(t,r);e&&Ne(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}})(e||u.mount,a,r.criteriaMode,r.shouldUseNativeValidation)):{},E=async(e,t,a={valid:!0})=>{for(const s in e){const i=e[s];if(i){const{_f:e,...s}=i;if(e){const s=await it(i,Y(o,e.name),y,r.shouldUseNativeValidation);if(s[e.name]&&(a.valid=!1,t))break;t||(s[e.name]?Ne(n.errors,e.name,s[e.name]):Fe(n.errors,e.name))}s&&await E(s,t,a)}}return a.valid},x=(e,t)=>(e&&t&&Ne(o,e,t),!$e(O(),s)),C=(e,t,r)=>{const n={...i.mount?o:K(t)?s:we(e)?{[e]:t}:t};return ke(e,u,n,r)},S=(e,t,r={})=>{const n=Y(a,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&Ne(o,e,Xe(t,r)),s=Ue&&qe(r.ref)&&H(t)?"":t,Re(r.ref)?[...r.ref.options].forEach((e=>e.selected=s.includes(e.value))):r.refs?q(r.ref)?r.refs.length>1?r.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach((e=>e.checked=e.value===s)):Pe(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||f.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&b(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&N(e)},T=(e,t,r)=>{for(const n in t){const s=t[n],o=`${e}.${n}`,i=Y(a,o);!u.array.has(e)&&je(s)&&(!i||i._f)||R(s)?S(o,s,r):T(o,s,r)}},_=(e,t,r={})=>{const i=Y(a,e),l=u.array.has(e),c=Ve(t);Ne(o,e,c),l?(f.array.next({name:e,values:o}),(d.isDirty||d.dirtyFields)&&r.shouldDirty&&(n.dirtyFields=ze(s,o),f.state.next({name:e,dirtyFields:n.dirtyFields,isDirty:x(e,c)}))):!i||i._f||H(c)?S(e,c,r):T(e,c,r),De(e,u)&&f.state.next({}),f.watch.next({name:e})},A=async e=>{const t=e.target;let s=t.name;const i=Y(a,s);if(i){let d,v;const g=t.type?et(i._f):J(e),E=e.type===G||e.type===X,x=!((l=i._f).mount&&(l.required||l.min||l.max||l.maxLength||l.minLength||l.pattern||l.validate)||r.resolver||Y(n.errors,s)||i._f.deps)||((e,t,r,n,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:!(r?n.isOnChange:a.isOnChange)||e))(E,Y(n.touchedFields,s),n.isSubmitted,m,h),C=De(s,u,E);Ne(o,s,g),E?i._f.onBlur&&i._f.onBlur(e):i._f.onChange&&i._f.onChange(e);const S=b(s,g,E,!1),T=!ye(S)||C;if(!E&&f.watch.next({name:s,type:e.type}),x)return T&&f.state.next({name:s,...C?{}:S});if(!E&&C&&f.state.next({}),c[s]=(c[s],1),f.state.next({isValidating:!0}),r.resolver){const{errors:e}=await k([s]),t=nt(n.errors,a,s),r=nt(e,a,t.name||s);d=r.error,s=r.name,v=ye(e)}else d=(await it(i,Y(o,s),y,r.shouldUseNativeValidation))[s],v=await p(!0);i._f.deps&&N(i._f.deps),w(!1,s,v,d,S)}var l},N=async(e,t={})=>{let s,o;const i=ve(e);if(f.state.next({isValidating:!0}),r.resolver){const t=await(async e=>{const{errors:t}=await k();if(e)for(const r of e){const e=Y(t,r);e?Ne(n.errors,r,e):Fe(n.errors,r)}else n.errors=t;return t})(K(e)?e:i);s=ye(t),o=e?!i.some((e=>Y(t,e))):s}else e?(o=(await Promise.all(i.map((async e=>{const t=Y(a,e);return await E(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||n.isValid)&&p()):o=s=await E(a);return f.state.next({...!we(e)||d.isValid&&s!==n.isValid?{}:{name:e},...r.resolver?{isValid:s}:{},errors:n.errors,isValidating:!1}),t.shouldFocus&&!o&&Oe(a,(e=>Y(n.errors,e)),e?i:u.mount),o},O=e=>{const t={...s,...i.mount?o:{}};return K(e)?t:we(e)?Y(t,e):e.map((e=>Y(t,e)))},D=(e,t)=>({invalid:!!Y((t||n).errors,e),isDirty:!!Y((t||n).dirtyFields,e),isTouched:!!Y((t||n).touchedFields,e),error:Y((t||n).errors,e)}),V=(e,t={})=>{for(const i of e?ve(e):u.mount)u.mount.delete(i),u.array.delete(i),Y(a,i)&&(t.keepValue||(Fe(a,i),Fe(o,i)),!t.keepError&&Fe(n.errors,i),!t.keepDirty&&Fe(n.dirtyFields,i),!t.keepTouched&&Fe(n.touchedFields,i),!r.shouldUnregister&&!t.keepDefaultValue&&Fe(s,i));f.watch.next({}),f.state.next({...n,...t.keepDirty?{isDirty:x()}:{}}),!t.keepIsValid&&p()},F=(e,t={})=>{let n=Y(a,e);const l=Ie(t.disabled);return Ne(a,e,{_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),u.mount.add(e),n?l&&Ne(o,e,t.disabled?void 0:Y(o,e,et(n._f))):g(e,!0,t.value),{...l?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:rt(t.min),max:rt(t.max),minLength:rt(t.minLength),maxLength:rt(t.maxLength),pattern:rt(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:o=>{if(o){F(e,t),n=Y(a,e);const r=K(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,i=(e=>He(e)||q(e))(r),u=n._f.refs||[];if(i?u.find((e=>e===r)):r===n._f.ref)return;Ne(a,e,{_f:{...n._f,...i?{refs:[...u.filter(Be),r,...Array.isArray(Y(s,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),g(e,!1,void 0,r)}else n=Y(a,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!W(u.array,e)||!i.action)&&u.unMount.add(e)}}};return{control:{register:F,unregister:V,getFieldState:D,_executeSchema:k,_getWatch:C,_getDirty:x,_updateValid:p,_removeUnmounted:()=>{for(const e of u.unMount){const t=Y(a,e);t&&(t._f.refs?t._f.refs.every((e=>!Be(e))):!Be(t._f.ref))&&V(e)}u.unMount=new Set},_updateFieldArray:(e,t=[],r,u,l=!0,c=!0)=>{if(u&&r){if(i.action=!0,c&&Array.isArray(Y(a,e))){const t=r(Y(a,e),u.argA,u.argB);l&&Ne(a,e,t)}if(d.errors&&c&&Array.isArray(Y(n.errors,e))){const t=r(Y(n.errors,e),u.argA,u.argB);l&&Ne(n.errors,e,t),((e,t)=>{!z(Y(e,t)).length&&Fe(e,t)})(n.errors,e)}if(d.touchedFields&&c&&Array.isArray(Y(n.touchedFields,e))){const t=r(Y(n.touchedFields,e),u.argA,u.argB);l&&Ne(n.touchedFields,e,t)}d.dirtyFields&&(n.dirtyFields=ze(s,o)),f.state.next({isDirty:x(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ne(o,e,t)},_getFieldArray:t=>z(Y(i.mount?o:s,t,e.shouldUnregister?Y(s,t,[]):[])),_subjects:f,_proxyFormState:d,get _fields(){return a},get _formValues(){return o},get _stateFlags(){return i},set _stateFlags(e){i=e},get _defaultValues(){return s},get _names(){return u},set _names(e){u=e},get _formState(){return n},set _formState(e){n=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:N,register:F,handleSubmit:(e,t)=>async s=>{s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let i=!0,l=Ve(o);f.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:e,values:t}=await k();n.errors=e,l=t}else await E(a);ye(n.errors)?(f.state.next({errors:{},isSubmitting:!0}),await e(l,s)):(t&&await t({...n.errors},s),r.shouldFocusError&&Oe(a,(e=>Y(n.errors,e)),u.mount))}catch(e){throw i=!1,e}finally{n.isSubmitted=!0,f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ye(n.errors)&&i,submitCount:n.submitCount+1,errors:n.errors})}},watch:(e,t)=>Ee(e)?f.watch.subscribe({next:r=>e(C(void 0,t),r)}):C(e,t,!0),setValue:_,getValues:O,reset:(t,r={})=>{const l=t||s,c=Ve(l),h=t&&!ye(t)?c:s;if(r.keepDefaultValues||(s=l),!r.keepValues){if(r.keepDirtyValues)for(const e of u.mount)Y(n.dirtyFields,e)?Ne(h,e,Y(o,e)):_(e,Y(h,e));else{if(Ue&&K(t))for(const e of u.mount){const t=Y(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{qe(e)&&e.closest("form").reset();break}catch(e){}}}a={}}o=e.shouldUnregister?r.keepDefaultValues?Ve(s):{}:c,f.array.next({values:h}),f.watch.next({values:h})}u={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!r.keepIsValid,i.watch=!!e.shouldUnregister,f.state.next({submitCount:r.keepSubmitCount?n.submitCount:0,isDirty:r.keepDirty||r.keepDirtyValues?n.isDirty:!(!r.keepDefaultValues||$e(t,s)),isSubmitted:!!r.keepIsSubmitted,dirtyFields:r.keepDirty||r.keepDirtyValues?n.dirtyFields:r.keepDefaultValues&&t?ze(s,t):{},touchedFields:r.keepTouched?n.touchedFields:{},errors:r.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{Y(a,e)&&(K(t.defaultValue)?_(e,Y(s,e)):(_(e,t.defaultValue),Ne(s,e,t.defaultValue)),t.keepTouched||Fe(n.touchedFields,e),t.keepDirty||(Fe(n.dirtyFields,e),n.isDirty=t.defaultValue?x(e,Y(s,e)):x()),t.keepError||(Fe(n.errors,e),d.isValid&&p()),f.state.next({...n}))},clearErrors:e=>{e?ve(e).forEach((e=>Fe(n.errors,e))):n.errors={},f.state.next({errors:n.errors})},unregister:V,setError:(e,t,r)=>{const s=(Y(a,e,{_f:{}})._f||{}).ref;Ne(n.errors,e,{...t,ref:s}),f.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},setFocus:(e,t={})=>{const r=Y(a,e)._f,n=r.refs?r.refs[0]:r.ref;t.shouldSelect?n.select():n.focus()},getFieldState:D}}function ct(){return ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ct.apply(this,arguments)}var dt=e.createContext(null),ft=function(t){var r=t.children,n=t.onAdd,a=t.onChange,s=t.available,i=void 0===s?[]:s,u=t.defaultAddress,l=t.showOneTimeAddress,c=t.availableCountries,d=void 0===c?[]:c,f=t.address,h=e.useState(null!=u?u:null),m=h[0],y=h[1],p=e.useState(!1),v=p[0],g=p[1],b=e.useMemo((function(){return{onAdd:n,onChange:a,available:i,showOneTimeAddress:l,availableCountries:d,address:f,selectedAddress:m,setSelectedAddress:y,isAddressDialogVisible:v,setAddressDialogVisible:g}}),[f,i,d,v,n,a,m,l]);return o.default.createElement(dt.Provider,{value:b},r)},ht=function(){return e.useContext(dt)},mt="vanguard.checkout.address.cta.change",yt="vanguard.checkout.address.cta.add",pt="vanguard.checkout.address.formTitle",vt="vanguard.checkout.address.name",gt="vanguard.checkout.address.required",bt="vanguard.checkout.address.line1",wt="vanguard.checkout.address.line2",kt="vanguard.checkout.address.zipcode",Et="vanguard.checkout.address.cityTown",xt="vanguard.checkout.address.country",Ct="vanguard.checkout.address.search",St="vanguard.checkout.address.addNew",Tt=function(t){var r=t.testid,a=P().t,s=fe(),i=s.register,u=s.setValue,l=s.control,c=s.formState,d=e.useRef(null),f=ht().availableCountries,h=c.errors,m=i("streetName",{required:a(gt)}),y=e.useMemo((function(){return f.map((function(e){return{label:e.name,value:e.isocode}}))}),[f]),p=e.useState({}),v=p[0],g=p[1];e.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var n=new google.maps.places.Autocomplete(d.current,{fields:["address_components"]});n.setComponentRestrictions({country:y.map((function(e){return e.value.toString()}))}),n.addListener("place_changed",(function(){var e,t=((null==(e=n.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});g(t),Object.keys(t).forEach((function(e){return u(e,t[e])}))}))}}),[u,y]);var b=function(e,t){var r;u(e,t),g(Object.assign({},v,((r={})[e]=t,r)))};return o.default.createElement("div",null,o.default.createElement("div",{className:"pb-4 space-y-2"},o.default.createElement(n.TextInput,ct({},i("companyName",{required:a(gt)}),{label:a(vt)+"*",testid:r+".input.companyName",autoComplete:"organization",maxlength:40,error:null==h?void 0:h.companyName})),o.default.createElement(n.TextInput,ct({},i("companyName2"),{testid:r+".input.companyName2",maxlength:40}))),o.default.createElement("div",{className:"flex space-x-2 pb-2"},o.default.createElement("div",{className:"w-4/5"},o.default.createElement(n.TextInput,ct({},m,{ref:function(e){m.ref(e),d.current=e},testid:r+".input.streetName",label:a(bt)+"*",autoComplete:"street-address",maxlength:60,error:null==h?void 0:h.streetName,onChange:function(e){return b("streetName",e.target.value)},value:null==v?void 0:v.streetName}))),o.default.createElement("div",{className:"w-1/5"},o.default.createElement(n.TextInput,ct({},i("streetNumber",{required:a(gt)}),{testid:r+".input.streetNumber",label:a(wt)+"*",error:null==h?void 0:h.streetNumber,maxlength:12,autoComplete:"street-address",onChange:function(e){return b("streetNumber",e.target.value)},value:null==v?void 0:v.streetNumber})))),o.default.createElement("div",{className:"flex space-x-2 pb-2"},o.default.createElement("div",{className:"w-1/5"},o.default.createElement(n.TextInput,ct({},i("zipCode",{required:a(gt)}),{testid:r+".input.zipCode",label:a(kt)+"*",error:null==h?void 0:h.zipCode,maxlength:10,autoComplete:"postal-code",onChange:function(e){return b("zipCode",e.target.value)},value:null==v?void 0:v.zipCode}))),o.default.createElement("div",{className:"w-4/5"},o.default.createElement(n.TextInput,ct({},i("city",{required:a(gt)}),{testid:r+".input.city",label:a(Et)+"*",error:null==h?void 0:h.city,maxlength:40,autoComplete:"address-level2",onChange:function(e){return b("city",e.target.value)},value:null==v?void 0:v.city})))),o.default.createElement(Se,{control:l,name:"country",rules:{required:!0},render:function(e){var t=e.field;return o.default.createElement(n.Select,{label:a(xt)+"*",value:null==v?void 0:v.country,testid:r+".select.country",options:y,error:null==h?void 0:h.country,onChange:function(e){t.onChange(e.target.value),b("country",e.target.value)}})}}))},_t=function(t){var r=t.address,a=t.testid,s=e.useMemo((function(){var e;return{company:null==r?void 0:r.companyName,imprint:[null==r?void 0:r.line1,null==r?void 0:r.line2].join(" "),region:[null==r?void 0:r.postalCode,null==r?void 0:r.town].join(" "),country:null==r||null==(e=r.country)?void 0:e.name,first_name:null==r?void 0:r.first_name,last_name:null==r?void 0:r.last_name}}),[r]);return o.default.createElement(o.default.Fragment,null,(null==s?void 0:s.company)&&o.default.createElement(n.Text,{testid:a+".company"},null==s?void 0:s.company),((null==s?void 0:s.first_name)||(null==s?void 0:s.last_name))&&o.default.createElement(n.Text,{testid:a+".company"},null==s?void 0:s.first_name," ",null==s?void 0:s.last_name),(null==s?void 0:s.imprint)&&o.default.createElement(n.Text,{testid:a+".imprint"},null==s?void 0:s.imprint),(null==s?void 0:s.region)&&o.default.createElement(n.Text,{testid:a+".region"},null==s?void 0:s.region),(null==s?void 0:s.country)&&o.default.createElement(n.Text,{testid:a+".country"},null==s?void 0:s.country))},At=function(t){var r=t.testid,a=ht(),s=a.available,u=a.selectedAddress,l=a.setSelectedAddress,c=e.useState(""),d=c[0],f=c[1];return o.default.createElement(o.default.Fragment,null,o.default.createElement(n.TextInput,{testid:r+".search",value:d,onChange:function(e){var t=e.target.value;f(t)},icon:{type:"search"}}),o.default.createElement("div",{className:"max-h-96 overflow-auto","data-testid":r+".search.results"},s.filter((function(e){return d.length<3||e.companyName.toLowerCase().includes(d.toLowerCase())})).map((function(e,t){return o.default.createElement("div",{key:t,className:i.default("h-1/3","py-5","px-5",u&&{border:e.id===u.id,"border-gray-300":e.id===u.id}),onClick:function(){return l(e)},"data-testid":r+".search.results.item-"+t},o.default.createElement(_t,{address:e,testid:r+".search.results.item-"+t}))}))))},Nt=function(t){var r=t.testid,a=P().t,s=ht(),i=s.available,u=s.showOneTimeAddress,l=s.isAddressDialogVisible,c=s.availableCountries,d=s.selectedAddress,f=s.setSelectedAddress,h=s.setAddressDialogVisible,m=s.onChange,y=s.onAdd,p=i.length>=1,v=e.useState(p?"search":"addNew"),g=v[0],b=v[1],w=function(e={}){const t=o.default.useRef(),[r,n]=o.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...lt(e),formState:r};const a=t.current.control,s=o.default.useCallback((e=>{pe(e,a._proxyFormState,!0)&&(a._formState={...a._formState,...e},n({...a._formState}))}),[a]);return be({subject:a._subjects.state,callback:s}),o.default.useEffect((()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()})),t.current.formState=me(r,a._proxyFormState),t.current}();e.useEffect((function(){b(p?"search":"addNew")}),[p]);var k=function(e){y({companyName:(e.companyName+" "+e.companyName2).trim(),line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:c.find((function(t){return t.isocode===e.country}))}),h(!1),w.reset()};return o.default.createElement(n.Dialog,{headerTitle:a(pt),width:"200",isOpen:l,onClose:function(){return h(!1)},className:"max-h-200 overflow-auto",testid:r},p&&u&&o.default.createElement(n.TabLayout,{initialKey:g,onSelectTab:function(e){return b(e)}},o.default.createElement(n.TabLayout.Tab,{testid:r+".tab.search",tabKey:"search",title:a(Ct)}),o.default.createElement(n.TabLayout.Tab,{testid:r+".tab.addNew",tabKey:"addNew",title:a(St)})),o.default.createElement(he,w,"search"===g?o.default.createElement(At,{testid:r}):o.default.createElement(Tt,{testid:r})),o.default.createElement("div",{className:"flex flex-row mt-6 space-x-4 justify-between"},o.default.createElement(n.Button,{variant:"primaryBorder",testid:r+".cancelButton",onClick:function(){return h(!1)}},a("vanguard.checkout.address.cancel")),o.default.createElement(n.Button,{testid:r+".confirmButton",onClick:function(){return"search"===g?(d&&m(d),h(!1),void f(null)):w.handleSubmit(k)()}},a("vanguard.checkout.address.confirm"))))},Ot=function(e){var t=e.testid,r=ht(),a=r.address,s=r.available,i=r.showOneTimeAddress,u=r.setAddressDialogVisible,l=P().t,c=s.length>1||i;return o.default.createElement("div",null,o.default.createElement(_t,{address:a,testid:t}),o.default.createElement("div",{"data-testid":t+".actions",className:"flex flex-row space-x-2"},a?c&&o.default.createElement(n.Button,{testid:t+".change",isLink:!0,className:"mr-2",onClick:function(){return u(!0)}},l(mt)):o.default.createElement(n.Button,{testid:t+".add",isLink:!0,onClick:function(){return u(!0)}},l(yt))))},Dt=["testid"],Vt=function(e){var t=e.testid,r=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,Dt);return o.default.createElement(ft,r,o.default.createElement(Ot,{testid:t+".address"}),o.default.createElement(Nt,{testid:t+".address.dialog"}))};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",a="second",s="minute",o="hour",i="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,l),s=r-a<0,o=t.clone().add(n+(s?-1:1),l);return+(-(n+(r-a)/(s?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:u,d:i,D:f,h:o,m:s,s:a,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=p;var k=function(e){return e instanceof S},E=function e(t,r,n){var a;if(!t)return b;if("string"==typeof t){var s=t.toLowerCase();w[s]&&(a=s),r&&(w[s]=r,a=s);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var i=t.name;w[i]=t,a=i}return!n&&a&&(b=a),a||!n&&b},x=function(e,t){if(k(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},C=g;C.l=E,C.i=k,C.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function p(e){this.$L=E(e.locale,null,!0),this.parse(e)}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(m);if(n){var a=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var r=x(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return x(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<x(e)},v.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!C.u(t)||t,c=C.p(e),h=function(e,t){var a=C.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?a:a.endOf(i)},m=function(e,t){return C.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case d:return n?h(1,0):h(31,11);case l:return n?h(1,p):h(0,p+1);case u:var b=this.$locale().weekStart||0,w=(y<b?y+7:y)-b;return h(n?v-w:v+(6-w),p);case i:case f:return m(g+"Hours",0);case o:return m(g+"Minutes",1);case s:return m(g+"Seconds",2);case a:return m(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,u=C.p(e),c="set"+(this.$u?"UTC":""),h=(r={},r[i]=c+"Date",r[f]=c+"Date",r[l]=c+"Month",r[d]=c+"FullYear",r[o]=c+"Hours",r[s]=c+"Minutes",r[a]=c+"Seconds",r[n]=c+"Milliseconds",r)[u],m=u===i?this.$D+(t-this.$W):t;if(u===l||u===d){var y=this.clone().set(f,1);y.$d[h](m),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[C.p(e)]()},v.add=function(n,c){var f,h=this;n=Number(n);var m=C.p(c),y=function(e){var t=x(h);return C.w(t.date(t.date()+Math.round(e*n)),h)};if(m===l)return this.set(l,this.$M+n);if(m===d)return this.set(d,this.$y+n);if(m===i)return y(1);if(m===u)return y(7);var p=(f={},f[s]=t,f[o]=r,f[a]=e,f)[m]||1,v=this.$d.getTime()+n*p;return C.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=C.z(this),s=this.$H,o=this.$m,i=this.$M,u=r.weekdays,l=r.months,c=function(e,r,a,s){return e&&(e[r]||e(t,n))||a[r].slice(0,s)},d=function(e){return C.s(s%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:C.s(i+1,2,"0"),MMM:c(r.monthsShort,i,l,3),MMMM:c(l,i),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,u,2),ddd:c(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(s),HH:C.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,o,!0),A:f(s,o,!1),m:String(o),mm:C.s(o,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:a};return n.replace(y,(function(e,t){return t||m[e]||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,h){var m,y=C.p(f),p=x(n),v=(p.utcOffset()-this.utcOffset())*t,g=this-p,b=C.m(this,p);return b=(m={},m[d]=b/12,m[l]=b,m[c]=b/3,m[u]=(g-v)/6048e5,m[i]=(g-v)/864e5,m[o]=g/r,m[s]=g/t,m[a]=g/e,m)[y]||g,h?b:C.a(b)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return w[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=E(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),T=S.prototype;return x.prototype=T,[["$ms",n],["$s",a],["$m",s],["$H",o],["$W",i],["$M",l],["$y",d],["$D",f]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,S,x),e.$i=!0),x},x.locale=E,x.isDayjs=k,x.unix=function(e){return x(1e3*e)},x.en=w[b],x.Ls=w,x.p={},x}()}({exports:{}});var Ft="#2c5282",Lt="vanguard.keysystem.header.standard",jt="vanguard.keysystem.header.standard.category",$t="vanguard.keysystem.header.standard.category.placeholder",Mt="mks.Systemheader.CategoryType",It="vanguard.keysystem.header.standard.technology",Pt="vanguard.keysystem.header.standard.technology.placeholder",qt="vanguard.keysystem.header.standard.systemLanguage",Rt="vanguard.keysystem.header.standard.systemLanguage.placeholder",Ht="mks.Systemheader.Language",Ut="vanguard.keysystem.header.epos",Bt="vanguard.keysystem.header.property",Jt="vanguard.keysystem.header.property.description",Wt="vanguard.keysystem.new",zt="vanguard.keysystem.new.header",Kt="vanguard.keysystem.new.electronic",Yt="vanguard.keysystem.keyPlan",Gt="vanguard.keysystem.new.prev",Xt="vanguard.keysystem.new.next",Zt="vanguard.keysystem.header.epos.name",Qt="vanguard.keysystem.header.epos.status",er="vanguard.keysystem.header.epos.technology",tr="vanguard.keysystem.header.epos.add",rr="vanguard.keysystem.header.epos.status.active",nr="vanguard.keysystem.header.epos.status.inactive",ar="vanguard.keysystem.header.property.address",sr="vanguard.keysystem.keyPlan.keysCylinders",or="vanguard.keysystem.keyPlan.key.lockingPosition",ir="vanguard.keysystem.keyPlan.key.epos",ur="vanguard.keysystem.keyPlan.key.function",lr="vanguard.keysystem.keyPlan.key.product",cr="vanguard.keysystem.keyPlan.key.configuration",dr="vanguard.keysystem.keyPlan.key.quantity",fr="vanguard.keysystem.keyplan.pagination.gotoPage",hr="vanguard.keysystem.keyplan.pagination.pageOf",mr="vanguard.keysystem.keyplan.pagination.show",yr="vanguard.keysystem.keyplan.filters.all",pr="vanguard.keysystem.keyplan.filters.searchNRecords",vr=e.createContext(null),gr=function(){return e.useContext(vr)},br=function(t){var r=t.children,n=e.useState("headerData"),a=n[0],s=n[1],i=e.useState({}),u=i[0],l=i[1],c=L(M("/{baseSiteId}/deliverycountries")),d=c.get,f=c.responses.get;e.useEffect((function(){d()}),[d]);var h=e.useMemo((function(){var e;return{pageName:a,setPageName:function(e){return s(e)},address:u,setAddress:function(e){return l(e)},availableCountries:null==f||null==(e=f.data)?void 0:e.countries}}),[a,u,f]);return o.default.createElement(vr.Provider,{value:h},r)},wr=function(){var e=gr(),t=e.pageName,r=e.setPageName,a=I().t;return o.default.createElement("div",{className:"flex justify-between items-center h-14 px-4 border"},o.default.createElement("div",null,"keyPlan"===t&&o.default.createElement("div",{className:"flex justify-center items-center cursor-pointer",onClick:function(){return r("headerData")}},o.default.createElement(n.Icon,{type:"arrowleft"}),o.default.createElement(n.Text,{color:Ft,className:"text-blue-800 ml-2 font-bold"},a(Gt)))),o.default.createElement("div",null,"headerData"===t&&o.default.createElement("div",{className:"flex justify-center items-center cursor-pointer",onClick:function(){return r("keyPlan")}},o.default.createElement(n.Text,{color:Ft,className:"text-blue-800 mr-2 font-bold"},a(Xt)),o.default.createElement(n.Icon,{type:"arrowright"}))))},kr=function(e){var t=e.keyTypeName,r=e.onClose,a=e.onBackArrow,s=e.headerTitle,i=e.showArrow,u=void 0!==i&&i,l=I().t;return o.default.createElement("div",{className:"flex justify-between items-center h-14 px-4 border"},o.default.createElement("div",null,u&&o.default.createElement("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:a},o.default.createElement(n.Icon,{type:"arrowleft"}))),o.default.createElement(n.Text,{color:Ft,className:"text-blue-800 text-xl font-bold"},l(Wt)+" - "+l(t)+" - "+l(s)),o.default.createElement("div",{className:"flex justify-center items-center h-5 w-5 cursor-pointer",onClick:r},o.default.createElement(n.Icon,{type:"close",className:"text-red-500",color:"#ff426c"})))},Er=function(){var e="headerData"===gr().pageName?zt:Yt;return o.default.createElement(kr,{headerTitle:e,keyTypeName:Kt,onBackArrow:function(){},onClose:function(){}})},xr=function(e){var t=e.name,r=e.technology,a=e.isTitle,s=void 0!==a&&a,i=e.status,u=I().t;return o.default.createElement("div",{className:"flex justify-between items-center mt-2 pb-2 border-b border-b-text-gray-300"},o.default.createElement(n.Text,{className:"w-1/3 font-thin",color:"gray-500",bold:s},u(t)),o.default.createElement(n.Text,{className:"w-1/3 font-thin",color:"gray-500",bold:s},u(r)),o.default.createElement(n.Text,{className:"w-1/4 font-thin",color:"gray-500",bold:s},u(i)),o.default.createElement("div",{className:"w-12 h-12"},!s&&o.default.createElement(n.ActionsMenu,{testid:"epos-row",color:"white"})))},Cr=function(){var t,r=I().t,a=f().headPositionCode,s=L(M("/{baseSiteId}/emks/users/{userId}/keysystems/{headPositionCode}/epos"),{headPositionCode:a}),i=s.get,u=s.responses.get;e.useEffect((function(){i()}),[i]);var l=null==u?void 0:u.data;return o.default.createElement(n.Tile,{header:Ut,className:"mt-4",isAccordionType:!0},o.default.createElement(xr,{name:Zt,technology:er,status:Qt,isTitle:!0}),null==l||null==(t=l.electronicPositions)?void 0:t.map((function(e,t){var r=e.authMediaTechnology,n=r.eposName,a=r.technology,s=e.deactivated;return o.default.createElement(xr,{key:""+n+a+t,name:n,technology:a,status:s?nr:rr})})),o.default.createElement("button",{className:"flex justify-end mt-6 cursor-pointer",onClick:function(){}},o.default.createElement(n.Text,{color:"blue-800 underline capitalize",bold:!0},r(tr))))},Sr="vanguard.keysystem",Tr=Sr+".header",_r=Sr+".keyplan",Ar={headerStandard:Tr+".standard",headerStandardCategory:Tr+".standard.category",headerStandardTechnology:Tr+".standard.technology",headerStandardSystemLanguage:Tr+".standard.systemLanguage",keyplanKeys:_r+".keys",keyplanCylinders:_r+".cylinders",keyplanSecurityCards:_r+".securityCards",keyplanProducts:_r+".products",keyplanProductsInput:_r+".products.input-{x}"},Nr=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(e,t){return e.replace("{x}",""+t)}),Ar[e])},Or=function(t){var r=t.value,a=t.column,s=t.row,i=t.selectedKeyTab,u=t.updateCallback,l=function(t){var r=e.useState([]),n=r[0],a=r[1],s=L(M("/{baseSiteId}/emks/users/{userId}/search/results")).post,o=e.useCallback(function(){var e=y(v.mark((function e(r){var n;return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({technicalSystem:"K30",emksProductType:t.toUpperCase(),searchTerm:r,page:0});case 3:n=e.sent,a(n.products),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[s,t]);return e.useMemo((function(){return{products:n,handleProductSearch:o}}),[o,n])}(i),c=l.products,d=l.handleProductSearch;return o.default.createElement(n.AutocompleteInput,{testid:""+Nr("keyplanProductsInput",s),className:"border border-gray-500",dropdownClassName:"w-64",initialValue:r.toString(),items:c.map((function(e){return e.name+", "+e.code})),onDispatchSearch:function(){var e=y(v.mark((function e(t){return v.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onItemSelect:function(e){var t=c[e].name;u("update",s,a,t)}})},Dr=o.default.memo(Or),Vr={pos:"",epos:"epos1",function:"",product:"",configuration:"",quantity:0,cellsToDisable:void 0},Fr=function(){var t,r,a,s,i,u=e.useState([Vr]),l=u[0],c=u[1],d=e.useState(!1),h=d[0],m=d[1],y=e.useState("key"),p=y[0],v=y[1],g=(r=f().headPositionCode,a=L(M("/{baseSiteId}/emks/users/{userId}/emksHeadPositions/{headPositionCode}"),{headPositionCode:r}),s=a.get,i=a.responses.get,e.useEffect((function(){s()}),[s]),{businessCase:null==(t=i.data)?void 0:t.businessCase}).businessCase,b=I().t,w=e.useMemo((function(){return{gotoPage:b(fr),pageOf:b(hr),show:b(mr),all:b(yr),searchNRecords:b(pr)}}),[b]),k=e.useCallback((function(e,t,r,n){void 0!==t&&(m(!0),c((function(a){switch(e){case"create":return a.splice(t+1,0,{pos:a[t].pos||"",epos:"",function:a[t].function||"",product:"",configuration:"",quantity:0,cellsToDisable:""!==a[t].pos&&"REORDER"===g?["pos"]:void 0}),[].concat(a);case"delete":return a.splice(t,1),[].concat(a);case"copy":var s=Object.assign({},a[t]);return s.quantity=0,s.cellsToDisable="REORDER"===g||"EXTENSION"===g?["pos"]:void 0,a.splice(t+1,0,s),[].concat(a);case"update":if(void 0===r)return[].concat(a);var o=a.map((function(e,s){var o;return s===t?Object.assign({},a[t],((o={})[r]=n,o)):e}));return[].concat(o);default:return[].concat(a)}})))}),[g]),E=e.useMemo((function(){return[{Header:"",accessor:"keyIcon",cellElement:function(){return o.default.createElement("div",{className:"flex justify-center items-center w-full h-full"},o.default.createElement(n.Icon,{type:"locked"}))},disableFilter:!0,disableSorting:!0,width:50},{Header:b(or),accessor:"pos",customCellType:"textEdit",isSelectFilter:!0,width:100},{Header:b(ir),accessor:"epos",isSelectFilter:!0,customCellType:"selectEdit",selectOptions:["epos1","epos2"]},{Header:b(ur),accessor:"function",customCellType:"textEdit"},{Header:b(lr),accessor:"product",isSelectFilter:!0,cellElement:function(e){var t=e.value,r=e.row.index,n=e.column.id;return o.default.createElement(Dr,{value:t,row:r,column:n,selectedKeyTab:p,updateCallback:k})}},{Header:b(cr),accessor:"configuration",customCellType:"textEdit",width:350},{Header:b(dr),accessor:"quantity",customCellType:"numberEdit",width:75},{Header:"",accessor:"actions",customCellType:"tableModification",disableFilter:!0,disableSorting:!0,width:75}]}),[p,b,k]);e.useEffect((function(){m(!1)}),[l]);return o.default.createElement(n.Tile,{header:b(sr),className:"my-2 px-4"},o.default.createElement("div",{className:"w-full pt-3"},o.default.createElement(n.TabLayout,{initialKey:p,onSelectTab:function(e){v(e)}},o.default.createElement(n.TabLayout.Tab,{testid:Nr("keyplanKeys"),tabKey:"key",title:"Keys",iconType:"locked"}),o.default.createElement(n.TabLayout.Tab,{testid:Nr("keyplanCylinders"),tabKey:"cylinder",title:"Cylinders",iconType:"cylinder"}),o.default.createElement(n.TabLayout.Tab,{testid:Nr("keyplanSecurityCards"),tabKey:"securityCard",title:"Security Cards",iconType:"card"})),o.default.createElement(n.DataTable,{className:"w-full",columns:E,data:l,updateData:k,skipPageReset:h,translations:w,disableDeletion:"EXTENSION"===g||"REORDER"===g})))},Lr=function(){var e=P().t,t=gr(),r=t.setAddress,a=t.address,s=t.availableCountries,i=function(e){r(e)};return o.default.createElement(n.Tile,{header:Bt,className:"my-4",isAccordionType:!0},o.default.createElement("div",{className:"flex flex-row space-between"},o.default.createElement("div",{className:"pr-8"},o.default.createElement(n.Text,{bold:!0,color:"gray-700 pb-2",i18n:Jt,testid:Jt},e(Jt)),o.default.createElement(n.TextInput,{testid:Jt,size:40,multiline:!0,rows:3})),o.default.createElement("div",null,o.default.createElement(n.Text,{bold:!0,color:"gray-700 pb-2",i18n:ar,testid:ar},e(ar)),o.default.createElement(Vt,{testid:"vanguard.keysystem.header.property",showOneTimeAddress:!0,address:a,onChange:i,onAdd:i,availableCountries:s}))))},jr=function(){var t=I().t,r=Lt,a=jt,s=$t,i=It,u=Pt,l=qt,c=Rt,d=function(){var t=f().headPositionCode,r=I().t,n=e.useState(null),a=n[0],s=n[1],o=e.useState(null),i=o[0],u=o[1],l=e.useState(null),c=l[0],d=l[1],h=e.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:r(Mt+"."+e.key),color:"default"}})):[]}),[r]),m=e.useCallback((function(e){return e?e.map((function(e){return{value:e.key,label:e.value,color:"default"}})):[]}),[]),y=e.useCallback((function(e){return e?e.map((function(e){return{value:e.isocode,label:r(Ht+"."+e.isocode.substring(0,2).toUpperCase()),color:"default"}})):[]}),[r]),p=L(M("/{baseSiteId}/emks/users/{userId}/keysystems/{headPositionCode}/standard"),{headPositionCode:t}),v=p.get,g=p.responses.get;return e.useEffect((function(){v()}),[v]),e.useMemo((function(){var e,t,r;return{categories:h(null==(e=g.data)?void 0:e.categories),technologies:m(null==(t=g.data)?void 0:t.technologies),languages:y(null==(r=g.data)?void 0:r.languages),selectedCategory:a,selectedTechnology:i,selectedLanguage:c,setSelectedCategory:s,setSelectedTechnology:u,setSelectedLanguage:d}}),[g.data,a,i,c,h,m,y])}(),h=d.categories,m=d.technologies,y=d.languages,p=d.selectedCategory,v=d.selectedTechnology,g=d.selectedLanguage,b=d.setSelectedCategory,w=d.setSelectedTechnology,k=d.setSelectedLanguage;return o.default.createElement(n.Tile,{header:r,className:"mt-4",isAccordionType:!0},o.default.createElement("div",{className:"flex flex-row space-between"},o.default.createElement(n.Select,{className:"p-4",label:t(a),placeholder:t(s),testid:Nr("headerStandardCategory"),options:h,value:p,onChange:function(e){return b(e.target.value)}}),o.default.createElement(n.Select,{className:"p-4",label:t(i),placeholder:t(u),"data-testid":Nr("headerStandardTechnology"),options:m,value:v,onChange:function(e){return w(e.target.value)}}),o.default.createElement(n.Select,{className:"p-4",label:t(l),placeholder:t(c),"data-testid":Nr("headerStandardSystemLanguage"),options:y,value:g,onChange:function(e){return k(e.target.value)}})))},$r=function(){var e=gr().pageName;return o.default.createElement("div",{className:"flex flex-col"},"headerData"===e&&o.default.createElement(o.default.Fragment,null,o.default.createElement(jr,null),o.default.createElement(Cr,null),o.default.createElement(Lr,null)),"keyPlan"===e&&o.default.createElement(o.default.Fragment,null,o.default.createElement(Fr,null)))};!function(e,n){var a='[data-react-app="'+n+'"]',s=document.querySelector(a);if(!s)throw new Error(a+" is missing");var i=document.createElement("div");s.appendChild(i),r.render(function(e,r){return o.default.createElement(t.StoreProvider,null,o.default.createElement(d,{appId:r},o.default.createElement(l,{appId:r},o.default.createElement(e,null))))}(e,n),i)}((function(){return o.default.createElement(br,null,o.default.createElement(Er,null),o.default.createElement($r,null),o.default.createElement(wr,null))}),"new-key-system")}));
