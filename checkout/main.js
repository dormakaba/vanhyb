!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("react-dom"),require("@Apps/backbone"),require("react"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["react-dom","@Apps/backbone","react","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).dormakaba.vendorReact["vendor/react-dom"],e.backbone,e.dormakaba.vendorReact["vendor/react"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,s){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(r),o=a(s),l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},c=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},u=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=c(e)}return r},d=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{exports:{}}),f={},p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function m(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==n.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(e){s[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}})()&&Object.assign;var x=i.default,y=60103;if(f.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var g=Symbol.for;y=g("react.element"),f.Fragment=g("react.fragment")}var b=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var n,s={},a=null,i=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)j.call(t,n)&&!w.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:y,type:e,key:a,ref:i,props:s,_owner:b.current}}f.jsx=k,f.jsxs=k;d.exports=f;var S=r.createContext(null),C=function(e){var t=e.appId,n=e.children,s=e.defaultValue,a=void 0===s?{}:s,i=r.useMemo((function(){if(!t)return a;var e='[data-react-app="'+t+'"]',r=document.querySelector(e);if(!r)throw new Error(e+" is missing");var n=r.querySelector("script");return null!=n&&n.innerHTML?JSON.parse(n.innerHTML):a}),[t,a]);return d.exports.jsx(S.Provider,{value:i,children:n})},A=r.createContext(void 0),N=function(e){var t=e.appId,n=e.children,s=r.useMemo((function(){return{appId:t}}),[t]);return d.exports.jsx(A.Provider,{value:s,children:n})};function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=e=>"checkbox"===e.type,D=e=>e instanceof Date,_=e=>null==e;const P=e=>"object"==typeof e;var M=e=>!_(e)&&!Array.isArray(e)&&P(e)&&!D(e),E=e=>M(e)&&e.target?T(e.target)?e.target.checked:e.target.value:e,V=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),F=e=>Array.isArray(e)?e.filter(Boolean):[],$=e=>void 0===e,I=(e,t,r)=>{if(!t||!M(e))return r;const n=F(t.split(/[,[\].]+?/)).reduce(((e,t)=>_(e)?e:e[t]),e);return $(n)||n===e?$(e[t])?r:e[t]:n};const L="blur",U="focusout",B="change",R="onBlur",z="onChange",q="onSubmit",Y="onTouched",W="all",H="max",G="min",Q="maxLength",J="minLength",K="pattern",Z="required",X="validate",ee=i.default.createContext(null),te=()=>i.default.useContext(ee),re=e=>{const{children:t,...r}=e;return i.default.createElement(ee.Provider,{value:r},e.children)};var ne=(e,t,r,n=!0)=>{const s={};for(const a in e)Object.defineProperty(s,a,{get:()=>{const s=a;return t[s]!==W&&(t[s]=!n||W),r&&(r[s]=!0),e[s]}});return s},se=e=>M(e)&&!Object.keys(e).length,ae=(e,t,r)=>{const{name:n,...s}=e;return se(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||W)))},ie=e=>Array.isArray(e)?e:[e],oe=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ie(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function le(e){const t=i.default.useRef(e);t.current=e,i.default.useEffect((()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>(e=>{e&&e.unsubscribe()})(r)}),[e.disabled])}var ce=e=>"string"==typeof e,ue=(e,t,r,n)=>{const s=Array.isArray(e);return ce(e)?(n&&t.watch.add(e),I(r,e)):s?e.map((e=>(n&&t.watch.add(e),I(r,e)))):(n&&(t.watchAll=!0),r)},de=e=>"function"==typeof e,fe=e=>{for(const t in e)if(de(e[t]))return!0;return!1};function pe(e){const t=te(),{name:r,control:n=t.control,shouldUnregister:s}=e,a=V(n._names.array,r),o=function(e){const t=te(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:o}=e||{},l=i.default.useRef(n);l.current=n;const c=i.default.useCallback((e=>{if(oe(l.current,e.name,o)){const t=ue(l.current,r._names,e.values||r._formValues);d($(l.current)||M(t)&&!fe(t)?{...t}:Array.isArray(t)?[...t]:$(t)?s:t)}}),[r,o,s]);le({disabled:a,subject:r._subjects.watch,callback:c});const[u,d]=i.default.useState($(s)?r._getWatch(n):s);return i.default.useEffect((()=>{r._removeUnmounted()})),u}({control:n,name:r,defaultValue:I(n._formValues,r,I(n._defaultValues,r,e.defaultValue)),exact:!0}),l=function(e){const t=te(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[o,l]=i.default.useState(r._formState),c=i.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=i.default.useRef(s),d=i.default.useRef(!0);return u.current=s,le({disabled:n,callback:i.default.useCallback((e=>d.current&&oe(u.current,e.name,a)&&ae(e,c.current)&&l({...r._formState,...e})),[r,a]),subject:r._subjects.state}),i.default.useEffect((()=>(d.current=!0,()=>{d.current=!1})),[]),ne(o,r._proxyFormState,c.current,!1)}({control:n,name:r}),c=i.default.useRef(n.register(r,{...e.rules,value:o}));return i.default.useEffect((()=>{const e=(e,t)=>{const r=I(n._fields,e);r&&(r._f.mount=t)};return e(r,!0),()=>{const t=n._options.shouldUnregister||s;(a?t&&!n._stateFlags.action:t)?n.unregister(r):e(r,!1)}}),[r,n,a,s]),{field:{name:r,value:o,onChange:i.default.useCallback((e=>{c.current.onChange({target:{value:E(e),name:r},type:B})}),[r]),onBlur:i.default.useCallback((()=>{c.current.onBlur({target:{value:I(n._formValues,r),name:r},type:L})}),[r,n]),ref:i.default.useCallback((e=>{const t=I(n._fields,r);e&&t&&e.focus&&(t._f.ref={focus:()=>e.focus(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r,n._fields])},formState:l,fieldState:Object.defineProperties({},{invalid:{get:()=>!!I(l.errors,r)},isDirty:{get:()=>!!I(l.dirtyFields,r)},isTouched:{get:()=>!!I(l.touchedFields,r)},error:{get:()=>I(l.errors,r)}})}}const he=e=>e.render(pe(e));var ve=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},me=e=>/^\w*$/.test(e),xe=e=>F(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ye(e,t,r){let n=-1;const s=me(t)?[t]:xe(t),a=s.length,i=a-1;for(;++n<a;){const t=s[n];let a=r;if(n!==i){const r=e[t];a=M(r)||Array.isArray(r)?r:isNaN(+s[n+1])?{}:[]}e[t]=a,e=e[t]}return e}const ge=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=I(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus&&$(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else M(n)&&ge(n,t)}}};var be=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));function je(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(globalThis.Blob&&e instanceof Blob)t=e;else if(globalThis.FileList&&e instanceof FileList)t=e;else{if(!r&&!M(e))return e;t=r?[]:{};for(const r in e)t[r]=de(e[r])?e[r]:je(e[r])}return t}function we(e,t){const r=me(t)?[t]:xe(t),n=1==r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=$(e)?n++:e[t[n++]];return e}(e,r),s=r[r.length-1];let a;n&&delete n[s];for(let t=0;t<r.slice(0,-1).length;t++){let n,s=-1;const i=r.slice(0,-(t+1)),o=i.length-1;for(t>0&&(a=e);++s<i.length;){const t=i[s];n=n?n[t]:e[t],o===s&&(M(n)&&se(n)||Array.isArray(n)&&!n.filter((e=>!$(e))).length)&&(a?delete a[t]:delete e[t]),a=n}}return e}function ke(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Se=e=>_(e)||!P(e);function Ce(e,t){if(Se(e)||Se(t))return e===t;if(D(e)&&D(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(D(r)&&D(e)||M(r)&&M(e)||Array.isArray(r)&&Array.isArray(e)?!Ce(r,e):r!==e)return!1}}return!0}var Ae=e=>({isOnSubmit:!e||e===q,isOnBlur:e===R,isOnChange:e===z,isOnAll:e===W,isOnTouch:e===Y}),Ne=e=>"boolean"==typeof e,Oe=e=>"file"===e.type,Te=e=>e instanceof HTMLElement,De=e=>"select-multiple"===e.type,_e=e=>"radio"===e.type,Pe="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document,Me=e=>Te(e)&&e.isConnected;function Ee(e,t={}){const r=Array.isArray(e);if(M(e)||r)for(const r in e)Array.isArray(e[r])||M(e[r])&&!fe(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ee(e[r],t[r])):_(e[r])||(t[r]=!0);return t}function Ve(e,t,r){const n=Array.isArray(e);if(M(e)||n)for(const n in e)Array.isArray(e[n])||M(e[n])&&!fe(e[n])?$(t)||Se(r[n])?r[n]=Array.isArray(e[n])?Ee(e[n],[]):{...Ee(e[n])}:Ve(e[n],_(t)?{}:t[n],r[n]):r[n]=!Ce(e[n],t[n]);return r}var Fe=(e,t)=>Ve(e,t,Ee(t));const $e={value:!1,isValid:!1},Ie={value:!0,isValid:!0};var Le=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$(e[0].attributes.value)?$(e[0].value)||""===e[0].value?Ie:{value:e[0].value,isValid:!0}:Ie:$e}return $e},Ue=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>$(e)?e:t?""===e?NaN:+e:r&&ce(e)?new Date(e):n?n(e):e;const Be={isValid:!1,value:null};var Re=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Be):Be;function ze(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Oe(t)?t.files:_e(t)?Re(e.refs).value:De(t)?[...t.selectedOptions].map((({value:e})=>e)):T(t)?Le(e.refs).value:Ue($(t.value)?e.ref.value:t.value,e)}var qe=e=>e instanceof RegExp,Ye=e=>$(e)?void 0:qe(e)?e.source:M(e)?qe(e.value)?e.value.source:e.value:e;function We(e,t,r){const n=I(e,r);if(n||me(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),a=I(t,n),i=I(e,n);if(a&&!Array.isArray(a)&&r!==n)return{name:r};if(i&&i.type)return{name:n,error:i};s.pop()}return{name:r}}var He=e=>ce(e)||i.default.isValidElement(e);function Ge(e,t,r="validate"){if(He(e)||Array.isArray(e)&&e.every(He)||Ne(e)&&!e)return{type:r,message:He(e)?e:"",ref:t}}var Qe=e=>M(e)&&!qe(e)?e:{value:e,message:""},Je=async(e,t,r,n)=>{const{ref:s,refs:a,required:i,maxLength:o,minLength:l,min:c,max:u,pattern:d,validate:f,name:p,valueAsNumber:h,mount:v,disabled:m}=e._f;if(!v||m)return{};const x=a?a[0]:s,y=e=>{n&&x.reportValidity&&(x.setCustomValidity(Ne(e)?"":e||" "),x.reportValidity())},g={},b=_e(s),j=T(s),w=b||j,k=(h||Oe(s))&&!s.value||""===t||Array.isArray(t)&&!t.length,S=ve.bind(null,p,r,g),C=(e,t,r,n=Q,a=J)=>{const i=e?t:r;g[p]={type:e?n:a,message:i,ref:s,...S(e?n:a,i)}};if(i&&(!w&&(k||_(t))||Ne(t)&&!t||j&&!Le(a).isValid||b&&!Re(a).isValid)){const{value:e,message:t}=He(i)?{value:!!i,message:i}:Qe(i);if(e&&(g[p]={type:Z,message:t,ref:x,...S(Z,t)},!r))return y(t),g}if(!(k||_(c)&&_(u))){let e,n;const a=Qe(u),i=Qe(c);if(isNaN(t)){const r=s.valueAsDate||new Date(t);ce(a.value)&&(e=r>new Date(a.value)),ce(i.value)&&(n=r<new Date(i.value))}else{const r=s.valueAsNumber||+t;_(a.value)||(e=r>a.value),_(i.value)||(n=r<i.value)}if((e||n)&&(C(!!e,a.message,i.message,H,G),!r))return y(g[p].message),g}if((o||l)&&!k&&ce(t)){const e=Qe(o),n=Qe(l),s=!_(e.value)&&t.length>e.value,a=!_(n.value)&&t.length<n.value;if((s||a)&&(C(s,e.message,n.message),!r))return y(g[p].message),g}if(d&&!k&&ce(t)){const{value:e,message:n}=Qe(d);if(qe(e)&&!t.match(e)&&(g[p]={type:K,message:n,ref:s,...S(K,n)},!r))return y(n),g}if(f)if(de(f)){const e=Ge(await f(t),x);if(e&&(g[p]={...e,...S(X,e.message)},!r))return y(e.message),g}else if(M(f)){let e={};for(const n in f){if(!se(e)&&!r)break;const s=Ge(await f[n](t),x,n);s&&(e={...s,...S(n,s.message)},y(s.message),r&&(g[p]=e))}if(!se(e)&&(g[p]={ref:x,...e},!r))return g}return y(!0),g};const Ke={mode:q,reValidateMode:z,shouldFocusError:!0};function Ze(e={}){let t,r={...Ke,...e},n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},s={},a=je(r.defaultValues)||{},i=r.shouldUnregister?{}:je(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={};const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={watch:ke(),array:ke(),state:ke()},p=Ae(r.mode),h=Ae(r.reValidateMode),v=r.criteriaMode===W,m=async e=>{let t=!1;return d.isValid&&(t=r.resolver?se((await j()).errors):await w(s,!0),e||t===n.isValid||(n.isValid=t,f.state.next({isValid:t}))),t},x=(e,t)=>(ye(n.errors,e,t),f.state.next({errors:n.errors})),y=(e,t,r,n)=>{const l=I(s,e);if(l){const s=I(i,e,$(r)?I(a,e):r);$(s)||n&&n.defaultChecked||t?ye(i,e,t?s:ze(l._f)):C(e,s),o.mount&&m()}},g=(e,t,r,s,i)=>{let o=!1;const l={name:e},c=I(n.touchedFields,e);if(d.isDirty){const e=n.isDirty;n.isDirty=l.isDirty=k(),o=e!==l.isDirty}if(d.dirtyFields&&(!r||s)){const r=I(n.dirtyFields,e);Ce(I(a,e),t)?we(n.dirtyFields,e):ye(n.dirtyFields,e,!0),l.dirtyFields=n.dirtyFields,o=o||r!==I(n.dirtyFields,e)}return r&&!c&&(ye(n.touchedFields,e,r),l.touchedFields=n.touchedFields,o=o||d.touchedFields&&c!==r),o&&i&&f.state.next(l),o?l:{}},b=async(r,s,a,i,o)=>{const l=I(n.errors,s),p=d.isValid&&n.isValid!==a;var h,v;if(e.delayError&&i?(t=t||(h=x,v=e.delayError,(...e)=>{clearTimeout(c),c=window.setTimeout((()=>h(...e)),v)}),t(s,i)):(clearTimeout(c),i?ye(n.errors,s,i):we(n.errors,s)),((i?!Ce(l,i):l)||!se(o)||p)&&!r){const e={...o,...p?{isValid:a}:{},errors:n.errors,name:s};n={...n,...e},f.state.next(e)}u[s]--,d.isValidating&&!Object.values(u).some((e=>e))&&(f.state.next({isValidating:!1}),u={})},j=async e=>r.resolver?await r.resolver({...i},r.context,((e,t,r,n)=>{const s={};for(const r of e){const e=I(t,r);e&&ye(s,r,e._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||l.mount,s,r.criteriaMode,r.shouldUseNativeValidation)):{},w=async(e,t,s={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...a}=o;if(e){const a=await Je(o,I(i,e.name),v,r.shouldUseNativeValidation);if(a[e.name]&&(s.valid=!1,t))break;t||(a[e.name]?ye(n.errors,e.name,a[e.name]):we(n.errors,e.name))}a&&await w(a,t,s)}}return s.valid},k=(e,t)=>(e&&t&&ye(i,e,t),!Ce(M(),a)),S=(e,t,r)=>{const n={...o.mount?i:$(t)?a:ce(e)?{[e]:t}:t};return ue(e,l,n,r)},C=(e,t,r={})=>{const n=I(s,e);let a=t;if(n){const r=n._f;r&&(!r.disabled&&ye(i,e,Ue(t,r)),a=Pe&&Te(r.ref)&&_(t)?"":t,De(r.ref)?[...r.ref.options].forEach((e=>e.selected=a.includes(e.value))):r.refs?T(r.ref)?r.refs.length>1?r.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(a)?!!a.find((t=>t===e.value)):a===e.value))):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach((e=>e.checked=e.value===a)):Oe(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||f.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&g(e,a,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&P(e)},A=(e,t,r)=>{for(const n in t){const a=t[n],i=`${e}.${n}`,o=I(s,i);!l.array.has(e)&&Se(a)&&(!o||o._f)||D(a)?C(i,a,r):A(i,a,r)}},N=(e,t,r={})=>{const o=I(s,e),c=l.array.has(e),u=je(t);ye(i,e,u),c?(f.array.next({name:e,values:i}),(d.isDirty||d.dirtyFields)&&r.shouldDirty&&(n.dirtyFields=Fe(a,i),f.state.next({name:e,dirtyFields:n.dirtyFields,isDirty:k(e,u)}))):!o||o._f||_(u)?C(e,u,r):A(e,u,r),be(e,l)&&f.state.next({}),f.watch.next({name:e})},O=async e=>{const t=e.target;let a=t.name;const o=I(s,a);if(o){let d,x;const y=t.type?ze(o._f):E(e),w=e.type===L||e.type===U,k=!((c=o._f).mount&&(c.required||c.min||c.max||c.maxLength||c.minLength||c.pattern||c.validate)||r.resolver||I(n.errors,a)||o._f.deps)||((e,t,r,n,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:!(r?n.isOnChange:s.isOnChange)||e))(w,I(n.touchedFields,a),n.isSubmitted,h,p),S=be(a,l,w);ye(i,a,y),w?o._f.onBlur&&o._f.onBlur(e):o._f.onChange&&o._f.onChange(e);const C=g(a,y,w,!1),A=!se(C)||S;if(!w&&f.watch.next({name:a,type:e.type}),k)return A&&f.state.next({name:a,...S?{}:C});if(!w&&S&&f.state.next({}),u[a]=(u[a],1),f.state.next({isValidating:!0}),r.resolver){const{errors:e}=await j([a]),t=We(n.errors,s,a),r=We(e,s,t.name||a);d=r.error,a=r.name,x=se(e)}else d=(await Je(o,I(i,a),v,r.shouldUseNativeValidation))[a],x=await m(!0);o._f.deps&&P(o._f.deps),b(!1,a,x,d,C)}var c},P=async(e,t={})=>{let a,i;const o=ie(e);if(f.state.next({isValidating:!0}),r.resolver){const t=await(async e=>{const{errors:t}=await j();if(e)for(const r of e){const e=I(t,r);e?ye(n.errors,r,e):we(n.errors,r)}else n.errors=t;return t})($(e)?e:o);a=se(t),i=e?!o.some((e=>I(t,e))):a}else e?(i=(await Promise.all(o.map((async e=>{const t=I(s,e);return await w(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||n.isValid)&&m()):i=a=await w(s);return f.state.next({...!ce(e)||d.isValid&&a!==n.isValid?{}:{name:e},...r.resolver?{isValid:a}:{},errors:n.errors,isValidating:!1}),t.shouldFocus&&!i&&ge(s,(e=>I(n.errors,e)),e?o:l.mount),i},M=e=>{const t={...a,...o.mount?i:{}};return $(e)?t:ce(e)?I(t,e):e.map((e=>I(t,e)))},B=(e,t)=>({invalid:!!I((t||n).errors,e),isDirty:!!I((t||n).dirtyFields,e),isTouched:!!I((t||n).touchedFields,e),error:I((t||n).errors,e)}),R=(e,t={})=>{for(const o of e?ie(e):l.mount)l.mount.delete(o),l.array.delete(o),I(s,o)&&(t.keepValue||(we(s,o),we(i,o)),!t.keepError&&we(n.errors,o),!t.keepDirty&&we(n.dirtyFields,o),!t.keepTouched&&we(n.touchedFields,o),!r.shouldUnregister&&!t.keepDefaultValue&&we(a,o));f.watch.next({}),f.state.next({...n,...t.keepDirty?{isDirty:k()}:{}}),!t.keepIsValid&&m()},z=(e,t={})=>{let n=I(s,e);const c=Ne(t.disabled);return ye(s,e,{_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n?c&&ye(i,e,t.disabled?void 0:I(i,e,ze(n._f))):y(e,!0,t.value),{...c?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:Ye(t.min),max:Ye(t.max),minLength:Ye(t.minLength),maxLength:Ye(t.maxLength),pattern:Ye(t.pattern)}:{},name:e,onChange:O,onBlur:O,ref:i=>{if(i){z(e,t),n=I(s,e);const r=$(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>_e(e)||T(e))(r),l=n._f.refs||[];if(o?l.find((e=>e===r)):r===n._f.ref)return;ye(s,e,{_f:{...n._f,...o?{refs:[...l.filter(Me),r,...Array.isArray(I(a,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),y(e,!1,void 0,r)}else n=I(s,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!V(l.array,e)||!o.action)&&l.unMount.add(e)}}};return{control:{register:z,unregister:R,getFieldState:B,_executeSchema:j,_getWatch:S,_getDirty:k,_updateValid:m,_removeUnmounted:()=>{for(const e of l.unMount){const t=I(s,e);t&&(t._f.refs?t._f.refs.every((e=>!Me(e))):!Me(t._f.ref))&&R(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],r,l,c=!0,u=!0)=>{if(l&&r){if(o.action=!0,u&&Array.isArray(I(s,e))){const t=r(I(s,e),l.argA,l.argB);c&&ye(s,e,t)}if(d.errors&&u&&Array.isArray(I(n.errors,e))){const t=r(I(n.errors,e),l.argA,l.argB);c&&ye(n.errors,e,t),((e,t)=>{!F(I(e,t)).length&&we(e,t)})(n.errors,e)}if(d.touchedFields&&u&&Array.isArray(I(n.touchedFields,e))){const t=r(I(n.touchedFields,e),l.argA,l.argB);c&&ye(n.touchedFields,e,t)}d.dirtyFields&&(n.dirtyFields=Fe(a,i)),f.state.next({isDirty:k(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ye(i,e,t)},_getFieldArray:t=>F(I(o.mount?i:a,t,e.shouldUnregister?I(a,t,[]):[])),_subjects:f,_proxyFormState:d,get _fields(){return s},get _formValues(){return i},get _stateFlags(){return o},set _stateFlags(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return n},set _formState(e){n=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:P,register:z,handleSubmit:(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let o=!0,c=je(i);f.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:e,values:t}=await j();n.errors=e,c=t}else await w(s);se(n.errors)?(f.state.next({errors:{},isSubmitting:!0}),await e(c,a)):(t&&await t({...n.errors},a),r.shouldFocusError&&ge(s,(e=>I(n.errors,e)),l.mount))}catch(e){throw o=!1,e}finally{n.isSubmitted=!0,f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:se(n.errors)&&o,submitCount:n.submitCount+1,errors:n.errors})}},watch:(e,t)=>de(e)?f.watch.subscribe({next:r=>e(S(void 0,t),r)}):S(e,t,!0),setValue:N,getValues:M,reset:(t,r={})=>{const c=t||a,u=je(c),p=t&&!se(t)?u:a;if(r.keepDefaultValues||(a=c),!r.keepValues){if(r.keepDirtyValues)for(const e of l.mount)I(n.dirtyFields,e)?ye(p,e,I(i,e)):N(e,I(p,e));else{if(Pe&&$(t))for(const e of l.mount){const t=I(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{Te(e)&&e.closest("form").reset();break}catch(e){}}}s={}}i=e.shouldUnregister?r.keepDefaultValues?je(a):{}:u,f.array.next({values:p}),f.watch.next({values:p})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!r.keepIsValid,o.watch=!!e.shouldUnregister,f.state.next({submitCount:r.keepSubmitCount?n.submitCount:0,isDirty:r.keepDirty||r.keepDirtyValues?n.isDirty:!(!r.keepDefaultValues||Ce(t,a)),isSubmitted:!!r.keepIsSubmitted,dirtyFields:r.keepDirty||r.keepDirtyValues?n.dirtyFields:r.keepDefaultValues&&t?Fe(a,t):{},touchedFields:r.keepTouched?n.touchedFields:{},errors:r.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{I(s,e)&&($(t.defaultValue)?N(e,I(a,e)):(N(e,t.defaultValue),ye(a,e,t.defaultValue)),t.keepTouched||we(n.touchedFields,e),t.keepDirty||(we(n.dirtyFields,e),n.isDirty=t.defaultValue?k(e,I(a,e)):k()),t.keepError||(we(n.errors,e),d.isValid&&m()),f.state.next({...n}))},clearErrors:e=>{e?ie(e).forEach((e=>we(n.errors,e))):n.errors={},f.state.next({errors:n.errors})},unregister:R,setError:(e,t,r)=>{const a=(I(s,e,{_f:{}})._f||{}).ref;ye(n.errors,e,{...t,ref:a}),f.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},setFocus:(e,t={})=>{const r=I(s,e)._f,n=r.refs?r.refs[0]:r.ref;t.shouldSelect?n.select():n.focus()},getFieldState:B}}var Xe=function(){return r.useContext(S)},et=function(e){void 0===e&&(e=!1);var n=r.useState([]),s=n[0],a=n[1],i={dispatch:r.useCallback((function(e){return t.Cord.next(e)}),[])}.dispatch,o=r.useCallback((function(e){return i(t.Actions.addNotification(e))}),[i]),l=r.useCallback((function(e){return i(t.Actions.removeNotification(e))}),[i]);return r.useEffect((function(){if(e){var r=t.Notification.subscribe(a);return function(){return r.unsubscribe()}}}),[e,a]),{notifications:s,addNotification:o,removeNotification:l}},tt=function(){var e=Xe().translations,t=r.useCallback((function(t){var r=null==e?void 0:e[t];if(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.length?l(r,s):r}return t}),[e]);return{t:t}};function rt(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function nt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){rt(a,n,s,i,o,"next",e)}function o(e){rt(a,n,s,i,o,"throw",e)}i(void 0)}))}}var st={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var s=t&&t.prototype instanceof m?t:m,a=Object.create(s.prototype),i=new O(n||[]);return a._invoke=function(e,t,r){var n=d;return function(s,a){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===s)throw a;return D()}for(r.method=s,r.arg=a;;){var i=r.delegate;if(i){var o=C(i,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=u(e,t,r);if("normal"===l.type){if(n=r.done?h:f,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function m(){}function x(){}function y(){}var g={};l(g,a,(function(){return this}));var b=Object.getPrototypeOf,j=b&&b(b(T([])));j&&j!==r&&n.call(j,a)&&(g=j);var w=y.prototype=m.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(s,a,i,o){var l=u(e[s],e,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,o)}),(function(e){r("throw",e,i,o)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,o)}))}o(l.arg)}var s;this._invoke=function(e,n){function a(){return new t((function(t,s){r(e,n,t,s)}))}return s=s?s.then(a,a):a()}}function C(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var s=u(n,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,v;var a=s.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,i=function r(){for(;++s<e.length;)if(n.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:D}}function D(){return{value:t,done:!0}}return x.prototype=y,l(w,"constructor",y),l(y,"constructor",x),x.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(S.prototype),l(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,s,a){void 0===a&&(a=Promise);var i=new S(c(t,r,n,s),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),l(w,o,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function s(n,s){return o.type="throw",o.arg=e,r.next=n,s&&(r.method="next",r.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return s("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return s(i.catchLoc,!0);if(this.prev<i.finallyLoc)return s(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return s(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return s(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;N(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(st);var at=st.exports;function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lt=r.createContext(null),ct=function(e){var t=e.children,n=e.onAdd,s=e.onChange,a=e.onRemove,i=e.available,o=void 0===i?[]:i,l=e.showOneTimeAddress,c=e.availableCountries,u=void 0===c?[]:c,f=e.address,p=r.useState(f||null),h=p[0],v=p[1],m=r.useState(!1),x=m[0],y=m[1],g=r.useState(!1),b=g[0],j=g[1],w=r.useState([]),k=w[0],S=w[1],C=r.useState(o||[]),A=C[0],N=C[1],O=r.useState("search"),T=O[0],D=O[1],_=function(){var e=r.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),t=r.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),n=r.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:r.useCallback((function(){return sessionStorage.clear()}),[]),setItem:e,getItem:t,removeItem:n}}(),P=_.setItem,M=_.getItem;r.useEffect((function(){l&&N([].concat(o,k))}),[l,o,k]),r.useEffect((function(){var e=M("OneTimeAddress")&&JSON.parse(M("OneTimeAddress").value);x&&(S(e||[]),D((null==o?void 0:o.length)>0||(null==e?void 0:e.length)>0?"search":"addNew"))}),[x]);var E=r.useMemo((function(){return{address:f,availableAddresses:A,showOneTimeAddress:l,availableCountries:u,selectedAddress:h,setSelectedAddress:v,setOneTimeAddressList:S,isAddressDialogVisible:x,setAddressDialogVisible:y,isRemoveAddressDialogVisible:b,setRemoveAddressDialogVisible:j,selectedTab:T,setSelectedTab:D}}),[f,A,l,u,h,x,b,T]);return d.exports.jsx(lt.Provider,{value:ot(ot({},E),{},{handleAddOneTimeAddress:function(e){v(e),n(e),P("OneTimeAddress",JSON.stringify([].concat(k,[e]))),y(!1)},handleChange:function(){h.id?s(h):n(h),y(!1)},handleRemove:function(e){a(e),j(!1)}}),children:t})},ut=function(){return r.useContext(lt)},dt="vanguard.checkout.address.cta.change",ft="vanguard.checkout.address.cta.add",pt="vanguard.checkout.address.formTitle",ht="vanguard.checkout.address.name",vt="vanguard.checkout.address.required",mt="vanguard.checkout.address.line1",xt="vanguard.checkout.address.line2",yt="vanguard.checkout.address.zipcode",gt="vanguard.checkout.address.cityTown",bt="vanguard.checkout.address.country",jt="vanguard.checkout.address.cta.cancel",wt="vanguard.checkout.address.search",kt="vanguard.checkout.address.addNew",St="vanguard.cart.overlay.delete",Ct="vanguard.confirmationDialog.message";function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ot=function(){var e=tt().t,t=te(),s=t.register,a=t.setValue,i=t.control,o=t.formState,l=r.useRef(null),c=ut().availableCountries,u=o.errors,f=s("streetName",{required:e(vt)}),p=r.useMemo((function(){return c.map((function(e){return{label:e.name,value:e.isocode}}))}),[c]),h=r.useState({}),v=h[0],m=h[1];r.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var n=new google.maps.places.Autocomplete(l.current,{fields:["address_components"]});n.setComponentRestrictions({country:p.map((function(e){return e.value.toString()}))}),n.addListener("place_changed",(function(){var e,t=((null==(e=n.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});m(t),Object.keys(t).forEach((function(e){return a(e,t[e])}))}))}}),[a,p]);var x=function(e,t){var r;a(e,t),m(Nt(Nt({},v),{},((r={})[e]=t,r)))};return d.exports.jsxs("div",{"data-testid":"addAddress",className:"h-96",children:[d.exports.jsxs("div",{className:"pb-4 space-y-2",children:[d.exports.jsx(n.TextInput,Nt(Nt({},s("companyName",{required:e(vt)})),{},{label:e(ht)+"*",testid:"companyNameInput",autoComplete:"organization",maxlength:40,error:null==u?void 0:u.companyName})),d.exports.jsx(n.TextInput,Nt(Nt({},s("companyName2")),{},{testid:"companyName2Input",maxlength:40}))]}),d.exports.jsxs("div",{className:"flex space-x-2 pb-2",children:[d.exports.jsx("div",{className:"w-4/5",children:d.exports.jsx(n.TextInput,Nt(Nt({},f),{},{ref:function(e){f.ref(e),l.current=e},testid:"streetNameInput",label:e(mt)+"*",autoComplete:"street-address",maxlength:60,error:null==u?void 0:u.streetName,onChange:function(e){return x("streetName",e.target.value)},value:null==v?void 0:v.streetName}))}),d.exports.jsx("div",{className:"w-1/5",children:d.exports.jsx(n.TextInput,Nt(Nt({},s("streetNumber",{required:e(vt)})),{},{testid:"streetNumberInput",label:e(xt)+"*",error:null==u?void 0:u.streetNumber,maxlength:12,autoComplete:"street-address",onChange:function(e){return x("streetNumber",e.target.value)},value:null==v?void 0:v.streetNumber}))})]}),d.exports.jsxs("div",{className:"flex space-x-2 pb-2",children:[d.exports.jsx("div",{className:"w-1/5",children:d.exports.jsx(n.TextInput,Nt(Nt({},s("zipCode",{required:e(vt)})),{},{testid:"zipCodeInput",label:e(yt)+"*",error:null==u?void 0:u.zipCode,maxlength:10,autoComplete:"postal-code",onChange:function(e){return x("zipCode",e.target.value)},value:null==v?void 0:v.zipCode}))}),d.exports.jsx("div",{className:"w-4/5",children:d.exports.jsx(n.TextInput,Nt(Nt({},s("city",{required:e(vt)})),{},{testid:"cityInput",label:e(gt)+"*",error:null==u?void 0:u.city,maxlength:40,autoComplete:"address-level2",onChange:function(e){return x("city",e.target.value)},value:null==v?void 0:v.city}))})]}),d.exports.jsx(he,{control:i,name:"country",rules:{required:!0},render:function(t){var r=t.field;return d.exports.jsx(n.Select,{label:e(bt)+"*",value:null==v?void 0:v.country,testid:"countryInput",options:p,error:null==u?void 0:u.country,onChange:function(e){r.onChange(e.target.value),x("country",e.target.value)}})}})]})},Tt=function(e){var t=e.address,s=r.useMemo((function(){var e;return{company:null==t?void 0:t.companyName,imprint:[null==t?void 0:t.line1,null==t?void 0:t.line2].join(" "),region:[null==t?void 0:t.postalCode,null==t?void 0:t.town].join(" "),country:null==t||null==(e=t.country)?void 0:e.name,first_name:null==t?void 0:t.first_name,last_name:null==t?void 0:t.last_name}}),[t]);return d.exports.jsxs("div",{"data-testid":"addressPreview",children:[(null==s?void 0:s.company)&&d.exports.jsx(n.Text,{testid:"company",children:null==s?void 0:s.company}),((null==s?void 0:s.first_name)||(null==s?void 0:s.last_name))&&d.exports.jsxs(n.Text,{testid:"name",children:[null==s?void 0:s.first_name," ",null==s?void 0:s.last_name]}),(null==s?void 0:s.imprint)&&d.exports.jsx(n.Text,{testid:"imprint",children:null==s?void 0:s.imprint}),(null==s?void 0:s.region)&&d.exports.jsx(n.Text,{testid:"region",children:null==s?void 0:s.region}),(null==s?void 0:s.country)&&d.exports.jsx(n.Text,{testid:"country",children:null==s?void 0:s.country})]})},Dt=function(){var e=ut(),t=e.availableAddresses,s=e.selectedAddress,a=e.setSelectedAddress,i=r.useState(""),l=i[0],c=i[1],u=function(e,t){return e.id&&t.id?e.id===t.id:e.companyName.trim()===t.companyName.trim()&&e.line1.trim()===t.line1.trim()&&e.line2.trim()===t.line2.trim()&&e.town.trim()===t.town.trim()&&e.postalCode===t.postalCode&&JSON.stringify(e.country)===JSON.stringify(t.country)};return d.exports.jsxs("div",{"data-testid":"searchAddress",className:"h-96",children:[d.exports.jsx(n.TextInput,{testid:"searchInput",value:l,onChange:function(e){var t=e.target.value;c(t)},icon:{type:"search"}}),d.exports.jsx("div",{className:"max-h-80 overflow-y-auto mt-2","data-testid":"list",children:t.filter((function(e){return(null==l?void 0:l.length)<3||e.companyName.toLowerCase().includes(l.toLowerCase())})).map((function(e,t){return d.exports.jsx("div",{className:o.default("h-1/3","p-3","cursor-pointer","border-l-4",s&&{"hover:border-gray-300":!u(e,s),"border-primary":u(e,s)}),onClick:function(){return a(e)},"data-testid":"item",children:d.exports.jsx(Tt,{address:e})},t)}))})]})};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=function(){var e=tt().t,t=ut(),r=t.availableAddresses,s=t.showOneTimeAddress,a=t.isAddressDialogVisible,o=t.availableCountries,l=t.setAddressDialogVisible,c=t.handleChange,u=t.handleAddOneTimeAddress,f=t.selectedTab,p=t.setSelectedTab,h=function(e={}){const t=i.default.useRef(),[r,n]=i.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Ze(e),formState:r};const s=t.current.control,a=i.default.useCallback((e=>{ae(e,s._proxyFormState,!0)&&(s._formState={...s._formState,...e},n({...s._formState}))}),[s]);return le({subject:s._subjects.state,callback:a}),i.default.useEffect((()=>{s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.current.formState=ne(r,s._proxyFormState),t.current}(),v=function(e){var t={companyName:(e.companyName+" "+e.companyName2).trim(),line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:o.find((function(t){return t.isocode===e.country}))};u(t)};return d.exports.jsxs(n.Dialog,{title:e(pt),isOpen:a,onClose:function(){return l(!1)},testid:"addressDialog",children:[(null==r?void 0:r.length)>0&&s&&d.exports.jsxs(n.TabLayout,{initialKey:f,onSelectTab:function(e){return p(e)},children:[d.exports.jsx(n.TabLayout.Tab,{testid:"searchTab",tabKey:"search",title:e(wt)}),d.exports.jsx(n.TabLayout.Tab,{testid:"addNewTab",tabKey:"addNew",title:e(kt)})]}),d.exports.jsx(re,Pt(Pt({},h),{},{children:"search"===f?d.exports.jsx(Dt,{}):d.exports.jsx(Ot,{})})),d.exports.jsxs("div",{className:"flex flex-row mt-6 space-x-4 justify-end",children:[d.exports.jsx(n.Button,{variant:"outlined",testid:"cancelButton",onClick:function(){return l(!1),void h.reset()},children:e("vanguard.checkout.address.cancel")}),d.exports.jsx(n.Button,{testid:"confirmButton",onClick:function(){return"search"===f?c():h.handleSubmit(v)()},children:e("vanguard.checkout.address.confirm")})]})]})},Et=function(e){var t=e.hasRemove,r=ut(),s=r.address,a=r.availableAddresses,i=r.showOneTimeAddress,o=r.setAddressDialogVisible,l=r.setRemoveAddressDialogVisible,c=tt().t,u=(null==a?void 0:a.length)>1||i;return d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx(Tt,{address:s}),d.exports.jsxs("div",{className:"flex divide-x space-x-4",children:[u&&d.exports.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return o(!0)},children:c(s?dt:ft)}),s&&t&&d.exports.jsx(n.Button,{testid:"removeAddressButton",variant:"text",onClick:function(){return l(!0)},children:c(St)})]})]})},Vt=function(){var e=tt().t,t=ut(),r=t.setRemoveAddressDialogVisible,s=t.isRemoveAddressDialogVisible,a=t.handleRemove,i=t.address;return d.exports.jsxs(n.Dialog,{title:e("vanguard.cart.delete"),testid:"deleteAddressDialog",isOpen:s,onClose:function(){return r(!1)},children:[d.exports.jsx(n.Text,{children:e(Ct)}),d.exports.jsxs("div",{className:"flex flex-row mt-8 space-x-4 justify-end",children:[d.exports.jsx(n.Button,{testid:"cancelButton",variant:"outlined",onClick:function(){return r(!1)},children:e(jt)}),d.exports.jsx(n.Button,{testid:"confirmButton",onClick:function(){return a(i)},children:e(St)})]})]})};function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var It=function(e){var t=Object.assign({},e);return d.exports.jsxs(ct,$t($t({},t),{},{children:[d.exports.jsx(Et,{hasRemove:!!t.onRemove}),d.exports.jsx(Mt,{}),d.exports.jsx(Vt,{})]}))},Lt={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",i="hour",o="day",l="week",c="month",u="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},x=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},y={s:x,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+x(n,2,"0")+":"+x(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,c),a=r-s<0,i=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:o,D:f,h:i,m:a,s:s,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=m;var j=function(e){return e instanceof C},w=function e(t,r,n){var s;if(!t)return g;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(s=a),r&&(b[a]=r,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var o=t.name;b[o]=t,s=o}return!n&&s&&(g=s),s||!n&&g},k=function(e,t){if(j(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new C(r)},S=y;S.l=w,S.i=j,S.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=w(e.locale,null,!0),this.parse(e)}var x=m.prototype;return x.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},x.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},x.$utils=function(){return S},x.isValid=function(){return!(this.$d.toString()===p)},x.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},x.isAfter=function(e,t){return k(e)<this.startOf(t)},x.isBefore=function(e,t){return this.endOf(t)<k(e)},x.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(e,t){var r=this,n=!!S.u(t)||t,u=S.p(e),p=function(e,t){var s=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(o)},h=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},v=this.$W,m=this.$M,x=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return n?p(1,0):p(31,11);case c:return n?p(1,m):p(0,m+1);case l:var g=this.$locale().weekStart||0,b=(v<g?v+7:v)-g;return p(n?x-b:x+(6-b),m);case o:case f:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case s:return h(y+"Milliseconds",3);default:return this.clone()}},x.endOf=function(e){return this.startOf(e,!1)},x.$set=function(e,t){var r,l=S.p(e),u="set"+(this.$u?"UTC":""),p=(r={},r[o]=u+"Date",r[f]=u+"Date",r[c]=u+"Month",r[d]=u+"FullYear",r[i]=u+"Hours",r[a]=u+"Minutes",r[s]=u+"Seconds",r[n]=u+"Milliseconds",r)[l],h=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var v=this.clone().set(f,1);v.$d[p](h),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},x.set=function(e,t){return this.clone().$set(e,t)},x.get=function(e){return this[S.p(e)]()},x.add=function(n,u){var f,p=this;n=Number(n);var h=S.p(u),v=function(e){var t=k(p);return S.w(t.date(t.date()+Math.round(e*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===o)return v(1);if(h===l)return v(7);var m=(f={},f[a]=t,f[i]=r,f[s]=e,f)[h]||1,x=this.$d.getTime()+n*m;return S.w(x,this)},x.subtract=function(e,t){return this.add(-1*e,t)},x.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),a=this.$H,i=this.$m,o=this.$M,l=r.weekdays,c=r.months,u=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},d=function(e){return S.s(a%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:S.s(o+1,2,"0"),MMM:u(r.monthsShort,o,c,3),MMMM:u(c,o),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:u(r.weekdaysMin,this.$W,l,2),ddd:u(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:S.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:S.s(i,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:s};return n.replace(v,(function(e,t){return t||h[e]||s.replace(":","")}))},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(n,f,p){var h,v=S.p(f),m=k(n),x=(m.utcOffset()-this.utcOffset())*t,y=this-m,g=S.m(this,m);return g=(h={},h[d]=g/12,h[c]=g,h[u]=g/3,h[l]=(y-x)/6048e5,h[o]=(y-x)/864e5,h[i]=y/r,h[a]=y/t,h[s]=y/e,h)[v]||y,p?g:S.a(g)},x.daysInMonth=function(){return this.endOf(c).$D},x.$locale=function(){return b[this.$L]},x.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},x.clone=function(){return S.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},m}(),A=C.prototype;return k.prototype=A,[["$ms",n],["$s",s],["$m",a],["$H",i],["$W",o],["$M",c],["$y",d],["$D",f]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,C,k),e.$i=!0),k},k.locale=w,k.isDayjs=j,k.unix=function(e){return k(1e3*e)},k.en=b[g],k.Ls=b,k.p={},k}()}(Lt);var Ut,Bt,Rt=Lt.exports,zt="vanguard.checkout.item.sales.totalPrice",qt="vanguard.checkout.item.sales.totalPrice.tooltip",Yt="vanguard.checkout.item.sales.quantity",Wt="vanguard.checkout.ean",Ht="vanguard.checkout.item.sales.listPrice",Gt="vanguard.checkout.item.sales.userPrice",Qt="vanguard.checkout.item.sales.discount",Jt="vanguard.checkout.entry.sales.netPricePerUnit",Kt="vanguard.checkout.committedDelivery",Zt=function(e){var t=e.deliveryInfos,r=void 0===t?[]:t,s=tt().t,a=r.filter((function(e){return e.receiptDate})).map((function(e){return e.receiptDate})).sort().map((function(e){return Rt(e).format("DD.MM.YYYY")})),i=a[0],o=a[a.length-1];return d.exports.jsxs("div",{className:"w-52","data-testid":"committedDelivery",children:[d.exports.jsx(n.Text,{className:"mb-2",bold:!0,textalign:"right",testid:"label",children:s(Kt)}),d.exports.jsx("div",{className:"flex justify-end space-x-2","data-testid":"value",children:a.length>0?d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx(n.Icon,{type:"greenTick"}),d.exports.jsx(n.Text,{type:"span",children:i===o?i:i+" - "+o})]}):d.exports.jsx(n.Text,{children:"-"})})]})},Xt=function(e){var t=e.imageSrc,r=e.imageAlt,s=e.productName,a=e.marketSystemName,i=e.ean,l=e.badgeColor,c=e.badgeText,u=e.positionText,f=e.medias,p=tt().t;return d.exports.jsxs("div",{className:"flex w-96 mr-auto",children:[d.exports.jsx(n.Image,{src:t,alt:r,fullWidth:!1,className:"w-20 h-20"}),d.exports.jsxs("div",{className:"ml-2",children:[d.exports.jsxs("div",{children:[d.exports.jsx(n.Text,{color:"primary",type:"span",textsize:"md",testid:"name",children:s}),a&&d.exports.jsx(n.Text,{color:"primary",type:"span",textsize:"md",bold:!0,testid:"masterMarketSystem",children:a})]}),d.exports.jsxs("div",{className:"flex space-x-2 items-center",children:[d.exports.jsx(n.Text,{type:"span",textsize:"sm",color:"white",className:o.default("px-2 rounded-md capitalize mb-1 mt-1",{"bg-green-500":"green"===l,"bg-secondarypalette-700":"red"===l}),testid:"masterBadge",children:c}),i&&d.exports.jsx(n.Text,{textsize:"sm",testid:"ean",children:p(Wt)+": "+i})]}),f&&d.exports.jsx("div",{className:"flex flex-wrap","data-testid":"uploadedFiles",children:f.map((function(e){return d.exports.jsx(n.Chip,{label:e.realFileName,onClick:function(){return window.open(e.url,"_blank")},className:"mr-1 mt-1"},e.code)}))}),u&&d.exports.jsx(n.Text,{color:"green-600",type:"span",textsize:"sm",testid:"positionText",children:u})]})]})},er=function(e){var t=e.amount,r=e.unitName,s=tt().t;return d.exports.jsxs("div",{className:"w-20","data-testid":"quantity",children:[d.exports.jsx(n.Text,{className:"mb-2",bold:!0,textalign:"right",testid:"label",children:s(Yt)}),d.exports.jsxs(n.Text,{textalign:"right",testid:"value",children:[t," ",r]})]})},tr=function(e){var t=e.totalPrice,r=tt().t;return d.exports.jsxs("div",{className:"w-48 text-right","data-testid":"totalPrice",children:[d.exports.jsxs(n.Text,{bold:!0,testid:"label",children:[r(zt),d.exports.jsx(n.Text,{className:"inline-block",type:"span",textalign:"left",children:d.exports.jsx(n.Tooltip,{position:"right",render:r(qt),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1"})})})]}),d.exports.jsx("div",{className:"mt-2 text-right","data-testid":"value",children:d.exports.jsx(n.Price,{price:t})})]})},rr=function(e){var t=e.gross,r=e.net,s=e.discount,a=tt().t;return d.exports.jsxs("div",{className:"w-64","data-testid":"unitPrice",children:[d.exports.jsx(n.Text,{className:"mb-2",bold:!0,textalign:"right",testid:"header",children:a(Jt)}),d.exports.jsxs(n.Text,{textalign:"right",testid:"grossPrice",children:[a(Ht)+": ",d.exports.jsx(n.Price,{price:t})]}),d.exports.jsxs(n.Text,{textalign:"right",testid:"netPrice",children:[a(Gt)+": ",d.exports.jsx(n.Price,{price:r})]}),!!s&&d.exports.jsxs(n.Text,{color:"green-600",textalign:"right",testid:"discount",children:[a(Qt)," ",s,"%"]})]})},nr="vanguard.cart.totalPrice",sr="vanguard.cart.quantity",ar="vanguard.cart.items",ir="vanguard.cart.product.notAvailable",or="vanguard.cart.lockPosition",lr="vanguard.cart.configurationData",cr=function(e){var t=e.lockingPositions,s=r.useState(!1),a=s[0],i=s[1];return d.exports.jsx("div",{onClick:function(){"Range"!=window.getSelection().type&&i(!a)},className:"pr-6 space-y-3",children:d.exports.jsx(n.Text,{type:"span",testid:"lockingPosition",children:!a&&t.length>12?t.slice(0,12).join(", ")+" ...":t.join(", ")})})},ur=function(e){var t=e.name,r=e.infos,s=void 0===r?[]:r;return d.exports.jsxs("div",{className:"pr-6 space-y-3","data-testid":"configuration",children:[t&&d.exports.jsx(n.Text,{testid:"name",children:t}),d.exports.jsx(n.List,{isCompressed:!0,children:s.map((function(e,t){return d.exports.jsx(n.List.Item,{name:e.configurationLabel,value:e.configurationValue},t)}))})]})},dr=function(e){var t=e.name,r=e.isEntryAvailable,s=e.type,a=tt().t;return d.exports.jsxs("div",{className:"flex items-center",children:[!r&&d.exports.jsx(n.Tooltip,{render:a(ir),position:"right",children:d.exports.jsx(n.Icon,{type:"warning",className:"pr-2"})}),d.exports.jsx(n.Icon,{type:{KEY:"locked",CYLINDER:"cylinder",SECURITYCARD:"card"}[s],className:"pr-2"}),d.exports.jsx(n.Text,{type:"span",testid:"name",children:t})]})},fr=function(e){var t=e.userPrice,r=e.listPrice,s=e.discount,a=tt().t;return d.exports.jsxs("div",{className:"justify-center space-y-1",children:[d.exports.jsx(n.Text,{bold:!0,className:"text-center",color:"primary",testid:"price",children:d.exports.jsx(n.Price,{price:t||r})}),!!s&&d.exports.jsxs("div",{className:"flex justify-center",children:[d.exports.jsx(n.Text,{type:"span",textsize:"sm",className:"line-through gray-100 pr-2",testid:"listPrice",children:d.exports.jsx(n.Price,{price:r})}),d.exports.jsx(n.Text,{type:"span",textsize:"sm",color:"green-600",testid:"discount",children:a("vanguard.cart.reduction",""+s)})]})]})},pr=function(e){var t=e.subpositions,s=e.isExpanded,a=void 0!==s&&s,i=tt().t,o=function(e){var t=tt().t,n=e.map((function(e){var t;return{product:{product:null==e?void 0:e.product.name,isEntryAvailable:!(null!=e&&null!=(t=e.product)&&t.sapBlocked)&&(null==e?void 0:e.product.purchasable)&&(null==e?void 0:e.product.ecommerceEligible),type:null==e?void 0:e.product.materialType},lockingPositions:null==e?void 0:e.lockingPositions,configuration:{name:null==e?void 0:e.configurationName,infos:null==e?void 0:e.configurationInfos},quantity:null==e?void 0:e.quantity,price:{userPrice:null==e?void 0:e.userPrice,totalPrice:null==e?void 0:e.totalListPrice,discount:null==e?void 0:e.discountInPercentage}}})),s=r.useMemo((function(){return[{Header:t(ar),disableSortBy:!0,width:50,maxWidth:50,accessor:"product",Cell:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,r,n,s=e.cell;return d.exports.jsx(dr,{name:null==s||null==(t=s.value)?void 0:t.product,isEntryAvailable:null==s||null==(r=s.value)?void 0:r.isEntryAvailable,type:null==s||null==(n=s.value)?void 0:n.type})}))},{Header:t(or),disableSortBy:!0,width:50,maxWidth:50,accessor:"lockingPositions",Cell:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.cell;return d.exports.jsx(cr,{lockingPositions:null==t?void 0:t.value})}))},{Header:t(lr),disableSortBy:!0,accessor:"configuration",width:150,maxWidth:150,Cell:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,r,n=e.cell;return d.exports.jsx(ur,{name:null==n||null==(t=n.value)?void 0:t.name,infos:null==n||null==(r=n.value)?void 0:r.infos})}))},{Header:t(sr),disableSortBy:!0,width:20,maxWidth:20,accessor:"quantity",Cell:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return e.cell.value+"x"}))},{Header:t(nr),disableSortBy:!0,accessor:"price",Cell:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,r,n,s=e.cell;return d.exports.jsx(fr,{userPrice:null==s||null==(t=s.value)?void 0:t.userPrice,listPrice:null==s||null==(r=s.value)?void 0:r.totalPrice,discount:null==s||null==(n=s.value)?void 0:n.discount})}))}]}),[t]);return{data:n,columns:s}}(t),l=o.columns,c=o.data,u=r.useState(a),f=u[0],p=u[1];return d.exports.jsxs("div",{"data-testid":"subpositions",children:[f&&d.exports.jsx("div",{className:"px-4",children:d.exports.jsx(n.Table,{columns:l,data:c})}),t.length>0&&d.exports.jsxs("button",{"data-testid":"expandButton",className:"flex bg-gray-100 w-full text-xs space-x-1 justify-center",onClick:function(){return p(!f)},children:[d.exports.jsx(n.Icon,{type:f?"arrowup":"arrowdown",size:"xs",className:"self-center"}),d.exports.jsx(n.Text,{color:"primary",textsize:"xs",bold:!0,children:t.length+" "+i(ar)})]})]})},hr=function(e){var t=e.groupedEntries,n=r.useMemo((function(){return t.filter((function(e){return"headPosition"===Object.keys(e)[0]})).map((function(e){var t,r,n,s=e.headPosition;return d.exports.jsx("li",{children:d.exports.jsxs("div",{className:"shadow rounded",children:[d.exports.jsxs("div",{className:"flex p-2 gap-x-4 bg-lighter",children:[d.exports.jsx(Xt,{imageSrc:null==s||null==(t=s.thumbnail)?void 0:t.url,imageAlt:null==s||null==(r=s.thumbnail)?void 0:r.altText,productName:null==s?void 0:s.code,marketSystemName:(null==s?void 0:s.marketSystemName)&&" ("+(null==s?void 0:s.marketSystemName)+")",badgeColor:"green",badgeText:null==s?void 0:s.businessCase.replace(/_/g," ").toLowerCase(),positionText:null==s||null==(n=s.positionText)?void 0:n.textContent}),d.exports.jsx(er,{amount:null==s?void 0:s.quantity}),d.exports.jsx(tr,{totalPrice:null==s?void 0:s.price})]}),(null==s?void 0:s.entries)&&d.exports.jsx(pr,{subpositions:s.entries})]})},null==s?void 0:s.code)}))}),[t]),s=r.useMemo((function(){return t.filter((function(e){return"singleEntry"===Object.keys(e)[0]})).map((function(e){var t,r,n,s,a,i,o,l,c,u,f,p,h=e.singleEntry;return d.exports.jsx("li",{children:d.exports.jsxs("div",{className:"shadow rounded flex p-2 gap-x-4 bg-lighter",children:[d.exports.jsx(Xt,{imageSrc:null==h||null==(r=h.product)||null==(n=r.thumbnails)||null==(s=n[0])?void 0:s.url,imageAlt:null==h||null==(a=h.product)||null==(i=a.thumbnails)||null==(o=i[0])?void 0:o.altText,productName:null==h||null==(l=h.product)?void 0:l.name,badgeText:null==h||null==(c=h.product)?void 0:c.code.replace(/^0+/,""),badgeColor:"red",ean:null==h||null==(u=h.product)?void 0:u.ean,positionText:null==h||null==(f=h.positionText)?void 0:f.textContent,medias:null==h?void 0:h.medias}),d.exports.jsx(rr,{gross:null==h?void 0:h.listPricePerUnit,net:null==h?void 0:h.netPricePerUnit,discount:null==h?void 0:h.discountInPercentage}),d.exports.jsx(er,{amount:null==h?void 0:h.quantity,unitName:null==h||null==(p=h.displayUnit)?void 0:p.name}),d.exports.jsx(tr,{totalPrice:null==h?void 0:h.userPrice}),d.exports.jsx(Zt,{deliveryInfos:null==h?void 0:h.committedDeliveryInfos})]})},null==h||null==(t=h.product)?void 0:t.code)}))}),[t]);return d.exports.jsxs("ul",{className:"space-y-4 py-2 px-8","data-testid":"finalReview",children:[n,s]})};!function(e){e.Copy="copy",e.Move="move"}(Ut||(Ut={})),function(e){e.private="private",e.public="public"}(Bt||(Bt={}));var vr=navigator.userAgent.includes("Firefox"),mr=function(){return t.store.hooks.useIsFetching()&&d.exports.jsx("div",{className:o.default("w-full h-full fixed flex items-center justify-center top-0 left-0 z-10 backdrop-filter backdrop-blur",{"bg-gray-200 opacity-60":vr}),"data-testid":"overlayLoader",children:d.exports.jsx(n.Icon,{size:"xl",type:"loader"})})},xr="vanguard.cart.calculatePrice.success",yr="vanguard.cart.calculatePrice.error",gr="vanguard.checkout.endUserInformation.tile",br="vanguard.checkout.notification",jr="vanguard.checkout.notification.placeOrder.error",wr=r.createContext(null),kr=function(e){var n=e.children,s=Xe().cartCode,a=r.useState(null),i=a[0],o=a[1],l=et().addNotification,c=tt().t,u=t.store.api.checkout.useGetCheckoutQuery({cartCode:s}).data,f=t.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:s}).data;return r.useEffect((function(){l({identifier:"deliveryDateWarning",message:c(br),variant:"warning",testid:"checkout.deliveryDateWarning"})}),[l,c]),d.exports.jsx(wr.Provider,{value:{checkout:u,alternativeCountries:f||[],setSelectedPaymentMethod:o,selectedPaymentMethod:i},children:n})},Sr=function(){return r.useContext(wr)},Cr=function(){var e=tt().t,s=Sr().alternativeCountries,a=function(){var e=Sr().checkout,n=Xe().cartCode,s=et().addNotification,a=tt().t,i=t.store.api.checkout.useGetAdditionalAddressTypesQuery({orderCode:n}).data,o=t.store.api.checkout.useAddAdditionalAddressMutation()[0],l=t.store.api.checkout.useDeleteAdditionalAddressMutation()[0],c=r.useCallback(function(){var e=nt(at.mark((function e(t,r){var i,l,c,u,d,f;return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.companyName,l=r.line1,c=r.line2,u=r.postalCode,d=r.country,f=r.town,e.prev=1,e.next=4,o({cartCode:n,additionalAddressTypeCode:t,companyName:i,line1:l,line2:c,postalCode:u,country:d,town:f,isoCode:d.isocode});case 4:s({message:a("vanguard.checkout.addressUpdate.success"),variant:"success",testid:"checkout.addressUpdateSuccess"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s({message:a("vanguard.checkout.addressUpdate.error"),variant:"error",testid:"checkout.addressUpdateError"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,s,n,a]),u=r.useCallback(function(){var e=nt(at.mark((function e(t){return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({cartCode:n,id:t});case 3:s({message:a("vanguard.checkout.addressDelete.success"),variant:"success",testid:"checkout.addressDeleteSuccess"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({message:a("vanguard.checkout.addressDelete.error"),variant:"error",testid:"checkout.addressDeleteError"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[s,n,l,a]);return{additionalAddressTypes:i||[],additionalAddresses:(null==e?void 0:e.additionalAddresses)||[],handleAddressChange:c,handleAddressRemove:u}}(),i=a.additionalAddressTypes,o=a.additionalAddresses,l=a.handleAddressChange,c=a.handleAddressRemove;return d.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"additionalAddresses",children:[d.exports.jsx(n.Text,{textsize:"lg",bold:!0,testid:"header",children:e(gr)}),d.exports.jsx("div",{className:"flex flex-wrap pl-6","data-testid":"additionalAddresses",children:i.map((function(e){return d.exports.jsxs("div",{className:"pt-4 pr-16","data-testid":"address-"+e.code,children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e.name}),d.exports.jsx(It,{showOneTimeAddress:!0,address:o.find((function(t){return t.additionalAddressTypeCode===e.code})),availableCountries:s,onAdd:function(t){return l(e.code,t)},onChange:function(t){return l(e.code,t)},onRemove:function(e){return c(e.id)}})]},e.code)}))})]})},Ar=function(e){var t=e.deliveryMethods;return d.exports.jsx("div",{className:"space-y-1",children:t.map((function(e,t){var r=e.name,s=e.description;return d.exports.jsxs("div",{children:[d.exports.jsx(n.Text,{type:"span",textsize:"sm",bold:!0,testid:"name",children:r+": "}),d.exports.jsx(n.Text,{type:"span",textsize:"sm",testid:"description",children:s})]},t)}))})},Nr=function(e){var t=Rt(),r=t.day();return 5===r&&e?t=t.add(3,"day"):6===r?t=t.add(2,"day"):(0===r||e)&&(t=t.add(1,"day")),t.toDate()},Or=function(){var e=tt().t,s=r.useRef(),a=function(){var e,n,s=Sr().checkout,a=Xe(),i=a.cartCode,o=a.endOfDeliveryDay,l=a.oneTimeAddressMandatory,c=r.useState(""),u=c[0],d=c[1],f=r.useState(null),p=f[0],h=f[1],v=r.useState(null),m=v[0],x=v[1],y=et().addNotification,g=tt().t,b=t.store.api.checkout.useGetAddressesQuery({cartCode:i}).data,j=t.store.api.checkout.useGetDeliveryMethodQuery({cartCode:i}).data,w=t.store.api.checkout.useGetDeliveryTypeQuery({cartCode:i}).data,k=t.store.api.checkout.useGetB2BUnitQuery(null,{skip:l}).data,S=t.store.api.checkout.useSetOneTimeAddressMutation()[0],C=t.store.api.checkout.useSetDeliveryAddressMutation()[0],A=t.store.api.checkout.useSetDeliveryMethodMutation()[0],N=r.useCallback(function(){var e=nt(at.mark((function e(t,r){var n;return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r?Nr(o):null,e.prev=1,e.next=4,A({cartCode:i,code:t,preferredDeliveryDate:n}).unwrap();case 4:y({message:g("vanguard.checkout.deliverymethod.success"),variant:"success",testid:"checkout.deliveryMethodSuccess"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y({message:g("vanguard.checkout.deliverymethod.error"),variant:"error",testid:"checkout.deliveryMethodError"});case 10:x(n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,A,i,y,g]),O=r.useCallback(function(){var e=nt(at.mark((function e(t){var r;return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A({cartCode:i,code:null==s||null==(r=s.deliveryMode)?void 0:r.code,preferredDeliveryDate:t}).unwrap();case 3:y({message:g("vanguard.checkout.preferreddeliverydate.success"),variant:"success",testid:"checkout.preferredDeliveryDateSuccess"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y({message:g("vanguard.checkout.preferreddeliverydate.error"),variant:"error",testid:"checkout.preferredDeliveryDateError"});case 9:x(t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[A,i,null==s||null==(e=s.deliveryMode)?void 0:e.code,y,g]),T=r.useCallback(function(){var e=nt(at.mark((function e(t){var r,n,s,a,o,l;return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.companyName,n=t.line1,s=t.line2,a=t.postalCode,o=t.country,l=t.town,e.prev=1,e.next=4,S({cartCode:i,companyName:r,line1:n,line2:s,postalCode:a,country:o,town:l,isoCode:o.isocode}).unwrap();case 4:y({message:g("vanguard.checkout.addressUpdate.success"),variant:"success",testid:"checkout.addressUpdateSuccess"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y({message:g("vanguard.checkout.addressUpdate.error"),variant:"error",testid:"checkout.addressUpdateError"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[S,i,y,g]),D=r.useCallback(function(){var e=nt(at.mark((function e(t){return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C({cartCode:i,addressId:t.id}).unwrap();case 3:y({message:g("vanguard.checkout.addressUpdate.success"),variant:"success",testid:"checkout.addressUpdateSuccess"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y({message:g("vanguard.checkout.addressUpdate.error"),variant:"error",testid:"checkout.addressUpdateError"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[C,i,y,g]),_=r.useMemo((function(){var e=[].concat(b||[],(null==k?void 0:k.addresses)||[]).filter((function(e){return null==e?void 0:e.shippingAddress})),t=e.map((function(e){return e.id}));return e.filter((function(e,r){return!t.includes(e.id,r+1)}))}),[null==k?void 0:k.addresses,b]),P=r.useMemo((function(){var e,t;return{selectedMethod:null!=(e=null==s||null==(t=s.deliveryMode)?void 0:t.code)?e:"",selectedType:u,address:null==s?void 0:s.deliveryAddress,deliveryMethods:j||[],deliveryTypes:(null==w?void 0:w.deliveryTypes)||[],deliveryAddresses:_,deliveryDate:m,setSelectedType:d,handleDeliveryMethodUpdate:N,setDeliveryDate:O,handleAddressUpdate:D,handleOneTimeAddressUpdate:T}}),[null==s||null==(n=s.deliveryMode)?void 0:n.code,null==s?void 0:s.deliveryAddress,u,j,null==w?void 0:w.deliveryTypes,_,m,N,O,D,T]);return r.useEffect((function(){var e;!u&&null!=w&&null!=(e=w.deliveryTypes)&&e.length&&d(w.deliveryTypes[0])}),[j,w,u]),r.useEffect((function(){var e=null==s?void 0:s.deliveryMode;if(e&&!p){var t="EX"===e.code||e.showPreferredDate?Nr(o):null;x(t),h(!0)}}),[null==s?void 0:s.deliveryMode,o,p]),P}(),i=a.address,o=a.deliveryDate,l=a.deliveryTypes,c=a.deliveryMethods,u=a.selectedMethod,f=a.selectedType,p=a.deliveryAddresses,h=a.setDeliveryDate,v=a.setSelectedType,m=a.handleDeliveryMethodUpdate,x=a.handleAddressUpdate,y=a.handleOneTimeAddressUpdate,g=Sr().alternativeCountries,b=Xe(),j=b.oneTimeAddressMandatory,w=b.language;return d.exports.jsxs("div",{ref:s,className:"shadow-md p-6 space-y-2","data-testid":"delivery",children:[d.exports.jsx(n.Text,{textsize:"lg",bold:!0,testid:"header",children:e("vanguard.checkout.delivery.tile")}),d.exports.jsxs("div",{className:"flex justify-around",children:[d.exports.jsxs("div",{className:"w-1/2 pl-6 space-y-1",children:[d.exports.jsxs("div",{"data-testid":"method",children:[d.exports.jsxs("div",{className:"flex",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e("vanguard.checkout.delivery.method")}),d.exports.jsx(n.Tooltip,{position:"right",render:d.exports.jsx(Ar,{deliveryMethods:c}),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1"})})]}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:c.map((function(e){var t=e.code,r=e.name,s=e.showPreferredDate;return d.exports.jsx(n.Radio,{name:"method",value:t,label:r,variant:"tertiary",checked:u===t,onChange:function(){return m(t,s)},testid:t},"method-"+t)}))})]}),l.length>0&&d.exports.jsxs("div",{"data-testid":"type",children:[d.exports.jsxs("div",{className:"flex",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e("vanguard.checkout.delivery.type")}),d.exports.jsx(n.Tooltip,{position:"right",render:e("vanguard.checkout.delivery.type.TooltipTitle"),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1"})})]}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:l.map((function(e){return d.exports.jsx(n.Radio,{name:"type",value:e,label:e,checked:f===e,variant:"tertiary",onChange:function(){return v(e)}},"type-"+e)}))})]}),d.exports.jsxs("div",{className:"max-w-max","data-testid":"shippingDate",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e("vanguard.checkout.delivery.shippingDate")}),d.exports.jsx(n.DatePicker,{minDate:new Date,selected:o,onChange:h,locale:w.split("_")[0],dateFormat:"dd.MM.yyyy"})]})]}),d.exports.jsxs("div",{className:"w-1/2","data-testid":"recipient",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e("vanguard.checkout.delivery.recipient")+(j?"*":"")}),d.exports.jsx(It,{address:i,available:p,availableCountries:g,onAdd:y,onChange:x,showOneTimeAddress:!0})]})]})]})},Tr=function(e){var t=e.consents,r=e.setChecked,s=e.checked;return d.exports.jsx("div",{"data-testid":"consents",children:null==t?void 0:t.map((function(e,t){var a,i;return d.exports.jsxs("div",{className:"flex items-center space-x-2","data-testid":"consent",children:[d.exports.jsx("div",{className:"m-2",children:d.exports.jsx(n.Checkbox,{checked:s[t],onChange:function(){var e=[].concat(s);e[t]=!e[t],r(e)}})}),d.exports.jsx(n.Text,{testid:"label",children:null==(a=e.text)||null==(i=a.split("{}"))?void 0:i.map((function(t,r){return d.exports.jsxs(n.Text,{type:"span",textsize:"tiny",children:[t+" ",e.links[r]&&d.exports.jsx(n.Link,{target:"_blank",href:e.links[r].url,children:e.links[r].text})]},t+r)}))})]},e.text)}))})},Dr=function(){var e=Xe(),s=e.cartCode,a=e.showCalculateDelivery,i=e.oneTimeAddressMandatory,o=e.showAdditionalInformation,l=e.showExpressCostDescription,c=tt().t,f=function(){var e=Sr(),n=e.selectedPaymentMethod,s=e.checkout,a=Xe().cartCode,i=tt().t,o=et().addNotification,l=r.useState(""),c=l[0],d=l[1],f=r.useState(""),p=f[0],h=f[1],v=t.store.api.checkout.usePlaceOrderMutation()[0],m=r.useCallback(nt(at.mark((function e(){var t,r;return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({cartCode:a,customerReferenceId:c,paymentModeCode:n,checkoutCommission:p}).unwrap();case 3:t=e.sent,r=t.code,window.location.href=u("/checkout/orderConfirmation/"+r,"redirect"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),o({message:i(jr),variant:"error",testid:"checkout.placeOrderError"}),console.error("err",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[v,a,c,n,p,o,i]);return r.useMemo((function(){return{price:null==s?void 0:s.simulatedTotalPrice,discount:null==s?void 0:s.simulatedDiscount,deliveryAddress:null==s?void 0:s.deliveryAddress,simulated:null==s?void 0:s.simulated,orderNumber:c,commissionNumber:p,setCommissionNumber:h,setOrderNumber:d,onPlaceOrder:m}}),[null==s?void 0:s.simulatedTotalPrice,null==s?void 0:s.simulatedDiscount,null==s?void 0:s.deliveryAddress,null==s?void 0:s.simulated,c,p,m])}(),p=f.price,h=f.discount,v=f.orderNumber,m=f.commissionNumber,x=f.deliveryAddress,y=f.simulated,g=f.setCommissionNumber,b=f.setOrderNumber,j=f.onPlaceOrder,w=et().addNotification,k=function(){var e=Xe().cartCode,n=r.useState([]),s=n[0],a=n[1],i=t.store.api.checkout.useGetConsentsQuery({cartCode:e}).data;return r.useEffect((function(){i&&a(Array(i.consents.length).fill(!1))}),[i]),{consents:null==i?void 0:i.consents,checked:s,setChecked:a}}(),S=k.checked,C=k.setChecked,A=k.consents,N=t.store.api.cart.useSimulateCartMutation()[0],O=function(){var e=nt(at.mark((function e(){return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({cartCode:s,forceSync:!0}).unwrap();case 3:w({message:c(xr),variant:"success",testid:"checkout.calculatePriceSuccess"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),w({message:c(yr),variant:"error",testid:"checkout.calculatePriceError"}),console.error("Simulation cart failed.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return d.exports.jsxs("div",{className:"space-y-6","data-testid":"order",children:[d.exports.jsx("div",{className:"shadow-md space-between p-6",children:d.exports.jsxs("div",{className:"flex justify-between mb-2",children:[d.exports.jsxs("div",{className:"w-3/6 space-y-3",children:[d.exports.jsxs("div",{className:"flex space-x-3",children:[d.exports.jsx(n.TextInput,{label:c("vanguard.checkout.customerOrderNumber")+"*",placeholder:"",value:v,onChange:function(e){return b(e.target.value)},maxlength:35,testid:"orderNumberInput"}),d.exports.jsx(n.TextInput,{label:c("vanguard.checkout.customerCommissionNumber"),placeholder:"",value:m,onChange:function(e){return g(e.target.value)},maxlength:35,testid:"commissionNumber"})]}),d.exports.jsx(Tr,{checked:S,setChecked:C,consents:A})]}),d.exports.jsxs("div",{className:"w-2/6 space-y-1",children:[p&&d.exports.jsxs(n.Text,{bold:!0,textsize:"xl",color:"primary",textalign:"right",testid:"priceTotal",children:[c("vanguard.checkout.total.price")+" ",d.exports.jsx(n.Price,{price:p})]}),h&&d.exports.jsxs(n.Text,{textsize:"xl",color:"green-600",textalign:"right",testid:"totalDiscount",children:[c("vanguard.checkout.total.discount")+" ",d.exports.jsx(n.Price,{price:h})]}),l&&d.exports.jsx(n.Text,{textsize:"tiny",textalign:"right",testid:"expressCost",children:c("vanguard.checkout.total.expressCost")}),o&&d.exports.jsx(n.Text,{textsize:"tiny",textalign:"right",testid:"additionalInformation",children:c("vanguard.checkout.total.general")})]})]})}),d.exports.jsxs("div",{className:"flex justify-end space-x-2",children:[a&&d.exports.jsx(n.Button,{onClick:O,testid:"calculatePriceButton",isDisabled:y,variant:"outlined",iconType:"simulateprice",children:c("vanguard.checkout.calculatePriceAndDelivery")}),d.exports.jsx(n.Button,{testid:"orderButton",isDisabled:S.some((function(e){return!1===e}))||!v||!x&&i,onClick:j,iconType:"arrow",children:c("vanguard.checkout.placeOrder")})]})]})},_r=function(){var e,s=function(){var e=Sr(),n=e.checkout,s=e.setSelectedPaymentMethod,a=e.selectedPaymentMethod,i=Xe().cartCode,o=et().addNotification,l=tt().t,c=t.store.api.checkout.useGetB2BUnitQuery(null).data,u=t.store.api.checkout.useGetBillingAddressesQuery({cartCode:i}).data,d=t.store.api.checkout.useSetBillingAddressMutation()[0],f=r.useCallback(function(){var e=nt(at.mark((function e(t){return at.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({cartCode:i,id:t.id}).unwrap();case 3:o({message:l("vanguard.checkout.addressUpdate.success"),variant:"success",testid:"checkout.addressUpdateSuccess"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o({message:l("vanguard.checkout.addressUpdate.error"),variant:"error",testid:"checkout.addressUpdateError"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[d,i,o,l]);return r.useEffect((function(){var e;(null==c||null==(e=c.defaultPaymentMethods)?void 0:e.length)>0&&s(c.defaultPaymentMethods[0].code)}),[c,s]),{billingAddress:null==n?void 0:n.billingAddress,availableBillingAddresses:u||[],defaultAddress:(u||[]).find((function(e){var t;return e.id===(null==n||null==(t=n.billingAddress)?void 0:t.id)})),defaultPaymentTerm:null==c?void 0:c.defaultPaymentTerm,defaultPaymentMethods:null==c?void 0:c.defaultPaymentMethods,setSelectedPaymentMethod:s,selectedPaymentMethod:a,handleBillingAddressUpdate:f}}(),a=s.billingAddress,i=s.defaultPaymentTerm,l=s.defaultPaymentMethods,c=s.selectedPaymentMethod,u=s.availableBillingAddresses,f=s.defaultAddress,p=s.setSelectedPaymentMethod,h=s.handleBillingAddressUpdate,v=Sr().alternativeCountries,m=tt().t,x=Xe(),y=x.showBillingAddress,g=x.showPaymentMethod;return d.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"payment",children:[d.exports.jsx(n.Text,{textsize:"lg",bold:!0,testid:"title",children:m("vanguard.checkout.payment.tile")}),d.exports.jsxs("div",{className:"flex justify-around",children:[d.exports.jsxs("div",{className:"w-1/2 pl-6",children:[(null==l?void 0:l.length)>0&&g&&d.exports.jsxs("div",{className:"mb-2 space-y-1","data-testid":"method",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:m("vanguard.checkout.payment.method")}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:l.map((function(e){var t=e.code,r=e.description;return d.exports.jsx(n.Radio,{variant:"tertiary",value:t,checked:c===t,label:r,onChange:function(){return p(t)}},t)}))})]}),d.exports.jsxs("div",{"data-testid":"terms",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:m("vanguard.checkout.payment.termsOfPayment")}),d.exports.jsx(n.Text,{color:o.default({"green-600":i}),testid:"description",children:null!=(e=null==i?void 0:i.description)?e:m("vanguard.checkout.paymentterm.default")})]})]}),d.exports.jsx("div",{className:"w-1/2",children:y&&d.exports.jsxs("div",{"data-testid":"billing",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:m("vanguard.checkout.payment.billing")}),d.exports.jsx(It,{availableCountries:v,address:a,available:u,onChange:h,defaultAddress:f})]})})]})]})},Pr=function(){var e=Sr().checkout;return null!=e&&e.groupedEntries?d.exports.jsx(hr,{groupedEntries:null==e?void 0:e.groupedEntries}):null},Mr=function(){var e=tt().t,t=Xe(),r=t.showAdditionalAddressTile,s=t.showPaymentTile;return d.exports.jsxs("div",{className:"space-y-6","data-testid":"checkout",children:[d.exports.jsx(n.Text,{type:"h5",testid:"header",children:e("vanguard.checkout.header")}),s&&d.exports.jsx(_r,{}),d.exports.jsx(Or,{}),r&&d.exports.jsx(Cr,{}),d.exports.jsx(Pr,{}),d.exports.jsx(Dr,{}),d.exports.jsx(mr,{})]})};!function(r,n){var s='[data-react-app="'+n+'"]',a=document.querySelector(s);if(!a)throw new Error(s+" is missing");var i=document.createElement("div");a.appendChild(i),e.render(function(e,r){return d.exports.jsx(t.StoreProvider,{children:d.exports.jsx(N,{appId:r,children:d.exports.jsx(C,{appId:r,children:d.exports.jsx(e,{})})})})}(r,n),i)}((function(){return d.exports.jsx(kr,{children:d.exports.jsx(Mr,{})})}),"checkout")}));
