!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,s){"use strict";var i,a,o,l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},u=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{}),c={};function d(){if(a)return i;a=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}return i=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(s,i){for(var a,o,l=n(s),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))t.call(a,c)&&(l[c]=a[c]);if(e){o=e(a);for(var d=0;d<o.length;d++)r.call(a,o[d])&&(l[o[d]]=a[o[d]])}}return l},i}!function(e){e.exports=function(){if(o)return c;o=1,d();var e=t,r=60103;if(c.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;r=n("react.element"),c.Fragment=n("react.fragment")}var s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,l={},u=null,c=null;for(o in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,o)&&!a.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:r,type:e,key:u,ref:c,props:l,_owner:s.current}}return c.jsx=l,c.jsxs=l,c}()}({get exports(){return u},set exports(e){u=e}});var f=t.createContext(null),m=function(e){var r=e.appId,n=e.children,s=t.useMemo((function(){var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");try{return JSON.parse(n.innerHTML)}catch(e){throw Error("Couldn't load config of #"+r)}}),[r]);return u.jsx(f.Provider,{value:s,children:n})},h=t.createContext(null),p=function(e){var r=e.children,n=t.useState(new URL(location.href));return u.jsx(h.Provider,{value:n,children:r})};var v=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},y=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=v(e)}return r};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function g(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}function b(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=e=>"checkbox"===e.type,w=e=>e instanceof Date,k=e=>null==e;const C=e=>"object"==typeof e;var T=e=>!k(e)&&!Array.isArray(e)&&C(e)&&!w(e),S=e=>T(e)&&e.target?j(e.target)?e.target.checked:e.target.value:e,_=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),A=e=>Array.isArray(e)?e.filter(Boolean):[],N=e=>void 0===e,D=(e,t,r)=>{if(!t||!T(e))return r;const n=A(t.split(/[,[\].]+?/)).reduce(((e,t)=>k(e)?e:e[t]),e);return N(n)||n===e?N(e[t])?r:e[t]:n};const O="blur",P="focusout",E="change",M="onBlur",V="onChange",F="onSubmit",I="onTouched",$="all",L="max",z="min",B="maxLength",U="minLength",R="pattern",q="required",Y="validate",G=t.createContext(null),H=()=>t.useContext(G);var W=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const s=i;return t._proxyFormState[s]!==$&&(t._proxyFormState[s]=!n||$),r&&(r[s]=!0),e[s]}});return s},Q=e=>T(e)&&!Object.keys(e).length,J=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return Q(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((e=>t[e]===(!n||$)))},K=e=>Array.isArray(e)?e:[e],Z=(e,t,r)=>r&&t?e===t:!e||!t||e===t||K(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function X(e){const r=t.useRef(e);r.current=e,t.useEffect((()=>{const t=!e.disabled&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}var ee=e=>"string"==typeof e,te=(e,t,r,n,s)=>ee(e)?(n&&t.watch.add(e),D(r,e,s)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),D(r,e)))):(n&&(t.watchAll=!0),r),re="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function ne(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(re&&(e instanceof Blob||e instanceof FileList)||!r&&!T(e))return e;if(t=r?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return T(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)t[r]=ne(e[r]);else t=e}return t}function se(e){const r=H(),{name:n,control:s=r.control,shouldUnregister:i}=e,a=_(s._names.array,n),o=function(e){const r=H(),{control:n=r.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=t.useRef(s);l.current=s,X({disabled:a,subject:n._subjects.watch,next:e=>{Z(l.current,e.name,o)&&c(ne(te(l.current,n._names,e.values||n._formValues,!1,i)))}});const[u,c]=t.useState(n._getWatch(s,i));return t.useEffect((()=>n._removeUnmounted())),u}({control:s,name:n,defaultValue:D(s._formValues,n,D(s._defaultValues,n,e.defaultValue)),exact:!0}),l=function(e){const r=H(),{control:n=r.control,disabled:s,name:i,exact:a}=e||{},[o,l]=t.useState(n._formState),u=t.useRef(!0),c=t.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=t.useRef(i);return d.current=i,X({disabled:s,next:e=>u.current&&Z(d.current,e.name,a)&&J(e,c.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),t.useEffect((()=>{u.current=!0;const e=n._proxyFormState.isDirty&&n._getDirty();return e!==n._formState.isDirty&&n._subjects.state.next({isDirty:e}),c.current.isValid&&n._updateValid(!0),()=>{u.current=!1}}),[n]),W(o,n,c.current,!1)}({control:s,name:n}),u=t.useRef(s.register(n,{...e.rules,value:o}));return t.useEffect((()=>{const e=(e,t)=>{const r=D(s._fields,e);r&&(r._f.mount=t)};return e(n,!0),()=>{const t=s._options.shouldUnregister||i;(a?t&&!s._stateFlags.action:t)?s.unregister(n):e(n,!1)}}),[n,s,a,i]),{field:{name:n,value:o,onChange:t.useCallback((e=>u.current.onChange({target:{value:S(e),name:n},type:E})),[n]),onBlur:t.useCallback((()=>u.current.onBlur({target:{value:D(s._formValues,n),name:n},type:O})),[n,s]),ref:e=>{const t=D(s._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!D(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!D(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!D(l.touchedFields,n)},error:{enumerable:!0,get:()=>D(l.errors,n)}})}}const ie=e=>e.render(se(e));var ae=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},oe=e=>/^\w*$/.test(e),le=e=>A(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ue(e,t,r){let n=-1;const s=oe(t)?[t]:le(t),i=s.length,a=i-1;for(;++n<i;){const t=s[n];let i=r;if(n!==a){const r=e[t];i=T(r)||Array.isArray(r)?r:isNaN(+s[n+1])?{}:[]}e[t]=i,e=e[t]}return e}const ce=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=D(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else T(n)&&ce(n,t)}}};var de=e=>({isOnSubmit:!e||e===F,isOnBlur:e===M,isOnChange:e===V,isOnAll:e===$,isOnTouch:e===I}),fe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),me=(e,t,r)=>{const n=A(D(e,r));return ue(n,"root",t[r]),ue(e,r,n),e},he=e=>"boolean"==typeof e,pe=e=>"file"===e.type,ve=e=>"function"==typeof e,ye=e=>{if(!re)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},xe=e=>ee(e)||t.isValidElement(e),ge=e=>"radio"===e.type,be=e=>e instanceof RegExp;const je={value:!1,isValid:!1},we={value:!0,isValid:!0};var ke=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!N(e[0].attributes.value)?N(e[0].value)||""===e[0].value?we:{value:e[0].value,isValid:!0}:we:je}return je};const Ce={isValid:!1,value:null};var Te=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Ce):Ce;function Se(e,t,r="validate"){if(xe(e)||Array.isArray(e)&&e.every(xe)||he(e)&&!e)return{type:r,message:xe(e)?e:"",ref:t}}var _e=e=>T(e)&&!be(e)?e:{value:e,message:""},Ae=async(e,t,r,n,s)=>{const{ref:i,refs:a,required:o,maxLength:l,minLength:u,min:c,max:d,pattern:f,validate:m,name:h,valueAsNumber:p,mount:v,disabled:y}=e._f,x=D(t,h);if(!v||y)return{};const g=a?a[0]:i,b=e=>{n&&g.reportValidity&&(g.setCustomValidity(he(e)?"":e||""),g.reportValidity())},w={},C=ge(i),S=j(i),_=C||S,A=(p||pe(i))&&N(i.value)&&N(x)||ye(i)&&""===i.value||""===x||Array.isArray(x)&&!x.length,O=ae.bind(null,h,r,w),P=(e,t,r,n=B,s=U)=>{const a=e?t:r;w[h]={type:e?n:s,message:a,ref:i,...O(e?n:s,a)}};if(s?!Array.isArray(x)||!x.length:o&&(!_&&(A||k(x))||he(x)&&!x||S&&!ke(a).isValid||C&&!Te(a).isValid)){const{value:e,message:t}=xe(o)?{value:!!o,message:o}:_e(o);if(e&&(w[h]={type:q,message:t,ref:g,...O(q,t)},!r))return b(t),w}if(!(A||k(c)&&k(d))){let e,t;const n=_e(d),s=_e(c);if(k(x)||isNaN(x)){const r=i.valueAsDate||new Date(x),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;ee(n.value)&&x&&(e=o?a(x)>a(n.value):l?x>n.value:r>new Date(n.value)),ee(s.value)&&x&&(t=o?a(x)<a(s.value):l?x<s.value:r<new Date(s.value))}else{const r=i.valueAsNumber||(x?+x:x);k(n.value)||(e=r>n.value),k(s.value)||(t=r<s.value)}if((e||t)&&(P(!!e,n.message,s.message,L,z),!r))return b(w[h].message),w}if((l||u)&&!A&&(ee(x)||s&&Array.isArray(x))){const e=_e(l),t=_e(u),n=!k(e.value)&&x.length>e.value,s=!k(t.value)&&x.length<t.value;if((n||s)&&(P(n,e.message,t.message),!r))return b(w[h].message),w}if(f&&!A&&ee(x)){const{value:e,message:t}=_e(f);if(be(e)&&!x.match(e)&&(w[h]={type:R,message:t,ref:i,...O(R,t)},!r))return b(t),w}if(m)if(ve(m)){const e=Se(await m(x,t),g);if(e&&(w[h]={...e,...O(Y,e.message)},!r))return b(e.message),w}else if(T(m)){let e={};for(const n in m){if(!Q(e)&&!r)break;const s=Se(await m[n](x,t),g,n);s&&(e={...s,...O(n,s.message)},b(s.message),r&&(w[h]=e))}if(!Q(e)&&(w[h]={ref:g,...e},!r))return w}return b(!0),w};function Ne(e,t){const r=Array.isArray(t)?t:oe(t)?[t]:le(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=N(e)?n++:e[t[n++]];return e}(e,r),s=r.length-1,i=r[s];return n&&delete n[i],0!==s&&(T(n)&&Q(n)||Array.isArray(n)&&function(e){for(const t in e)if(!N(e[t]))return!1;return!0}(n))&&Ne(e,r.slice(0,-1)),e}function De(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Oe=e=>k(e)||!C(e);function Pe(e,t){if(Oe(e)||Oe(t))return e===t;if(w(e)&&w(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(w(r)&&w(e)||T(r)&&T(e)||Array.isArray(r)&&Array.isArray(e)?!Pe(r,e):r!==e)return!1}}return!0}var Ee=e=>"select-multiple"===e.type,Me=e=>ye(e)&&e.isConnected,Ve=e=>{for(const t in e)if(ve(e[t]))return!0;return!1};function Fe(e,t={}){const r=Array.isArray(e);if(T(e)||r)for(const r in e)Array.isArray(e[r])||T(e[r])&&!Ve(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Fe(e[r],t[r])):k(e[r])||(t[r]=!0);return t}function Ie(e,t,r){const n=Array.isArray(e);if(T(e)||n)for(const n in e)Array.isArray(e[n])||T(e[n])&&!Ve(e[n])?N(t)||Oe(r[n])?r[n]=Array.isArray(e[n])?Fe(e[n],[]):{...Fe(e[n])}:Ie(e[n],k(t)?{}:t[n],r[n]):Pe(e[n],t[n])?delete r[n]:r[n]=!0;return r}var $e=(e,t)=>Ie(e,t,Fe(t)),Le=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>N(e)?e:t?""===e?NaN:e?+e:e:r&&ee(e)?new Date(e):n?n(e):e;function ze(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return pe(t)?t.files:ge(t)?Te(e.refs).value:Ee(t)?[...t.selectedOptions].map((({value:e})=>e)):j(t)?ke(e.refs).value:Le(N(t.value)?e.ref.value:t.value,e)}var Be=e=>N(e)?e:be(e)?e.source:T(e)?be(e.value)?e.value.source:e.value:e;function Ue(e,t,r){const n=D(e,r);if(n||oe(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),i=D(t,n),a=D(e,n);if(i&&!Array.isArray(i)&&r!==n)return{name:r};if(a&&a.type)return{name:n,error:a};s.pop()}return{name:r}}const Re={mode:F,reValidateMode:V,shouldFocusError:!0};function qe(e={},t){let r={...Re,...e};const n=e.resetOptions&&e.resetOptions.keepDirtyValues;let s,i={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},o=(T(r.defaultValues)||T(r.values))&&ne(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:ne(o),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={watch:De(),array:De(),state:De()},h=de(r.mode),p=de(r.reValidateMode),v=r.criteriaMode===$,y=async e=>{if(f.isValid||e){const e=r.resolver?Q((await E()).errors):await M(a,!0);e!==i.isValid&&m.state.next({isValid:e})}},x=e=>f.isValidating&&m.state.next({isValidating:e}),g=(e,t,r,n)=>{const s=D(a,e);if(s){const i=D(l,e,N(r)?D(o,e):r);N(i)||n&&n.defaultChecked||t?ue(l,e,t?i:ze(s._f)):I(e,i),u.mount&&y()}},b=(e,t,r,n,s)=>{let a=!1,l=!1;const u={name:e};if(!r||n){f.isDirty&&(l=i.isDirty,i.isDirty=u.isDirty=V(),a=l!==u.isDirty);const r=Pe(D(o,e),t);l=D(i.dirtyFields,e),r?Ne(i.dirtyFields,e):ue(i.dirtyFields,e,!0),u.dirtyFields=i.dirtyFields,a=a||f.dirtyFields&&l!==!r}if(r){const t=D(i.touchedFields,e);t||(ue(i.touchedFields,e,r),u.touchedFields=i.touchedFields,a=a||f.touchedFields&&t!==r)}return a&&s&&m.state.next(u),a?u:{}},C=(t,r,n,a)=>{const o=D(i.errors,t),l=f.isValid&&he(r)&&i.isValid!==r;var u;if(e.delayError&&n?(u=()=>((e,t)=>{ue(i.errors,e,t),m.state.next({errors:i.errors})})(t,n),s=e=>{clearTimeout(d),d=window.setTimeout(u,e)},s(e.delayError)):(clearTimeout(d),s=null,n?ue(i.errors,t,n):Ne(i.errors,t)),(n?!Pe(o,n):o)||!Q(a)||l){const e={...a,...l&&he(r)?{isValid:r}:{},errors:i.errors,name:t};i={...i,...e},m.state.next(e)}x(!1)},E=async e=>await r.resolver(l,r.context,((e,t,r,n)=>{const s={};for(const r of e){const e=D(t,r);e&&ue(s,r,e._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||c.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),M=async(e,t,n={valid:!0})=>{for(const s in e){const a=e[s];if(a){const{_f:e,...s}=a;if(e){const s=c.array.has(e.name),o=await Ae(a,l,v,r.shouldUseNativeValidation,s);if(o[e.name]&&(n.valid=!1,t))break;!t&&(D(o,e.name)?s?me(i.errors,o,e.name):ue(i.errors,e.name,o[e.name]):Ne(i.errors,e.name))}s&&await M(s,t,n)}}return n.valid},V=(e,t)=>(e&&t&&ue(l,e,t),!Pe(R(),o)),F=(e,t,r)=>te(e,c,{...u.mount?l:N(t)?o:ee(e)?{[e]:t}:t},r,t),I=(e,t,r={})=>{const n=D(a,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&ue(l,e,Le(t,r)),s=ye(r.ref)&&k(t)?"":t,Ee(r.ref)?[...r.ref.options].forEach((e=>e.selected=s.includes(e.value))):r.refs?j(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach((e=>e.checked=e.value===s)):pe(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||m.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&b(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&U(e)},L=(e,t,r)=>{for(const n in t){const s=t[n],i=`${e}.${n}`,o=D(a,i);!c.array.has(e)&&Oe(s)&&(!o||o._f)||w(s)?I(i,s,r):L(i,s,r)}},z=(e,r,n={})=>{const s=D(a,e),i=c.array.has(e),d=ne(r);ue(l,e,d),i?(m.array.next({name:e,values:l}),(f.isDirty||f.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:$e(o,l),isDirty:V(e,d)})):!s||s._f||k(d)?I(e,d,n):L(e,d,n),fe(e,c)&&m.state.next({}),m.watch.next({name:e}),!u.mount&&t()},B=async e=>{const t=e.target;let n=t.name;const o=D(a,n);if(o){let d,g;const j=t.type?ze(o._f):S(e),w=e.type===O||e.type===P,k=!((u=o._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||r.resolver||D(i.errors,n)||o._f.deps)||((e,t,r,n,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:!(r?n.isOnChange:s.isOnChange)||e))(w,D(i.touchedFields,n),i.isSubmitted,p,h),T=fe(n,c,w);ue(l,n,j),w?(o._f.onBlur&&o._f.onBlur(e),s&&s(0)):o._f.onChange&&o._f.onChange(e);const _=b(n,j,w,!1),A=!Q(_)||T;if(!w&&m.watch.next({name:n,type:e.type}),k)return f.isValid&&y(),A&&m.state.next({name:n,...T?{}:_});if(!w&&T&&m.state.next({}),x(!0),r.resolver){const{errors:e}=await E([n]),t=Ue(i.errors,a,n),r=Ue(e,a,t.name||n);d=r.error,n=r.name,g=Q(e)}else d=(await Ae(o,l,v,r.shouldUseNativeValidation))[n],d?g=!1:f.isValid&&(g=await M(a,!0));o._f.deps&&U(o._f.deps),C(n,g,d,_)}var u},U=async(e,t={})=>{let n,s;const o=K(e);if(x(!0),r.resolver){const t=await(async e=>{const{errors:t}=await E();if(e)for(const r of e){const e=D(t,r);e?ue(i.errors,r,e):Ne(i.errors,r)}else i.errors=t;return t})(N(e)?e:o);n=Q(t),s=e?!o.some((e=>D(t,e))):n}else e?(s=(await Promise.all(o.map((async e=>{const t=D(a,e);return await M(t&&t._f?{[e]:t}:t)})))).every(Boolean),(s||i.isValid)&&y()):s=n=await M(a);return m.state.next({...!ee(e)||f.isValid&&n!==i.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:i.errors,isValidating:!1}),t.shouldFocus&&!s&&ce(a,(e=>e&&D(i.errors,e)),e?o:c.mount),s},R=e=>{const t={...o,...u.mount?l:{}};return N(e)?t:ee(e)?D(t,e):e.map((e=>D(t,e)))},q=(e,t)=>({invalid:!!D((t||i).errors,e),isDirty:!!D((t||i).dirtyFields,e),isTouched:!!D((t||i).touchedFields,e),error:D((t||i).errors,e)}),Y=(e,t={})=>{for(const n of e?K(e):c.mount)c.mount.delete(n),c.array.delete(n),D(a,n)&&(t.keepValue||(Ne(a,n),Ne(l,n)),!t.keepError&&Ne(i.errors,n),!t.keepDirty&&Ne(i.dirtyFields,n),!t.keepTouched&&Ne(i.touchedFields,n),!r.shouldUnregister&&!t.keepDefaultValue&&Ne(o,n));m.watch.next({}),m.state.next({...i,...t.keepDirty?{isDirty:V()}:{}}),!t.keepIsValid&&y()},G=(e,t={})=>{let n=D(a,e);const s=he(t.disabled);return ue(a,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),n?s&&ue(l,e,t.disabled?void 0:D(l,e,ze(n._f))):g(e,!0,t.value),{...s?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:Be(t.min),max:Be(t.max),minLength:Be(t.minLength),maxLength:Be(t.maxLength),pattern:Be(t.pattern)}:{},name:e,onChange:B,onBlur:B,ref:s=>{if(s){G(e,t),n=D(a,e);const r=N(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,i=(e=>ge(e)||j(e))(r),l=n._f.refs||[];if(i?l.find((e=>e===r)):r===n._f.ref)return;ue(a,e,{_f:{...n._f,...i?{refs:[...l.filter(Me),r,...Array.isArray(D(o,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),g(e,!1,void 0,r)}else n=D(a,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!_(c.array,e)||!u.action)&&c.unMount.add(e)}}},H=()=>r.shouldFocusError&&ce(a,(e=>e&&D(i.errors,e)),c.mount),W=(r,s={})=>{const d=r||o,h=ne(d),p=r&&!Q(r)?h:o;if(s.keepDefaultValues||(o=d),!s.keepValues){if(s.keepDirtyValues||n)for(const e of c.mount)D(i.dirtyFields,e)?ue(p,e,D(l,e)):z(e,D(p,e));else{if(re&&N(r))for(const e of c.mount){const t=D(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(ye(e)){const t=e.closest("form");if(t){t.reset();break}}}}a={}}l=e.shouldUnregister?s.keepDefaultValues?ne(o):{}:h,m.array.next({values:p}),m.watch.next({values:p})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!f.isValid||!!s.keepIsValid,u.watch=!!e.shouldUnregister,m.state.next({submitCount:s.keepSubmitCount?i.submitCount:0,isDirty:s.keepDirty||s.keepDirtyValues?i.isDirty:!(!s.keepDefaultValues||Pe(r,o)),isSubmitted:!!s.keepIsSubmitted&&i.isSubmitted,dirtyFields:s.keepDirty||s.keepDirtyValues?i.dirtyFields:s.keepDefaultValues&&r?$e(o,r):{},touchedFields:s.keepTouched?i.touchedFields:{},errors:s.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},J=(e,t)=>W(ve(e)?e(l):e,t);return ve(r.defaultValues)&&r.defaultValues().then((e=>{J(e,r.resetOptions),m.state.next({isLoading:!1})})),{control:{register:G,unregister:Y,getFieldState:q,_executeSchema:E,_focusError:H,_getWatch:F,_getDirty:V,_updateValid:y,_removeUnmounted:()=>{for(const e of c.unMount){const t=D(a,e);t&&(t._f.refs?t._f.refs.every((e=>!Me(e))):!Me(t._f.ref))&&Y(e)}c.unMount=new Set},_updateFieldArray:(e,t=[],r,n,s=!0,c=!0)=>{if(n&&r){if(u.action=!0,c&&Array.isArray(D(a,e))){const t=r(D(a,e),n.argA,n.argB);s&&ue(a,e,t)}if(c&&Array.isArray(D(i.errors,e))){const t=r(D(i.errors,e),n.argA,n.argB);s&&ue(i.errors,e,t),((e,t)=>{!A(D(e,t)).length&&Ne(e,t)})(i.errors,e)}if(f.touchedFields&&c&&Array.isArray(D(i.touchedFields,e))){const t=r(D(i.touchedFields,e),n.argA,n.argB);s&&ue(i.touchedFields,e,t)}f.dirtyFields&&(i.dirtyFields=$e(o,l)),m.state.next({name:e,isDirty:V(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else ue(l,e,t)},_getFieldArray:t=>A(D(u.mount?l:o,t,e.shouldUnregister?D(o,t,[]):[])),_reset:W,_updateFormState:e=>{i={...i,...e}},_subjects:m,_proxyFormState:f,get _fields(){return a},get _formValues(){return l},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return o},get _names(){return c},set _names(e){c=e},get _formState(){return i},set _formState(e){i=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:U,register:G,handleSubmit:(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let s=ne(l);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await E();i.errors=e,s=t}else await M(a);Ne(i.errors,"root"),Q(i.errors)?(m.state.next({errors:{}}),await e(s,n)):(t&&await t({...i.errors},n),H()),m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(i.errors),submitCount:i.submitCount+1,errors:i.errors})},watch:(e,t)=>ve(e)?m.watch.subscribe({next:r=>e(F(void 0,t),r)}):F(e,t,!0),setValue:z,getValues:R,reset:J,resetField:(e,t={})=>{D(a,e)&&(N(t.defaultValue)?z(e,D(o,e)):(z(e,t.defaultValue),ue(o,e,t.defaultValue)),t.keepTouched||Ne(i.touchedFields,e),t.keepDirty||(Ne(i.dirtyFields,e),i.isDirty=t.defaultValue?V(e,D(o,e)):V()),t.keepError||(Ne(i.errors,e),f.isValid&&y()),m.state.next({...i}))},clearErrors:e=>{e&&K(e).forEach((e=>Ne(i.errors,e))),m.state.next({errors:e?i.errors:{}})},unregister:Y,setError:(e,t,r)=>{const n=(D(a,e,{_f:{}})._f||{}).ref;ue(i.errors,e,{...t,ref:n}),m.state.next({name:e,errors:i.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},setFocus:(e,t={})=>{const r=D(a,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:q}}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(){var e=t.useContext(f),r=t.useCallback((function(t){var r,n=null==(r=e.translations)?void 0:r[t];if(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.length?l(n,i):n}return t}),[e]);return Ge(Ge({},e),{},{t:r})};function We(e,t,r,n,s,i,a){try{var o=e[i](a),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,s)}function Qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){We(i,n,s,a,o,"next",e)}function o(e){We(i,n,s,a,o,"throw",e)}a(void 0)}))}}var Je={},Ke={get exports(){return Je},set exports(e){Je=e}},Ze={};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return Ze},set exports(e){Ze=e}}),function(e){var t=Ze.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},s=Object.prototype,i=s.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var s=t&&t.prototype instanceof p?t:p,i=Object.create(s.prototype),o=new A(n||[]);return a(i,"_invoke",{value:C(e,r,o)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var h={};function p(){}function v(){}function y(){}var x={};d(x,l,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(N([])));b&&b!==s&&i.call(b,l)&&(x=b);var j=y.prototype=p.prototype=Object.create(x);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,r){function n(s,a,o,l){var u=m(e[s],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&i.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):r.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(u.arg)}var s;a(this,"_invoke",{value:function(e,t){function i(){return new r((function(r,s){n(e,t,r,s)}))}return s=s?s.then(i,i):i()}})}function C(e,t,r){var n="suspendedStart";return function(s,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw i;return D()}for(r.method=s,r.arg=i;;){var a=r.delegate;if(a){var o=T(a,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=m(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var s=m(n,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,h;var i=s.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=y,a(j,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=d(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},n.awrap=function(e){return{__await:e}},w(k.prototype),d(k.prototype,u,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,s,i){void 0===i&&(i=Promise);var a=new k(f(e,t,r,s),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(j),d(j,c,"Generator"),d(j,l,(function(){return this})),d(j,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;_(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ke);var Xe=Je(),et=Xe;try{regeneratorRuntime=Xe}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=Xe:Function("r","regeneratorRuntime = r")(Xe)}var tt="vanguard.checkout.address.cta.change",rt="vanguard.checkout.address.cta.add",nt="vanguard.checkout.address.formTitle",st="vanguard.checkout.address.name",it="vanguard.checkout.address.required",at="vanguard.checkout.address.line1",ot="vanguard.checkout.address.line2",lt="vanguard.checkout.address.zipcode",ut="vanguard.checkout.address.cityTown",ct="vanguard.checkout.address.country",dt="vanguard.checkout.address.cta.cancel",ft="vanguard.checkout.address.search",mt="vanguard.checkout.address.addNew",ht="vanguard.cart.overlay.delete",pt="vanguard.common.nameTitle",vt="vanguard.common.name.optionalNames",yt="vanguard.confirmationDialog.message",xt="vanguard.checkout.address.cancel",gt="vanguard.checkout.address.confirm",bt="vanguard.cart.delete",jt="vanguard.cart.totalPrice",wt="vanguard.cart.product.notAvailable",kt="vanguard.cart.positionText",Ct="vanguard.cart.reduction",Tt="vanguard.cart.summary.close",St="vanguard.cart.summary.open",_t="vanguard.cart.salesCommentLabel",At="vanguard.cart.emks.new_key_system",Nt="vanguard.cart.emks.extension",Dt="vanguard.cart.emks.reorder",Ot="vanguard.cart.emks.new_series",Pt="vanguard.checkout.item.sales.totalPrice",Et="vanguard.checkout.item.sales.totalPrice.tooltip",Mt="vanguard.checkout.item.sales.quantity",Vt="vanguard.checkout.ean",Ft="vanguard.checkout.item.sales.listPrice",It="vanguard.checkout.item.sales.userPrice",$t="vanguard.checkout.item.sales.discount",Lt="vanguard.checkout.entry.sales.netPricePerUnit",zt="vanguard.checkout.committedDelivery",Bt="vanguard.cart.quantityPerSet",Ut="vanguard.cart.quantityPerItem",Rt="vanguard.cart.items",qt="vanguard.cart.lockPosition",Yt="vanguard.cart.configurationData",Gt="vanguard.common.name.person",Ht="vanguard.common.name.company";function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jt=function(e){var r=e.form,s=e.availableCountries,i=e.titles,a=He().t,o=r.register,l=r.setValue,c=r.control,d=r.formState,f=r.watch,m=d.errors,h=f("titleCode"),p=t.useRef(null),v=o("streetName",{required:a(it)}),y=t.useMemo((function(){return s.map((function(e){return{label:e.name,value:e.isocode}}))}),[s]);return t.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var n=new google.maps.places.Autocomplete(p.current,{fields:["address_components"]});n.setComponentRestrictions({country:y.map((function(e){return e.value.toString()}))}),n.addListener("place_changed",(function(){var e,t=((null==(e=n.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});Object.keys(t).forEach((function(e){return l(e,t[e])}))}))}}),[l,y]),u.jsxs("form",{"data-testid":"addAddress",className:"space-y-1",children:[(null==i?void 0:i.length)>0&&u.jsx(ie,{control:c,name:"titleCode",render:function(e){var t=e.field;return u.jsx(n.Select,{label:""+a(pt),testid:"titleInput",options:null==i?void 0:i.map((function(e){return{label:e.name,value:e.code}})),error:Boolean(null==m?void 0:m.titleCode),value:t.value,onChange:t.onChange})}}),u.jsx(n.TextInput,Qt(Qt({},o("name1",{required:a(it)})),{},{label:a(st)+"*",testid:"nameInput1",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name1),placeholder:{"0001":a(Gt),"0002":a(Gt),"0003":a(Ht),"0004":a(Gt)}[h]})),u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(n.TextInput,Qt(Qt({},o("name2")),{},{testid:"nameInput2",label:a(vt),autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name2)})),u.jsx(n.TextInput,Qt(Qt({},o("name3")),{},{testid:"nameInput3",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name3)})),u.jsx(n.TextInput,Qt(Qt({},o("name4")),{},{testid:"nameInput4",autoComplete:"organization",maxlength:35,error:Boolean(null==m?void 0:m.name4)}))]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-10/12",children:u.jsx(n.TextInput,Qt(Qt({},v),{},{ref:function(e){v.ref(e),p.current=e},testid:"streetNameInput",label:a(at)+"*",autoComplete:"street-address",maxlength:60,error:Boolean(null==m?void 0:m.streetName),inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-2/12",children:u.jsx(n.TextInput,Qt(Qt({},o("streetNumber",{required:a(it)})),{},{testid:"streetNumberInput",label:a(ot)+"*",error:Boolean(null==m?void 0:m.streetNumber),maxlength:12,autoComplete:"street-address",inputClassName:"w-full"}))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[u.jsx("div",{className:"sm:w-2/12",children:u.jsx(n.TextInput,Qt(Qt({},o("zipCode",{required:a(it)})),{},{testid:"zipCodeInput",label:a(lt)+"*",error:Boolean(null==m?void 0:m.zipCode),maxlength:10,autoComplete:"postal-code",inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-10/12",children:u.jsx(n.TextInput,Qt(Qt({},o("city",{required:a(it)})),{},{testid:"cityInput",label:a(ut)+"*",error:Boolean(null==m?void 0:m.city),maxlength:40,autoComplete:"address-level2",inputClassName:"w-full"}))})]}),u.jsx("div",{className:"w-12/12",children:u.jsx(ie,{control:c,name:"country",rules:{required:!0},render:function(e){var t=e.field;return u.jsx(n.Select,{label:a(ct)+"*",testid:"countryInput",options:y,error:Boolean(null==m?void 0:m.country),value:t.value,onChange:t.onChange})}})})]})},Kt=function(e){var r=e.address,s=t.useMemo((function(){var e;return{name1:null==r?void 0:r.name1,name2:null==r?void 0:r.name2,name3:null==r?void 0:r.name3,name4:null==r?void 0:r.name4,imprint:[null==r?void 0:r.line1,null==r?void 0:r.line2].join(" "),region:[null==r?void 0:r.postalCode,null==r?void 0:r.town].join(" "),country:null==r||null==(e=r.country)?void 0:e.name,first_name:null==r?void 0:r.first_name,last_name:null==r?void 0:r.last_name,title:null==r?void 0:r.title}}),[r]);return u.jsxs("div",{"data-testid":"addressPreview",children:[(null==s?void 0:s.title)&&u.jsx(n.Text,{testid:"title",children:null==s?void 0:s.title}),((null==s?void 0:s.first_name)||(null==s?void 0:s.last_name))&&u.jsxs(n.Text,{testid:"name",children:[null==s?void 0:s.first_name," ",null==s?void 0:s.last_name]}),(null==s?void 0:s.name1)&&u.jsx(n.Text,{testid:"name1",children:null==s?void 0:s.name1}),(null==s?void 0:s.name2)&&u.jsx(n.Text,{testid:"name2",children:null==s?void 0:s.name2}),(null==s?void 0:s.name3)&&u.jsx(n.Text,{testid:"name3",children:null==s?void 0:s.name3}),(null==s?void 0:s.name4)&&u.jsx(n.Text,{testid:"name4",children:null==s?void 0:s.name4}),(null==s?void 0:s.imprint)&&u.jsx(n.Text,{testid:"imprint",children:null==s?void 0:s.imprint}),(null==s?void 0:s.region)&&u.jsx(n.Text,{testid:"region",children:null==s?void 0:s.region}),(null==s?void 0:s.country)&&u.jsx(n.Text,{testid:"country",children:null==s?void 0:s.country})]})},Zt=t.createContext(null),Xt=function(e){var r=e.children,n=e.onAdd,s=e.onChange,i=e.onRemove,a=e.available,o=void 0===a?[]:a,l=e.showOneTimeAddress,c=e.address,d=t.useState(c||null),f=d[0],m=d[1],h=t.useState(!1),p=h[0],v=h[1],y=t.useState(!1),x=y[0],g=y[1],b=t.useState([]),j=b[0],w=b[1],k=function(){var e=t.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),r=t.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),n=t.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:t.useCallback((function(){return sessionStorage.clear()}),[]),setItem:e,getItem:r,removeItem:n}}(),C=k.setItem,T=k.getItem;return t.useEffect((function(){var e=T("OneTimeAddress")&&JSON.parse(T("OneTimeAddress").value);p&&w(e||[])}),[p,T]),u.jsx(Zt.Provider,{value:{address:c,availableAddresses:[].concat(o,l?j:[]),showOneTimeAddress:l,selectedAddress:f,setSelectedAddress:m,isAddressDialogVisible:p,setAddressDialogVisible:v,isRemoveAddressDialogVisible:x,setRemoveAddressDialogVisible:g,handleAddOneTimeAddress:function(e){m(e),n(e),C("OneTimeAddress",JSON.stringify([].concat(j,[e]))),v(!1)},handleChange:function(){f.id?s(f):n(f),v(!1)},handleRemove:function(e){i(e),g(!1)}},children:r})},er=function(){return t.useContext(Zt)},tr=function(){var e=er(),r=e.availableAddresses,i=e.selectedAddress,a=e.setSelectedAddress,o=t.useState(""),l=o[0],c=o[1],d=function(e,t){return e.id&&t.id?e.id===t.id:(null==e||null==(r=e.name1)?void 0:r.trim())===(null==t||null==(n=t.name1)?void 0:n.trim())&&(null==e||null==(s=e.name2)?void 0:s.trim())===(null==t||null==(i=t.name2)?void 0:i.trim())&&(null==e||null==(a=e.name3)?void 0:a.trim())===(null==t||null==(o=t.name3)?void 0:o.trim())&&(null==e||null==(l=e.name4)?void 0:l.trim())===(null==t||null==(u=t.name4)?void 0:u.trim())&&(null==e||null==(c=e.line1)?void 0:c.trim())===(null==t||null==(d=t.line1)?void 0:d.trim())&&(null==e||null==(f=e.line2)?void 0:f.trim())===(null==t||null==(m=t.line2)?void 0:m.trim())&&(null==e||null==(h=e.town)?void 0:h.trim())===(null==t||null==(p=t.town)?void 0:p.trim())&&(null==e?void 0:e.postalCode)===(null==t?void 0:t.postalCode)&&JSON.stringify(null==e?void 0:e.country)===JSON.stringify(null==t?void 0:t.country);var r,n,s,i,a,o,l,u,c,d,f,m,h,p};return u.jsxs("div",{"data-testid":"searchAddress",className:"mt-6 sm:mt-0",children:[u.jsx(n.TextInput,{testid:"searchInput",inputClassName:"w-full",value:l,onChange:function(e){var t=e.target.value;c(t)},icon:{type:"search"}}),u.jsx("div",{className:"h-96 overflow-y-auto mt-2 space-y-2","data-testid":"list",children:r.filter((function(e){return[e.name1,e.name2,e.name3,e.name4].join(" ").toLowerCase().includes(l.toLowerCase())})).map((function(e,t){return u.jsx("div",{className:s("p-2","cursor-pointer","border-l-4",i&&{"hover:border-gray-300":!d(e,i),"border-primary":d(e,i)}),onClick:function(){return a(e)},"data-testid":"item",children:u.jsx(Kt,{address:e})},t)}))})]})},rr=function(){var r=t.useState("addNew"),s=r[0],i=r[1],a=He(),o=a.t,l=a.cartCode,c=er(),d=c.availableAddresses,f=c.showOneTimeAddress,m=c.isAddressDialogVisible,h=c.setAddressDialogVisible,p=c.handleChange,v=c.handleAddOneTimeAddress,y=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:l}).data,x=e.store.api.checkout.useGetTitlesQuery({cartCode:l}).data,g=function(e={}){const r=t.useRef(),[n,s]=t.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:ve(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...qe(e,(()=>s((e=>({...e}))))),formState:n});const i=r.current.control;return i._options=e,X({subject:i._subjects.state,next:e=>{J(e,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),t.useEffect((()=>{i._stateFlags.mount||(i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()})),t.useEffect((()=>{e.values&&!Pe(e.values,i._defaultValues)&&i._reset(e.values,i._options.resetOptions)}),[e.values,i]),t.useEffect((()=>{n.submitCount&&i._focusError()}),[i,n.submitCount]),r.current.formState=W(n,i),r.current}(),b=function(e){var t={titleCode:e.titleCode||"",name1:e.name1.trim()||null,name2:e.name2.trim()||null,name3:e.name3.trim()||null,name4:e.name4.trim()||null,line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:y.find((function(t){return t.isocode===e.country}))};g.reset(),v(t)};return t.useEffect((function(){i((null==d?void 0:d.length)>0?"search":"addNew")}),[d]),u.jsxs(n.Dialog,{title:o(nt),isOpen:m,onClose:function(){return h(!1)},testid:"addressDialog",children:[(null==d?void 0:d.length)>0&&f&&u.jsxs(n.Tabs,{className:"flex-col sm:flex-row",onSelectTab:function(e){return i(e)},size:"sm",children:[u.jsx(n.Tabs.Tab,{testid:"searchTab",tabKey:"search",title:o(ft),selected:"search"===s}),u.jsx(n.Tabs.Tab,{testid:"addNewTab",tabKey:"addNew",title:o(mt),selected:"addNew"===s})]}),"search"===s?u.jsx(tr,{}):u.jsx(Jt,{form:g,availableCountries:y,titles:null==x?void 0:x.titles}),u.jsxs("div",{className:"flex mt-6 space-x-4 justify-between sm:justify-end",children:[u.jsx(n.Button,{variant:"outlined",testid:"cancelButton",onClick:function(){return h(!1),void g.reset()},children:o(xt)}),u.jsx(n.Button,{testid:"confirmButton",onClick:function(){return"search"===s?p():g.handleSubmit(b)()},children:o(gt)})]})]})},nr=function(e){var t=e.hasRemove,r=er(),s=r.address,i=r.availableAddresses,a=r.showOneTimeAddress,o=r.setAddressDialogVisible,l=r.setRemoveAddressDialogVisible,c=He().t,d=(null==i?void 0:i.length)>1||a;return u.jsxs(u.Fragment,{children:[u.jsx(Kt,{address:s}),d&&u.jsxs("div",{className:"flex divide-x-2 space-x-2 mt-1",children:[u.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return o(!0)},children:c(s?tt:rt)}),s&&t&&u.jsx("div",{className:"pl-2",children:u.jsx(n.Button,{testid:"removeAddressButton",variant:"text",onClick:function(){return l(!0)},children:c(ht)})})]})]})},sr=function(){var e=He().t,t=er(),r=t.setRemoveAddressDialogVisible,s=t.isRemoveAddressDialogVisible,i=t.handleRemove,a=t.address;return u.jsxs(n.Dialog,{title:e(bt),testid:"deleteAddressDialog",isOpen:s,onClose:function(){return r(!1)},children:[u.jsx(n.Text,{children:e(yt)}),u.jsxs("div",{className:"flex mt-8 space-x-4 justify-end",children:[u.jsx(n.Button,{testid:"cancelButton",variant:"outlined",onClick:function(){return r(!1)},children:e(dt)}),u.jsx(n.Button,{testid:"confirmButton",onClick:function(){return i(a)},children:e(ht)})]})]})};function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var or=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return u.jsxs(Xt,ar(ar({},t),{},{children:[u.jsx(nr,{hasRemove:!!t.onRemove}),u.jsx(rr,{}),u.jsx(sr,{})]}))},lr={NEW_KEY_SYSTEM:At,EXTENSION:Nt,REORDER:Dt,NEW_SERIES:Ot},ur={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",i="minute",a="hour",o="day",l="week",u="month",c="quarter",d="year",f="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},x={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,u),i=r-s<0,a=t.clone().add(n+(i?-1:1),u);return+(-(n+(r-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:l,d:o,D:f,h:a,m:i,s:s,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=v;var j=function(e){return e instanceof T},w=function e(t,r,n){var s;if(!t)return g;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(s=i),r&&(b[i]=r,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var o=t.name;b[o]=t,s=o}return!n&&s&&(g=s),s||!n&&g},k=function(e,t){if(j(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new T(r)},C=x;C.l=w,C.i=j,C.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function v(e){this.$L=w(e.locale,null,!0),this.parse(e)}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var s=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return C},y.isValid=function(){return!(this.$d.toString()===m)},y.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return k(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<k(e)},y.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!C.u(t)||t,c=C.p(e),m=function(e,t){var s=C.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(o)},h=function(e,t){return C.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},p=this.$W,v=this.$M,y=this.$D,x="set"+(this.$u?"UTC":"");switch(c){case d:return n?m(1,0):m(31,11);case u:return n?m(1,v):m(0,v+1);case l:var g=this.$locale().weekStart||0,b=(p<g?p+7:p)-g;return m(n?y-b:y+(6-b),v);case o:case f:return h(x+"Hours",0);case a:return h(x+"Minutes",1);case i:return h(x+"Seconds",2);case s:return h(x+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,l=C.p(e),c="set"+(this.$u?"UTC":""),m=(r={},r[o]=c+"Date",r[f]=c+"Date",r[u]=c+"Month",r[d]=c+"FullYear",r[a]=c+"Hours",r[i]=c+"Minutes",r[s]=c+"Seconds",r[n]=c+"Milliseconds",r)[l],h=l===o?this.$D+(t-this.$W):t;if(l===u||l===d){var p=this.clone().set(f,1);p.$d[m](h),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[C.p(e)]()},y.add=function(n,c){var f,m=this;n=Number(n);var h=C.p(c),p=function(e){var t=k(m);return C.w(t.date(t.date()+Math.round(e*n)),m)};if(h===u)return this.set(u,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===o)return p(1);if(h===l)return p(7);var v=(f={},f[i]=t,f[a]=r,f[s]=e,f)[h]||1,y=this.$d.getTime()+n*v;return C.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=C.z(this),i=this.$H,a=this.$m,o=this.$M,l=r.weekdays,u=r.months,c=function(e,r,s,i){return e&&(e[r]||e(t,n))||s[r].slice(0,i)},d=function(e){return C.s(i%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:C.s(o+1,2,"0"),MMM:c(r.monthsShort,o,u,3),MMMM:c(u,o),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(i),HH:C.s(i,2,"0"),h:d(1),hh:d(2),a:f(i,a,!0),A:f(i,a,!1),m:String(a),mm:C.s(a,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:s};return n.replace(p,(function(e,t){return t||h[e]||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,f,m){var h,p=C.p(f),v=k(n),y=(v.utcOffset()-this.utcOffset())*t,x=this-v,g=C.m(this,v);return g=(h={},h[d]=g/12,h[u]=g,h[c]=g/3,h[l]=(x-y)/6048e5,h[o]=(x-y)/864e5,h[a]=x/r,h[i]=x/t,h[s]=x/e,h)[p]||x,m?g:C.a(g)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return C.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),S=T.prototype;return k.prototype=S,[["$ms",n],["$s",s],["$m",i],["$H",a],["$W",o],["$M",u],["$y",d],["$D",f]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,T,k),e.$i=!0),k},k.locale=w,k.isDayjs=j,k.unix=function(e){return k(1e3*e)},k.en=b[g],k.Ls=b,k.p={},k}()}({get exports(){return ur},set exports(e){ur=e}});var cr,dr,fr=ur,mr=function(e){var t=e.deliveryInfos,r=void 0===t?[]:t,s=He().t,i=r.filter((function(e){return e.receiptDate})).map((function(e){return e.receiptDate})).sort().map((function(e){return fr(e).format("DD.MM.YYYY")})),a=i[0],o=i[i.length-1];return u.jsxs("div",{className:"w-1/2 md:w-36 lg:w-40 xl:w-48 flex-none lg:text-right","data-testid":"committedDelivery",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:s(zt)}),u.jsx("div",{className:"flex md:justify-end space-x-2","data-testid":"value",children:i.length>0?u.jsxs(u.Fragment,{children:[u.jsx(n.Icon,{type:"greenTick"}),u.jsx(n.Text,{size:"sm",type:"span",children:a===o?a:a+" - "+o})]}):u.jsx(n.Text,{type:"span",children:"-"})})]})},hr=function(e){var t=e.value,r=He().t;return u.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"positionText",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r(kt)}),u.jsx(n.Text,{size:"sm",testid:"value",children:t})]})},pr=function(r){var s,i=r.configurationName,a=r.productCode,o=r.headPositionCode,l=r.itemInfoId,c=He().t,d=t.useState(!1),f=d[0],m=d[1],h=e.store.api.product.useGetConfigurationQuery({productCode:a},{skip:!f||!a}),p=h.data,v=h.isLoading,y=e.store.api.product.useGetConfigurationSummaryQuery({headPositionEntryConfigurationParameter:o&&{headPositionCode:o,itemInfoId:l},cpqConfigurationParameter:a&&{productCode:a,configId:null==p?void 0:p.configId}},{skip:!f||a&&!p}),x=y.data,g=y.isLoading,b=y.isSuccess;return u.jsxs("div",{className:"space-y-1","data-testid":"configuration",children:[i&&u.jsx(n.Text,{size:"sm",testid:"name",children:i}),u.jsx(n.Button,{variant:"text",iconType:f?"arrowup":"arrowdown",size:"sm",onClick:function(){return m(!f)},testid:"expandButton",isLoading:g||v,children:c(f?Tt:St)}),b&&u.jsx(n.List,{isCompressed:!0,size:"sm",testid:"details",children:null==x||null==(s=x.configurationInfos)?void 0:s.map((function(e,t){return u.jsx(n.List.Item,{name:e.configurationLabel,value:e.configurationValue},t)}))})]})},vr=function(e){var t=e.imageSrc,r=e.imageAlt,s=e.productName,i=e.productCode,a=e.configName,o=e.marketSystemName,l=e.ean,c=e.badgeType,d=e.badgeText,f=e.medias,m=He().t;return u.jsxs("div",{className:"flex-grow flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-2",children:[u.jsx(n.Image,{src:t,alt:r,fullWidth:!1,className:"w-20 h-20"}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{children:[u.jsx(n.Text,{color:"primary",type:"span",bold:!0,testid:"name",children:s}),o&&u.jsx(n.Text,{color:"primary",size:"sm",type:"span",bold:!0,testid:"masterMarketSystem",children:o})]}),u.jsxs("div",{className:"flex lg:flex-col xl:flex-row space-x-2 xl:items-center",children:[d&&u.jsx(n.Chip,{testid:"masterBadge",background:c,label:d}),l&&u.jsx(n.Text,{size:"sm",testid:"ean",children:m(Vt)+": "+l})]}),a&&u.jsx(pr,{configurationName:a,productCode:i}),f&&u.jsx("div",{className:"flex flex-wrap","data-testid":"uploadedFiles",children:f.map((function(e){return u.jsx(n.Chip,{label:e.realFileName,onClick:function(){return window.open(e.url,"_blank")},className:"mr-1 mt-1"},e.code)}))})]})]})},yr=function(e){var t=e.amount,r=e.unitName,s=He().t;return u.jsxs("div",{className:"w-1/2 md:w-20 lg:w-28 flex-none lg:text-right","data-testid":"quantity",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:s(Mt)}),u.jsxs(n.Text,{size:"sm",testid:"value",children:[t," ",r]})]})},xr=function(e){var t=e.value,r=He().t;return u.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"salesText",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r(_t)}),u.jsx(n.Text,{size:"sm",testid:"value",children:t})]})},gr=function(e){var t=e.totalPrice,r=He().t;return u.jsxs("div",{className:"w-1/2 md:w-28 lg:w-32 flex-none lg:text-right","data-testid":"totalPrice",children:[u.jsxs("div",{className:"flex lg:justify-end",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r(Pt)}),u.jsx(n.Tooltip,{position:"left",render:r(Et),children:u.jsx(n.Icon,{type:"info",className:"px-1",size:"xs"})})]}),u.jsx(n.Text,{size:"sm","data-testid":"value",children:u.jsx(n.Price,{price:t})})]})},br=function(e){var t=e.gross,r=e.net,s=e.discount,i=He().t;return u.jsxs("div",{className:"w-1/2 md:w-40 lg:w-48 xl:w-64 flex-none lg:text-right","data-testid":"unitPrice",children:[u.jsx(n.Text,{bold:!0,size:"sm",testid:"header",children:i(Lt)}),u.jsxs(n.Text,{size:"sm",testid:"grossPrice",children:[i(Ft)+": ",u.jsx(n.Price,{price:t})]}),u.jsxs(n.Text,{size:"sm",testid:"netPrice",children:[i(It)+": ",u.jsx(n.Price,{price:r})]}),!!s&&u.jsxs(n.Text,{color:"green",size:"sm",testid:"discount",children:[i($t)," ",s,"%"]})]})},jr=function(e){var r=e.lockingPositions,s=t.useState(!1),i=s[0],a=s[1];return u.jsx("div",{onClick:function(){"Range"!=window.getSelection().type&&a(!i)},className:"pr-6 space-y-3",children:u.jsx(n.Text,{size:"sm",type:"span",testid:"lockingPosition",children:!i&&r.length>12?r.slice(0,12).join(", ")+" ...":r.join(", ")})})},wr=function(e){var t=e.name,r=e.isEntryAvailable,s=e.type,i=He().t;return u.jsxs("div",{className:"flex items-center",children:[!r&&u.jsx(n.Tooltip,{render:i(wt),position:"right",children:u.jsx(n.Icon,{type:"warning",className:"pr-2"})}),u.jsx(n.Icon,{type:{KEY:"locked",CYLINDER:"cylinder",SECURITYCARD:"card"}[s],className:"pr-2"}),u.jsx(n.Text,{size:"sm",type:"span",testid:"name",children:t})]})},kr=function(e){var t=e.userPrice,r=e.listPrice,s=e.discount,i=He().t;return u.jsxs("div",{className:"justify-center",children:[u.jsx(n.Text,{bold:!0,align:"right",size:"sm",color:"primary",testid:"userPrice",children:u.jsx(n.Price,{price:t||r})}),!!s&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx(n.Text,{type:"span",size:"sm",color:"gray",transform:["line-through"],testid:"listPrice",children:u.jsx(n.Price,{price:r})}),u.jsx(n.Text,{type:"span",size:"sm",color:"green",testid:"discount",children:i(Ct,""+s)})]})]})},Cr=function(e){var r,s,i=e.headPosition,a=e.isExpanded,o=void 0!==a&&a,l=He(),c=l.t,d=l.showPrice,f=t.useState(o),m=f[0],h=f[1],p=t.useState(1),v=p[0],y=p[1],x=t.useMemo((function(){return e=i.entries,t=10,Array.from({length:Math.ceil(e.length/t)},(function(r,n){return e.slice(n*t,n*t+t)}));var e,t}),[i.entries]),g="NEW_SERIES"===i.businessCase;return u.jsxs("div",{"data-testid":"subpositions",children:[m&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsx("div",{className:"px-2 min-w-300",children:u.jsxs(n.Table,{children:[u.jsx(n.Table.Header,{children:u.jsxs(n.Table.Row,{children:[u.jsx(n.Table.HeaderCell,{width:"200px",children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(Rt)})}),u.jsx(n.Table.HeaderCell,{width:"300px",children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(qt)})}),u.jsx(n.Table.HeaderCell,{children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(Yt)})}),g&&u.jsx(n.Table.HeaderCell,{width:"120px",align:"right",children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(Bt)})}),u.jsx(n.Table.HeaderCell,{width:"120px",align:"right",children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(Ut)})}),d&&u.jsx(n.Table.HeaderCell,{width:"220px",align:"right",children:u.jsx(n.Text,{size:"sm",color:"primary",children:c(jt)})})]})}),u.jsx(n.Table.Body,{children:x[v-1].map((function(e,t){var r,s,a,o,l;return u.jsxs(n.Table.Row,{children:[u.jsx(n.Table.Cell,{children:u.jsx(wr,{name:null==(r=e.product)?void 0:r.name,isEntryAvailable:!(null!=(s=e.product)&&s.sapBlocked)&&(null==(a=e.product)?void 0:a.purchasable)&&(null==(o=e.product)?void 0:o.ecommerceEligible),type:null==(l=e.product)?void 0:l.materialType})}),u.jsx(n.Table.Cell,{children:u.jsx(jr,{lockingPositions:e.lockingPositions})}),u.jsx(n.Table.Cell,{children:u.jsx(pr,{configurationName:e.configurationName,headPositionCode:i.code,itemInfoId:e.id})}),g&&u.jsx(n.Table.Cell,{align:"right",children:u.jsx(n.Text,{size:"sm",type:"span",testid:"quantityPerSet",children:e.quantity})}),u.jsx(n.Table.Cell,{align:"right",children:u.jsx(n.Text,{size:"sm",type:"span",testid:"quantity",children:e.quantity*i.quantity})}),d&&u.jsx(n.Table.Cell,{align:"right",children:u.jsx(kr,{userPrice:e.userPrice,listPrice:e.totalListPrice,discount:e.discountInPercentage})})]},t)}))})]})})}),x.length>1&&u.jsx("div",{className:"px-4",children:u.jsx(n.Pagination,{current:v,total:x.length,onChange:function(e){return y(e)}})})]}),(null==i||null==(r=i.entries)?void 0:r.length)>0&&u.jsxs("button",{"data-testid":"expandButton",className:"flex bg-gray-100 w-full text-xs space-x-1 justify-center",onClick:function(){return h(!m)},children:[u.jsx(n.Icon,{type:m?"arrowup":"arrowdown",size:"xs",className:"self-center"}),u.jsx(n.Text,{color:"primary",size:"sm",bold:!0,children:(null==i||null==(s=i.entries)?void 0:s.length)+" "+c(Rt)})]})]})},Tr=function(e){var r=e.groupedEntries,n=He(),s=n.t,i=n.showPrice,a=t.useMemo((function(){return r.filter((function(e){return"headPosition"===Object.keys(e)[0]})).map((function(e){var t,r,n,a,o,l,c,d=e.headPosition;return u.jsxs("li",{className:"shadow rounded bg-lighter",children:[u.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full relative p-2 mb-4",children:[u.jsx("div",{className:"col-span-full lg:col-span-4",children:u.jsx(vr,{imageSrc:null==d||null==(t=d.thumbnail)?void 0:t.url,imageAlt:null==d||null==(r=d.thumbnail)?void 0:r.altText,productName:(null==d?void 0:d.marketSystemName)&&""+(null==d?void 0:d.marketSystemName),badgeType:"success",badgeText:s((c=null==d?void 0:d.businessCase,lr[c]))})}),u.jsx("div",{className:"col-span-full lg:col-span-8",children:u.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==d||null==(n=d.salesText)?void 0:n.textContent)&&u.jsx(xr,{value:null==d||null==(a=d.salesText)?void 0:a.textContent}),(null==d||null==(o=d.positionText)?void 0:o.textContent)&&u.jsx(hr,{value:null==d||null==(l=d.positionText)?void 0:l.textContent}),u.jsx(yr,{amount:null==d?void 0:d.quantity}),i&&u.jsx(gr,{totalPrice:null==d?void 0:d.price})]})})]}),(null==d?void 0:d.entries)&&u.jsx("div",{className:"w-full",children:u.jsx(Cr,{headPosition:d})})]},null==d?void 0:d.code)}))}),[r,i,s]),o=t.useMemo((function(){return r.filter((function(e){return"singleEntry"===Object.keys(e)[0]})).map((function(e){var t,r,n,s,a,o,l,c,d,f,m,h,p,v,y=e.singleEntry;return u.jsx("li",{children:u.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full shadow rounded relative bg-lighter p-2 mb-4",children:[u.jsx("div",{className:"col-span-full lg:col-span-4",children:u.jsx(vr,{imageSrc:null==y||null==(r=y.product)||null==(n=r.thumbnails)||null==(s=n[0])?void 0:s.url,imageAlt:null==y||null==(a=y.product)||null==(o=a.thumbnails)||null==(l=o[0])?void 0:l.altText,productName:null==y||null==(c=y.product)?void 0:c.name,productCode:null==y||null==(d=y.product)?void 0:d.code,badgeText:null==y||null==(f=y.product)?void 0:f.code.replace(/^0+/,""),badgeType:"error",ean:null==y||null==(m=y.product)?void 0:m.ean,medias:null==y?void 0:y.medias,configName:null==y?void 0:y.configurationName})}),u.jsx("div",{className:"col-span-full lg:col-span-8",children:u.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==y||null==(h=y.positionText)?void 0:h.textContent)&&u.jsx(hr,{value:null==y||null==(p=y.positionText)?void 0:p.textContent}),i&&u.jsx(br,{gross:null==y?void 0:y.listPricePerUnit,net:null==y?void 0:y.netPricePerUnit,discount:null==y?void 0:y.discountInPercentage}),u.jsx(yr,{amount:null==y?void 0:y.quantity,unitName:null==y||null==(v=y.displayUnit)?void 0:v.name}),i&&u.jsx(gr,{totalPrice:null==y?void 0:y.userPrice}),i&&u.jsx(mr,{deliveryInfos:null==y?void 0:y.committedDeliveryInfos})]})})]})},null==y||null==(t=y.product)?void 0:t.code)}))}),[r,i]);return u.jsxs("ul",{className:"space-y-4 py-2 lg:px-8","data-testid":"finalReview",children:[a,o]})};!function(e){e.Copy="copy",e.Move="move"}(cr||(cr={})),function(e){e.private="private",e.public="public"}(dr||(dr={}));var Sr=function(r){var i=r.fixed,a=void 0===i||i,o=e.store.hooks.useIsFetching(),l=t.useState(!1),c=l[0],d=l[1];return t.useEffect((function(){var e=function(){return d(!0)};return addEventListener("beforeunload",e),function(){return removeEventListener("beforeunload",e)}}),[]),(o||c)&&u.jsx("div",{className:s("w-full h-full flex items-center justify-center top-0 left-0 z-10 backdrop-filter backdrop-blur",a?"fixed":"absolute"),"data-testid":"overlayLoader",children:u.jsx(n.Icon,{size:"xl",type:"loader"})})},_r="vanguard.cart.calculatePrice.success",Ar="vanguard.cart.calculatePrice.error",Nr="vanguard.checkout.endUserInformation.tile",Dr="vanguard.checkout.notification",Or="vanguard.checkout.notification.placeOrder.error",Pr="vanguard.checkout.header",Er="vanguard.checkout.addressUpdate.success",Mr="vanguard.checkout.addressUpdate.error",Vr="vanguard.checkout.addressDelete.success",Fr="vanguard.checkout.addressDelete.error",Ir="vanguard.checkout.delivery.tile",$r="vanguard.checkout.delivery.method",Lr="vanguard.checkout.delivery.type",zr="vanguard.checkout.delivery.type.TooltipTitle",Br="vanguard.checkout.delivery.shippingDate",Ur="vanguard.checkout.delivery.recipient",Rr="vanguard.checkout.deliverymethod.success",qr="vanguard.checkout.deliverymethod.error",Yr="vanguard.checkout.preferreddeliverydate.success",Gr="vanguard.checkout.preferreddeliverydate.error",Hr="vanguard.checkout.customerOrderNumber",Wr="vanguard.checkout.customerCommissionNumber",Qr="vanguard.checkout.total.price",Jr="vanguard.checkout.total.discount",Kr="vanguard.checkout.total.expressCost",Zr="vanguard.checkout.total.general",Xr="vanguard.checkout.calculatePriceAndDelivery",en="vanguard.checkout.placeOrder",tn="vanguard.checkout.payment.tile",rn="vanguard.checkout.payment.method",nn="vanguard.checkout.payment.termsOfPayment",sn="vanguard.checkout.paymentterm.default",an="vanguard.checkout.payment.billing",on="vanguard.checkout.mandatoryFiled.error",ln=function(t){var r=t.additionalAddresses,s=void 0===r?[]:r,i=He(),a=i.cartCode,o=i.t,l=e.store.hooks.useNotifications().notify,c=e.store.api.checkout.useGetAdditionalAddressTypesQuery({orderCode:a}).data,d=e.store.api.checkout.useAddAdditionalAddressMutation()[0],f=e.store.api.checkout.useDeleteAdditionalAddressMutation()[0],m=function(){var e=Qe(et.mark((function e(t,r){var n,s,i,u,c,f,m,h,p,v;return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.name1,s=r.name2,i=r.name3,u=r.name4,c=r.line1,f=r.line2,m=r.postalCode,h=r.country,p=r.town,v=r.titleCode,e.prev=1,e.next=4,d({cartCode:a,additionalAddressTypeCode:t,name1:n,name2:s,name3:i,name4:u,line1:c,line2:f,postalCode:m,country:h,town:p,isoCode:h.isocode,titleCode:v});case 4:l("success",o(Er),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("error",o(Mr),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=Qe(et.mark((function e(t){return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({cartCode:a,id:t});case 3:l("success",o(Vr),"checkout.addressDeleteSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("error",o(Fr),"checkout.addressDeleteError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"additionalAddresses",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:o(Nr)}),u.jsx("div",{className:"flex flex-wrap md:pl-6","data-testid":"additionalAddresses",children:null==c?void 0:c.map((function(e){return u.jsxs("div",{className:"pt-4 pr-16","data-testid":"address-"+e.code,children:[u.jsx(n.Text,{bold:!0,testid:"label",children:e.name}),u.jsx(or,{showOneTimeAddress:!0,address:s.find((function(t){return t.additionalAddressTypeCode===e.code})),onAdd:function(t){return m(e.code,t)},onChange:function(t){return m(e.code,t)},onRemove:function(e){return h(e.id)}})]},e.code)}))})]})},un=function(e){var t=e.deliveryMethods;return u.jsx("div",{className:"space-y-1",children:null==t?void 0:t.map((function(e,t){var r=e.name,s=e.description;return u.jsxs("div",{children:[u.jsx(n.Text,{type:"span",size:"sm",bold:!0,testid:"name",children:r+": "}),u.jsx(n.Text,{type:"span",size:"sm",testid:"description",children:s})]},t)}))})},cn=function(e){var t=fr(),r=t.day();return 5===r&&e?t=t.add(3,"day"):6===r?t=t.add(2,"day"):(0===r||e)&&(t=t.add(1,"day")),t.toDate()},dn=function(r){var s=r.deliveryAddressesError,i=t.useRef(),a=function(){var r,n,s=He(),i=s.t,a=s.cartCode,o=s.endOfDeliveryDay,l=s.oneTimeAddressMandatory,u=t.useState(""),c=u[0],d=u[1],f=t.useState(null),m=f[0],h=f[1],p=t.useState(null),v=p[0],y=p[1],x=e.store.hooks.useNotifications().notify,g=e.store.api.checkout.useGetCheckoutQuery({cartCode:a}).data,b=e.store.api.checkout.useGetAddressesQuery({cartCode:a}).data,j=e.store.api.checkout.useGetDeliveryMethodQuery({cartCode:a}).data,w=e.store.api.checkout.useGetDeliveryTypeQuery({cartCode:a}).data,k=e.store.api.checkout.useGetB2BUnitQuery(null,{skip:l}).data,C=e.store.api.checkout.useSetOneTimeAddressMutation()[0],T=e.store.api.checkout.useSetDeliveryAddressMutation()[0],S=e.store.api.checkout.useSetDeliveryMethodMutation()[0],_=t.useCallback(function(){var e=Qe(et.mark((function e(t,r){var n;return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r?cn(o):null,e.prev=1,e.next=4,S({cartCode:a,code:t,preferredDeliveryDate:n}).unwrap();case 4:x("success",i(Rr),"checkout.deliveryMethodSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x("error",i(qr),"checkout.deliveryMethodError");case 10:y(n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,S,a,x,i]),A=t.useCallback(function(){var e=Qe(et.mark((function e(t){var r;return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({cartCode:a,code:null==g||null==(r=g.deliveryMode)?void 0:r.code,preferredDeliveryDate:t}).unwrap();case 3:x("success",i(Yr),"checkout.preferredDeliveryDateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x("error",i(Gr),"checkout.preferredDeliveryDateError");case 9:y(t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[S,a,null==g||null==(r=g.deliveryMode)?void 0:r.code,x,i]),N=t.useCallback(function(){var e=Qe(et.mark((function e(t){var r,n,s,o,l,u,c,d,f,m;return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name1,n=t.name2,s=t.name3,o=t.name4,l=t.line1,u=t.line2,c=t.postalCode,d=t.country,f=t.town,m=t.titleCode,e.prev=1,e.next=4,C({cartCode:a,name1:r,name2:n,name3:s,name4:o,line1:l,line2:u,postalCode:c,country:d,town:f,isoCode:d.isocode,titleCode:m}).unwrap();case 4:x("success",i(Er),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x("error",i(Mr),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[C,a,x,i]),D=t.useCallback(function(){var e=Qe(et.mark((function e(t){return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T({cartCode:a,addressId:t.id}).unwrap();case 3:x("success",i(Er),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x("error",i(Mr),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[T,a,x,i]),O=t.useMemo((function(){var e=[].concat(b||[],(null==k?void 0:k.addresses)||[]).filter((function(e){return null==e?void 0:e.shippingAddress})),t=e.map((function(e){return e.id}));return e.filter((function(e,r){return!t.includes(e.id,r+1)}))}),[null==k?void 0:k.addresses,b]),P=t.useMemo((function(){var e,t;return{selectedMethod:null!=(e=null==g||null==(t=g.deliveryMode)?void 0:t.code)?e:"",selectedType:c,address:null==g?void 0:g.deliveryAddress,deliveryMethods:j||[],deliveryTypes:(null==w?void 0:w.deliveryTypes)||[],deliveryAddresses:O,deliveryDate:v,setSelectedType:d,handleDeliveryMethodUpdate:_,setDeliveryDate:A,handleAddressUpdate:D,handleOneTimeAddressUpdate:N}}),[null==g||null==(n=g.deliveryMode)?void 0:n.code,null==g?void 0:g.deliveryAddress,c,j,null==w?void 0:w.deliveryTypes,O,v,_,A,D,N]);return t.useEffect((function(){var e;!c&&null!=w&&null!=(e=w.deliveryTypes)&&e.length&&d(w.deliveryTypes[0])}),[j,w,c]),t.useEffect((function(){var e=null==g?void 0:g.deliveryMode;if(e&&!m){var t="EX"===e.code||e.showPreferredDate?cn(o):null;y(t),h(!0)}}),[null==g?void 0:g.deliveryMode,o,m]),P}(),o=a.address,l=a.deliveryDate,c=a.deliveryTypes,d=a.deliveryMethods,f=a.selectedMethod,m=a.selectedType,h=a.deliveryAddresses,p=a.setDeliveryDate,v=a.setSelectedType,y=a.handleDeliveryMethodUpdate,x=a.handleAddressUpdate,g=a.handleOneTimeAddressUpdate,b=He(),j=b.t,w=b.oneTimeAddressMandatory,k=b.language;return u.jsxs("div",{ref:i,className:"shadow-md p-6 space-y-2","data-testid":"delivery",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:j(Ir)}),u.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[u.jsxs("div",{className:"md:w-1/2 md:pl-6 space-y-1",children:[u.jsxs("div",{"data-testid":"method",children:[u.jsxs("div",{className:"flex",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:j($r)}),u.jsx(n.Tooltip,{position:"right",render:u.jsx(un,{deliveryMethods:d}),children:u.jsx(n.Icon,{type:"info",className:"px-1"})})]}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2 md:pr-2 lg:pr-0","data-testid":"options",children:d.map((function(e){var t=e.code,r=e.name,s=e.showPreferredDate;return u.jsx(n.Radio,{label:r,checked:f===t,onChange:function(){return y(t,s)},testid:t},t)}))})]}),c.length>0&&u.jsxs("div",{"data-testid":"type",children:[u.jsxs("div",{className:"flex",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:j(Lr)}),u.jsx(n.Tooltip,{position:"right",render:j(zr),children:u.jsx(n.Icon,{type:"info",className:"px-1"})})]}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:c.map((function(e){return u.jsx(n.Radio,{label:e,checked:m===e,onChange:function(){return v(e)},testid:e},e)}))})]}),u.jsxs("div",{className:"w-full md:max-w-max","data-testid":"shippingDate",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:j(Br)}),u.jsx(n.DatePicker,{minDate:new Date,selected:l,onChange:p,locale:k.split("_")[0],dateFormat:"dd.MM.yyyy"})]})]}),u.jsxs("div",{className:"w-1/2","data-testid":"recipient",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:j(Ur)+(w?"*":"")}),u.jsx(or,{address:o,available:h,onAdd:g,onChange:x,showOneTimeAddress:!0}),w&&s&&u.jsx(n.Text,{testid:"error",color:"secondary",size:"sm",children:j(on)})]})]})]})},fn=function(e){var t=e.consents,r=e.setChecked,s=e.checked,i=e.errors,a=He().t;return u.jsx("div",{"data-testid":"consents",children:null==t?void 0:t.map((function(e,t){var o,l;return u.jsx("div",{className:"flex items-center space-x-2","data-testid":"consent",children:u.jsx("div",{className:"m-2",children:u.jsx(n.Checkbox,{checked:s[t],onChange:function(){var e=[].concat(s);e[t]=!e[t],r(e)},error:i.includes("consents_"+t),hint:i.includes("consents_"+t)&&a(on),label:u.jsx(u.Fragment,{children:null==e||null==(o=e.text)||null==(l=o.split("{}"))?void 0:l.map((function(t,r){return u.jsxs(n.Text,{type:"span",size:"sm",children:[t+" ",e.links[r]&&u.jsx(n.Link,{target:"_blank",href:e.links[r].url,size:"sm",children:e.links[r].text})]},t+r)}))})})})},e.text)}))})},mn=function(e){var t=e.price,r=e.discount,s=He(),i=s.t,a=s.showAdditionalInformation,o=s.showExpressCostDescription;return u.jsxs("div",{className:"space-y-1 lg:w-2/6",children:[t&&u.jsxs(n.Text,{bold:!0,size:"lg",color:"primary",align:"right",testid:"priceTotal",children:[i(Qr)+" ",u.jsx(n.Price,{price:t})]}),r&&u.jsxs(n.Text,{color:"green",align:"right",testid:"totalDiscount",children:[i(Jr)+" ",u.jsx(n.Price,{price:r})]}),o&&u.jsx(n.Text,{size:"sm",align:"right",testid:"expressCost",children:i(Kr)}),a&&u.jsx(n.Text,{size:"sm",align:"right",testid:"additionalInformation",children:i(Zr)})]})},hn=function(r){var s=r.selectedPaymentMethod,i=r.setDeliveryError,a=He(),o=a.t,l=a.cartCode,c=a.showCalculateDelivery,d=a.oneTimeAddressMandatory,f=e.store.hooks.useNotifications().notify,m=He().showPrice,h=e.store.api.checkout.useGetConsentsQuery({cartCode:l}).data,p=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data,v=e.store.api.cart.useSimulateCartMutation()[0],x=e.store.api.checkout.usePlaceOrderMutation()[0],g=t.useState(Array(null==h?void 0:h.consents.length).fill(!1)||[]),b=g[0],j=g[1],w=t.useState(""),k=w[0],C=w[1],T=t.useState(""),S=T[0],_=T[1],A=t.useState([]),N=A[0],D=A[1],O=function(){var e=Qe(et.mark((function e(){return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({cartCode:l,forceSync:!0}).unwrap();case 3:f("success",o(_r),"checkout.calculatePriceSuccess"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),f("error",o(Ar),"checkout.calculatePriceError"),console.error("Simulation cart failed.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=[];return b.some((function(e){return!1===e}))&&b.map((function(t,r){!1===t&&e.push("consents_"+r)})),k||e.push("orderNumber"),null!=p&&p.deliveryAddress||!d?i(!1):(e.push("deliveryAddress"),i(!0)),D(e),0===e.length},E=function(){var e=Qe(et.mark((function e(){var t,r;return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,x({cartCode:l,customerReferenceId:k,paymentModeCode:s,checkoutCommission:S}).unwrap();case 6:t=e.sent,r=t.code,window.location.href=y("/checkout/orderConfirmation/"+r,"redirect"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),f("error",o(Or),"checkout.placeOrderError"),console.error("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"space-y-6","data-testid":"order",children:[u.jsx("div",{className:"shadow-md space-between p-6",children:u.jsxs("div",{className:"flex flex-col space-y-6 mb-2 md:space-y-0 md:justify-between md:flex-row",children:[u.jsxs("div",{className:"lg:w-3/6 space-y-3",children:[u.jsxs("div",{className:"flex flex-col md:space-x-3 md:flex-row",children:[u.jsx(n.TextInput,{label:o(Hr)+"*",inputClassName:"w-full",value:k,onChange:function(e){return C(e.target.value)},maxlength:35,testid:"orderNumberInput",error:N.includes("orderNumber"),hint:N.includes("orderNumber")&&o(on)}),u.jsx(n.TextInput,{label:o(Wr),inputClassName:"w-full",value:S,onChange:function(e){return _(e.target.value)},maxlength:35,testid:"commissionNumber"})]}),u.jsx(fn,{checked:b,setChecked:j,consents:null==h?void 0:h.consents,errors:N})]}),m&&u.jsx(mn,{price:null==p?void 0:p.simulatedTotalPrice,discount:null==p?void 0:p.simulatedDiscount})]})}),u.jsxs("div",{className:"flex flex-col space-y-2 md:justify-end md:space-y-0 md:space-x-2 md:flex-row",children:[c&&m&&u.jsx(n.Button,{onClick:O,testid:"calculatePriceAndDeliveryButton",isDisabled:null==p?void 0:p.simulated,variant:"outlined",iconType:"simulateprice",children:o(Xr)}),u.jsx(n.Button,{testid:"orderButton",onClick:E,iconType:"arrow",children:o(en)})]})]})},pn=function(t){var r,s,i,a=t.selectedPaymentMethod,o=t.setSelectedPaymentMethod,l=t.billingAddress,c=He(),d=c.t,f=c.showBillingAddress,m=c.showPaymentMethod,h=c.cartCode,p=e.store.hooks.useNotifications().notify,v=e.store.api.checkout.useGetB2BUnitQuery(null).data,y=e.store.api.checkout.useGetBillingAddressesQuery({cartCode:h}).data,x=e.store.api.checkout.useSetBillingAddressMutation()[0],g=function(){var e=Qe(et.mark((function e(t){return et.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({cartCode:h,id:t.id}).unwrap();case 3:p("success",d(Er),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),p("error",d(Er),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"payment",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"title",children:d(tn)}),u.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[u.jsxs("div",{className:"md:w-1/2 md:pl-6",children:[(null==v||null==(r=v.defaultPaymentMethods)?void 0:r.length)>0&&m&&u.jsxs("div",{className:"mb-2 space-y-1","data-testid":"method",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:d(rn)}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:null==v?void 0:v.defaultPaymentMethods.map((function(e){var t=e.code,r=e.description;return u.jsx(n.Radio,{checked:a===t,label:r,onChange:function(){return o(t)},testid:t},t)}))})]}),u.jsxs("div",{"data-testid":"terms",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:d(nn)}),u.jsx(n.Text,{color:null!=v&&v.defaultPaymentTerm?"green":null,testid:"description",children:null!=(s=null==v||null==(i=v.defaultPaymentTerm)?void 0:i.description)?s:d(sn)})]})]}),u.jsx("div",{className:"w-1/2",children:f&&u.jsxs("div",{"data-testid":"billing",children:[u.jsx(n.Text,{bold:!0,testid:"label",children:d(an)}),u.jsx(or,{address:l,available:y||[],onChange:g})]})})]})]})},vn=function(){var r=e.store.hooks.useNotifications().notify,s=He(),i=s.t,a=s.showAdditionalAddressTile,o=s.showPaymentTile,l=s.cartCode,c=t.useState(null),d=c[0],f=c[1],m=t.useState(null),h=m[0],p=m[1],v=e.store.api.checkout.useGetB2BUnitQuery(null).data,y=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data;return t.useEffect((function(){var e;(null==v||null==(e=v.defaultPaymentMethods)?void 0:e.length)>0&&f(v.defaultPaymentMethods[0].code)}),[v]),t.useEffect((function(){r("warning",i(Dr),"checkout.deliveryDateWarning")}),[r,i]),u.jsxs("div",{className:"space-y-6","data-testid":"checkout",children:[u.jsx(n.Text,{type:"h3",size:"xl",color:"primary",testid:"header",children:i(Pr)}),o&&u.jsx(pn,{selectedPaymentMethod:d,setSelectedPaymentMethod:f,billingAddress:null==y?void 0:y.billingAddress}),u.jsx(dn,{deliveryAddressesError:h}),a&&u.jsx(ln,{additionalAddresses:null==y?void 0:y.additionalAddresses}),(null==y?void 0:y.groupedEntries)&&u.jsx(Tr,{groupedEntries:null==y?void 0:y.groupedEntries}),u.jsx(hn,{selectedPaymentMethod:d,setDeliveryError:p}),u.jsx(Sr,{})]})};!function(t,n){var s='[data-react-app="'+n+'"]:not([data-rendered])',i=document.querySelector(s);if(!i)throw new Error(s+" is missing");var a=document.createElement("div");i.appendChild(a),i.setAttribute("data-rendered","true"),r.render(function(t,r){return u.jsx(e.StoreProvider,{children:u.jsx(m,{appId:r,children:u.jsx(p,{children:u.jsx(t,{})})})})}(t,n),a)}((function(){return u.jsx(vn,{})}),"checkout")}));
