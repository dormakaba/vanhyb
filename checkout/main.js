!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,i){"use strict";var s,a,o,l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},u=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{}),c={};function d(){if(a)return s;a=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}return s=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(i,s){for(var a,o,l=n(i),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))t.call(a,c)&&(l[c]=a[c]);if(e){o=e(a);for(var d=0;d<o.length;d++)r.call(a,o[d])&&(l[o[d]]=a[o[d]])}}return l},s}!function(e){e.exports=function(){if(o)return c;o=1,d();var e=t,r=60103;if(c.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;r=n("react.element"),c.Fragment=n("react.fragment")}var i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,l={},u=null,c=null;for(o in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,o)&&!a.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:r,type:e,key:u,ref:c,props:l,_owner:i.current}}return c.jsx=l,c.jsxs=l,c}()}({get exports(){return u},set exports(e){u=e}});var h=t.createContext(null),p=function(e){var r=e.appId,n=e.children,i=t.useMemo((function(){var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");try{return JSON.parse(n.innerHTML)}catch(e){throw Error("Couldn't load config of #"+r)}}),[r]);return u.jsx(h.Provider,{value:i,children:n})},f=t.createContext(null),m=function(e){var r=e.children,n=t.useState(new URL(location.href));return u.jsx(f.Provider,{value:n,children:r})};var v=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},y=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=v(e)}return r},g=function(e){return(null==e?void 0:e.replace(/[^a-zA-Z0-9]/g,""))||""},x={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",l="week",u="month",c="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),s=r-i<0,a=t.clone().add(n+(s?-1:1),u);return+(-(n+(r-i)/(s?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:l,d:o,D:h,h:a,m:s,s:i,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},x="en",b={};b[x]=v;var w=function(e){return e instanceof S},j=function e(t,r,n){var i;if(!t)return x;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(i=s),r&&(b[s]=r,i=s);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var o=t.name;b[o]=t,i=o}return!n&&i&&(x=i),i||!n&&x},C=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},k=g;k.l=j,k.i=w,k.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function v(e){this.$L=j(e.locale,null,!0),this.parse(e)}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var i=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return k},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return C(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<C(e)},y.$g=function(e,t,r){return k.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!k.u(t)||t,c=k.p(e),p=function(e,t){var i=k.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(o)},f=function(e,t){return k.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,v=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case d:return n?p(1,0):p(31,11);case u:return n?p(1,v):p(0,v+1);case l:var x=this.$locale().weekStart||0,b=(m<x?m+7:m)-x;return p(n?y-b:y+(6-b),v);case o:case h:return f(g+"Hours",0);case a:return f(g+"Minutes",1);case s:return f(g+"Seconds",2);case i:return f(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,l=k.p(e),c="set"+(this.$u?"UTC":""),p=(r={},r[o]=c+"Date",r[h]=c+"Date",r[u]=c+"Month",r[d]=c+"FullYear",r[a]=c+"Hours",r[s]=c+"Minutes",r[i]=c+"Seconds",r[n]=c+"Milliseconds",r)[l],f=l===o?this.$D+(t-this.$W):t;if(l===u||l===d){var m=this.clone().set(h,1);m.$d[p](f),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[k.p(e)]()},y.add=function(n,c){var h,p=this;n=Number(n);var f=k.p(c),m=function(e){var t=C(p);return k.w(t.date(t.date()+Math.round(e*n)),p)};if(f===u)return this.set(u,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===o)return m(1);if(f===l)return m(7);var v=(h={},h[s]=t,h[a]=r,h[i]=e,h)[f]||1,y=this.$d.getTime()+n*v;return k.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),s=this.$H,a=this.$m,o=this.$M,l=r.weekdays,u=r.months,c=function(e,r,i,s){return e&&(e[r]||e(t,n))||i[r].slice(0,s)},d=function(e){return k.s(s%12||12,e,"0")},h=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:k.s(o+1,2,"0"),MMM:c(r.monthsShort,o,u,3),MMMM:c(u,o),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:k.s(s,2,"0"),h:d(1),hh:d(2),a:h(s,a,!0),A:h(s,a,!1),m:String(a),mm:k.s(a,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:i};return n.replace(m,(function(e,t){return t||f[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,h,p){var f,m=k.p(h),v=C(n),y=(v.utcOffset()-this.utcOffset())*t,g=this-v,x=k.m(this,v);return x=(f={},f[d]=x/12,f[u]=x,f[c]=x/3,f[l]=(g-y)/6048e5,f[o]=(g-y)/864e5,f[a]=g/r,f[s]=g/t,f[i]=g/e,f)[m]||g,p?x:k.a(x)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=j(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return k.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),T=S.prototype;return C.prototype=T,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",u],["$y",d],["$D",h]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,S,C),e.$i=!0),C},C.locale=j,C.isDayjs=w,C.unix=function(e){return C(1e3*e)},C.en=b[x],C.Ls=b,C.p={},C}()}({get exports(){return x},set exports(e){x=e}});var b=x,w={};!function(e,t){e.exports=function(e,t,r){var n=function(e,t){if(!t||!t.length||!t[0]||1===t.length&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=t[0];for(var n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}({get exports(){return w},set exports(e){w=e}});var j=w;b.extend(j);var C="DD.MM.YYYY",k=function(e){if(void 0===e&&(e=[]),!(e.length<1)){var t=[b.min(e),b.max(e)],r=t[0],n=t[1],i=[r,n].map((function(e){return null==e?void 0:e.format(C)})),s=i[0],a=i[1];return r.isSame(n)?s:s+" - "+a}};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}function N(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(){var e=t.useContext(h),r=t.useCallback((function(t){var r,n=null==(r=e.translations)?void 0:r[t];if(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return s.length?l(n,s):n}return t}),[e]);return O(O({},e),{},{t:r})};function A(e,t,r,n,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function a(e){A(s,n,i,a,o,"next",e)}function o(e){A(s,n,i,a,o,"throw",e)}a(void 0)}))}}var _={},L={get exports(){return _},set exports(e){_=e}},M={};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return M},set exports(e){M=e}}),function(e){var t=M.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,s=Object.create(i.prototype),o=new P(n||[]);return a(s,"_invoke",{value:k(e,r,o)}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var f={};function m(){}function v(){}function y(){}var g={};d(g,l,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(O([])));b&&b!==i&&s.call(b,l)&&(g=b);var w=y.prototype=m.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,r){function n(i,a,o,l){var u=p(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&s.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):r.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(u.arg)}var i;a(this,"_invoke",{value:function(e,t){function s(){return new r((function(r,i){n(e,t,r,i)}))}return i=i?i.then(s,s):s()}})}function k(e,t,r){var n="suspendedStart";return function(i,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw s;return D()}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var o=S(a,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=p(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=p(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function O(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=d(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},n.awrap=function(e){return{__await:e}},j(C.prototype),d(C.prototype,u,(function(){return this})),n.AsyncIterator=C,n.async=function(e,t,r,i,s){void 0===s&&(s=Promise);var a=new C(h(e,t,r,i),s);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(w),d(w,c,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var o=s.call(i,"catchLoc"),l=s.call(i,"finallyLoc");if(o&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;N(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(L);var F=_(),I=F;try{regeneratorRuntime=F}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}var V=function(e,r){void 0===r&&(r=500);var n=t.useRef();return t.useEffect((function(){return function(){return clearTimeout(null==n?void 0:n.current)}}),[]),function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];clearTimeout(n.current),n.current=setTimeout((function(){return e.apply(void 0,i)}),r)}},U=e=>"checkbox"===e.type,q=e=>e instanceof Date,B=e=>null==e;const R=e=>"object"==typeof e;var $=e=>!B(e)&&!Array.isArray(e)&&R(e)&&!q(e),W=e=>$(e)&&e.target?U(e.target)?e.target.checked:e.target.value:e,z=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Q=e=>Array.isArray(e)?e.filter(Boolean):[],Y=e=>void 0===e,G=(e,t,r)=>{if(!t||!$(e))return r;const n=Q(t.split(/[,[\].]+?/)).reduce(((e,t)=>B(e)?e:e[t]),e);return Y(n)||n===e?Y(e[t])?r:e[t]:n};const H="blur",K="focusout",J="change",Z="onBlur",X="onChange",ee="onSubmit",te="onTouched",re="all",ne="max",ie="min",se="maxLength",ae="minLength",oe="pattern",le="required",ue="validate",ce=t.createContext(null),de=()=>t.useContext(ce);var he=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t._proxyFormState[i]!==re&&(t._proxyFormState[i]=!n||re),r&&(r[i]=!0),e[i]}});return i},pe=e=>$(e)&&!Object.keys(e).length,fe=(e,t,r,n)=>{r(e);const{name:i,...s}=e;return pe(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!n||re)))},me=e=>Array.isArray(e)?e:[e],ve=(e,t,r)=>r&&t?e===t:!e||!t||e===t||me(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function ye(e){const r=t.useRef(e);r.current=e,t.useEffect((()=>{const t=!e.disabled&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}var ge=e=>"string"==typeof e,xe=(e,t,r,n,i)=>ge(e)?(n&&t.watch.add(e),G(r,e,i)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),G(r,e)))):(n&&(t.watchAll=!0),r),be="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function we(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(be&&(e instanceof Blob||e instanceof FileList)||!r&&!$(e))return e;if(t=r?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return $(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)t[r]=we(e[r]);else t=e}return t}function je(e){const r=de(),{name:n,control:i=r.control,shouldUnregister:s}=e,a=z(i._names.array,n),o=function(e){const r=de(),{control:n=r.control,name:i,defaultValue:s,disabled:a,exact:o}=e||{},l=t.useRef(i);l.current=i,ye({disabled:a,subject:n._subjects.watch,next:e=>{ve(l.current,e.name,o)&&c(we(xe(l.current,n._names,e.values||n._formValues,!1,s)))}});const[u,c]=t.useState(n._getWatch(i,s));return t.useEffect((()=>n._removeUnmounted())),u}({control:i,name:n,defaultValue:G(i._formValues,n,G(i._defaultValues,n,e.defaultValue)),exact:!0}),l=function(e){const r=de(),{control:n=r.control,disabled:i,name:s,exact:a}=e||{},[o,l]=t.useState(n._formState),u=t.useRef(!0),c=t.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=t.useRef(s);return d.current=s,ye({disabled:i,next:e=>u.current&&ve(d.current,e.name,a)&&fe(e,c.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),t.useEffect((()=>{u.current=!0;const e=n._proxyFormState.isDirty&&n._getDirty();return e!==n._formState.isDirty&&n._subjects.state.next({isDirty:e}),c.current.isValid&&n._updateValid(!0),()=>{u.current=!1}}),[n]),he(o,n,c.current,!1)}({control:i,name:n}),u=t.useRef(i.register(n,{...e.rules,value:o}));return t.useEffect((()=>{const e=(e,t)=>{const r=G(i._fields,e);r&&(r._f.mount=t)};return e(n,!0),()=>{const t=i._options.shouldUnregister||s;(a?t&&!i._stateFlags.action:t)?i.unregister(n):e(n,!1)}}),[n,i,a,s]),{field:{name:n,value:o,onChange:t.useCallback((e=>u.current.onChange({target:{value:W(e),name:n},type:J})),[n]),onBlur:t.useCallback((()=>u.current.onBlur({target:{value:G(i._formValues,n),name:n},type:H})),[n,i]),ref:e=>{const t=G(i._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!G(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!G(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!G(l.touchedFields,n)},error:{enumerable:!0,get:()=>G(l.errors,n)}})}}const Ce=e=>e.render(je(e));var ke=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},Se=e=>/^\w*$/.test(e),Te=e=>Q(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Ne(e,t,r){let n=-1;const i=Se(t)?[t]:Te(t),s=i.length,a=s-1;for(;++n<s;){const t=i[n];let s=r;if(n!==a){const r=e[t];s=$(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}e[t]=s,e=e[t]}return e}const Pe=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=G(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else $(n)&&Pe(n,t)}}};var Oe=e=>({isOnSubmit:!e||e===ee,isOnBlur:e===Z,isOnChange:e===X,isOnAll:e===re,isOnTouch:e===te}),De=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),Ae=(e,t,r)=>{const n=Q(G(e,r));return Ne(n,"root",t[r]),Ne(e,r,n),e},Ee=e=>"boolean"==typeof e,_e=e=>"file"===e.type,Le=e=>"function"==typeof e,Me=e=>{if(!be)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Fe=e=>ge(e)||t.isValidElement(e),Ie=e=>"radio"===e.type,Ve=e=>e instanceof RegExp;const Ue={value:!1,isValid:!1},qe={value:!0,isValid:!0};var Be=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Y(e[0].attributes.value)?Y(e[0].value)||""===e[0].value?qe:{value:e[0].value,isValid:!0}:qe:Ue}return Ue};const Re={isValid:!1,value:null};var $e=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Re):Re;function We(e,t,r="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||Ee(e)&&!e)return{type:r,message:Fe(e)?e:"",ref:t}}var ze=e=>$(e)&&!Ve(e)?e:{value:e,message:""},Qe=async(e,t,r,n,i)=>{const{ref:s,refs:a,required:o,maxLength:l,minLength:u,min:c,max:d,pattern:h,validate:p,name:f,valueAsNumber:m,mount:v,disabled:y}=e._f,g=G(t,f);if(!v||y)return{};const x=a?a[0]:s,b=e=>{n&&x.reportValidity&&(x.setCustomValidity(Ee(e)?"":e||""),x.reportValidity())},w={},j=Ie(s),C=U(s),k=j||C,S=(m||_e(s))&&Y(s.value)&&Y(g)||Me(s)&&""===s.value||""===g||Array.isArray(g)&&!g.length,T=ke.bind(null,f,r,w),N=(e,t,r,n=se,i=ae)=>{const a=e?t:r;w[f]={type:e?n:i,message:a,ref:s,...T(e?n:i,a)}};if(i?!Array.isArray(g)||!g.length:o&&(!k&&(S||B(g))||Ee(g)&&!g||C&&!Be(a).isValid||j&&!$e(a).isValid)){const{value:e,message:t}=Fe(o)?{value:!!o,message:o}:ze(o);if(e&&(w[f]={type:le,message:t,ref:x,...T(le,t)},!r))return b(t),w}if(!(S||B(c)&&B(d))){let e,t;const n=ze(d),i=ze(c);if(B(g)||isNaN(g)){const r=s.valueAsDate||new Date(g),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;ge(n.value)&&g&&(e=o?a(g)>a(n.value):l?g>n.value:r>new Date(n.value)),ge(i.value)&&g&&(t=o?a(g)<a(i.value):l?g<i.value:r<new Date(i.value))}else{const r=s.valueAsNumber||(g?+g:g);B(n.value)||(e=r>n.value),B(i.value)||(t=r<i.value)}if((e||t)&&(N(!!e,n.message,i.message,ne,ie),!r))return b(w[f].message),w}if((l||u)&&!S&&(ge(g)||i&&Array.isArray(g))){const e=ze(l),t=ze(u),n=!B(e.value)&&g.length>e.value,i=!B(t.value)&&g.length<t.value;if((n||i)&&(N(n,e.message,t.message),!r))return b(w[f].message),w}if(h&&!S&&ge(g)){const{value:e,message:t}=ze(h);if(Ve(e)&&!g.match(e)&&(w[f]={type:oe,message:t,ref:s,...T(oe,t)},!r))return b(t),w}if(p)if(Le(p)){const e=We(await p(g,t),x);if(e&&(w[f]={...e,...T(ue,e.message)},!r))return b(e.message),w}else if($(p)){let e={};for(const n in p){if(!pe(e)&&!r)break;const i=We(await p[n](g,t),x,n);i&&(e={...i,...T(n,i.message)},b(i.message),r&&(w[f]=e))}if(!pe(e)&&(w[f]={ref:x,...e},!r))return w}return b(!0),w};function Ye(e,t){const r=Array.isArray(t)?t:Se(t)?[t]:Te(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Y(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,s=r[i];return n&&delete n[s],0!==i&&($(n)&&pe(n)||Array.isArray(n)&&function(e){for(const t in e)if(!Y(e[t]))return!1;return!0}(n))&&Ye(e,r.slice(0,-1)),e}function Ge(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var He=e=>B(e)||!R(e);function Ke(e,t){if(He(e)||He(t))return e===t;if(q(e)&&q(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const r=e[i];if(!n.includes(i))return!1;if("ref"!==i){const e=t[i];if(q(r)&&q(e)||$(r)&&$(e)||Array.isArray(r)&&Array.isArray(e)?!Ke(r,e):r!==e)return!1}}return!0}var Je=e=>"select-multiple"===e.type,Ze=e=>Me(e)&&e.isConnected,Xe=e=>{for(const t in e)if(Le(e[t]))return!0;return!1};function et(e,t={}){const r=Array.isArray(e);if($(e)||r)for(const r in e)Array.isArray(e[r])||$(e[r])&&!Xe(e[r])?(t[r]=Array.isArray(e[r])?[]:{},et(e[r],t[r])):B(e[r])||(t[r]=!0);return t}function tt(e,t,r){const n=Array.isArray(e);if($(e)||n)for(const n in e)Array.isArray(e[n])||$(e[n])&&!Xe(e[n])?Y(t)||He(r[n])?r[n]=Array.isArray(e[n])?et(e[n],[]):{...et(e[n])}:tt(e[n],B(t)?{}:t[n],r[n]):Ke(e[n],t[n])?delete r[n]:r[n]=!0;return r}var rt=(e,t)=>tt(e,t,et(t)),nt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Y(e)?e:t?""===e?NaN:e?+e:e:r&&ge(e)?new Date(e):n?n(e):e;function it(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return _e(t)?t.files:Ie(t)?$e(e.refs).value:Je(t)?[...t.selectedOptions].map((({value:e})=>e)):U(t)?Be(e.refs).value:nt(Y(t.value)?e.ref.value:t.value,e)}var st=e=>Y(e)?e:Ve(e)?e.source:$(e)?Ve(e.value)?e.value.source:e.value:e;function at(e,t,r){const n=G(e,r);if(n||Se(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),s=G(t,n),a=G(e,n);if(s&&!Array.isArray(s)&&r!==n)return{name:r};if(a&&a.type)return{name:n,error:a};i.pop()}return{name:r}}const ot={mode:ee,reValidateMode:X,shouldFocusError:!0};function lt(e={},t){let r={...ot,...e};const n=e.resetOptions&&e.resetOptions.keepDirtyValues;let i,s={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},o=($(r.defaultValues)||$(r.values))&&we(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:we(o),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={watch:Ge(),array:Ge(),state:Ge()},f=Oe(r.mode),m=Oe(r.reValidateMode),v=r.criteriaMode===re,y=async e=>{if(h.isValid||e){const e=r.resolver?pe((await j()).errors):await C(a,!0);e!==s.isValid&&p.state.next({isValid:e})}},g=e=>h.isValidating&&p.state.next({isValidating:e}),x=(e,t,r,n)=>{const i=G(a,e);if(i){const s=G(l,e,Y(r)?G(o,e):r);Y(s)||n&&n.defaultChecked||t?Ne(l,e,t?s:it(i._f)):T(e,s),u.mount&&y()}},b=(e,t,r,n,i)=>{let a=!1,l=!1;const u={name:e};if(!r||n){h.isDirty&&(l=s.isDirty,s.isDirty=u.isDirty=k(),a=l!==u.isDirty);const r=Ke(G(o,e),t);l=G(s.dirtyFields,e),r?Ye(s.dirtyFields,e):Ne(s.dirtyFields,e,!0),u.dirtyFields=s.dirtyFields,a=a||h.dirtyFields&&l!==!r}if(r){const t=G(s.touchedFields,e);t||(Ne(s.touchedFields,e,r),u.touchedFields=s.touchedFields,a=a||h.touchedFields&&t!==r)}return a&&i&&p.state.next(u),a?u:{}},w=(t,r,n,a)=>{const o=G(s.errors,t),l=h.isValid&&Ee(r)&&s.isValid!==r;var u;if(e.delayError&&n?(u=()=>((e,t)=>{Ne(s.errors,e,t),p.state.next({errors:s.errors})})(t,n),i=e=>{clearTimeout(d),d=window.setTimeout(u,e)},i(e.delayError)):(clearTimeout(d),i=null,n?Ne(s.errors,t,n):Ye(s.errors,t)),(n?!Ke(o,n):o)||!pe(a)||l){const e={...a,...l&&Ee(r)?{isValid:r}:{},errors:s.errors,name:t};s={...s,...e},p.state.next(e)}g(!1)},j=async e=>await r.resolver(l,r.context,((e,t,r,n)=>{const i={};for(const r of e){const e=G(t,r);e&&Ne(i,r,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}})(e||c.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),C=async(e,t,n={valid:!0})=>{for(const i in e){const a=e[i];if(a){const{_f:e,...i}=a;if(e){const i=c.array.has(e.name),o=await Qe(a,l,v,r.shouldUseNativeValidation,i);if(o[e.name]&&(n.valid=!1,t))break;!t&&(G(o,e.name)?i?Ae(s.errors,o,e.name):Ne(s.errors,e.name,o[e.name]):Ye(s.errors,e.name))}i&&await C(i,t,n)}}return n.valid},k=(e,t)=>(e&&t&&Ne(l,e,t),!Ke(A(),o)),S=(e,t,r)=>xe(e,c,{...u.mount?l:Y(t)?o:ge(e)?{[e]:t}:t},r,t),T=(e,t,r={})=>{const n=G(a,e);let i=t;if(n){const r=n._f;r&&(!r.disabled&&Ne(l,e,nt(t,r)),i=Me(r.ref)&&B(t)?"":t,Je(r.ref)?[...r.ref.options].forEach((e=>e.selected=i.includes(e.value))):r.refs?U(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((t=>t===e.value)):i===e.value))):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach((e=>e.checked=e.value===i)):_e(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||p.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&b(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&D(e)},N=(e,t,r)=>{for(const n in t){const i=t[n],s=`${e}.${n}`,o=G(a,s);!c.array.has(e)&&He(i)&&(!o||o._f)||q(i)?T(s,i,r):N(s,i,r)}},P=(e,r,n={})=>{const i=G(a,e),s=c.array.has(e),d=we(r);Ne(l,e,d),s?(p.array.next({name:e,values:l}),(h.isDirty||h.dirtyFields)&&n.shouldDirty&&p.state.next({name:e,dirtyFields:rt(o,l),isDirty:k(e,d)})):!i||i._f||B(d)?T(e,d,n):N(e,d,n),De(e,c)&&p.state.next({}),p.watch.next({name:e}),!u.mount&&t()},O=async e=>{const t=e.target;let n=t.name;const o=G(a,n);if(o){let d,x;const k=t.type?it(o._f):W(e),S=e.type===H||e.type===K,T=!((u=o._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||r.resolver||G(s.errors,n)||o._f.deps)||((e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:!(r?n.isOnChange:i.isOnChange)||e))(S,G(s.touchedFields,n),s.isSubmitted,m,f),N=De(n,c,S);Ne(l,n,k),S?(o._f.onBlur&&o._f.onBlur(e),i&&i(0)):o._f.onChange&&o._f.onChange(e);const P=b(n,k,S,!1),O=!pe(P)||N;if(!S&&p.watch.next({name:n,type:e.type}),T)return h.isValid&&y(),O&&p.state.next({name:n,...N?{}:P});if(!S&&N&&p.state.next({}),g(!0),r.resolver){const{errors:e}=await j([n]),t=at(s.errors,a,n),r=at(e,a,t.name||n);d=r.error,n=r.name,x=pe(e)}else d=(await Qe(o,l,v,r.shouldUseNativeValidation))[n],d?x=!1:h.isValid&&(x=await C(a,!0));o._f.deps&&D(o._f.deps),w(n,x,d,P)}var u},D=async(e,t={})=>{let n,i;const o=me(e);if(g(!0),r.resolver){const t=await(async e=>{const{errors:t}=await j();if(e)for(const r of e){const e=G(t,r);e?Ne(s.errors,r,e):Ye(s.errors,r)}else s.errors=t;return t})(Y(e)?e:o);n=pe(t),i=e?!o.some((e=>G(t,e))):n}else e?(i=(await Promise.all(o.map((async e=>{const t=G(a,e);return await C(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||s.isValid)&&y()):i=n=await C(a);return p.state.next({...!ge(e)||h.isValid&&n!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!i&&Pe(a,(e=>e&&G(s.errors,e)),e?o:c.mount),i},A=e=>{const t={...o,...u.mount?l:{}};return Y(e)?t:ge(e)?G(t,e):e.map((e=>G(t,e)))},E=(e,t)=>({invalid:!!G((t||s).errors,e),isDirty:!!G((t||s).dirtyFields,e),isTouched:!!G((t||s).touchedFields,e),error:G((t||s).errors,e)}),_=(e,t={})=>{for(const n of e?me(e):c.mount)c.mount.delete(n),c.array.delete(n),G(a,n)&&(t.keepValue||(Ye(a,n),Ye(l,n)),!t.keepError&&Ye(s.errors,n),!t.keepDirty&&Ye(s.dirtyFields,n),!t.keepTouched&&Ye(s.touchedFields,n),!r.shouldUnregister&&!t.keepDefaultValue&&Ye(o,n));p.watch.next({}),p.state.next({...s,...t.keepDirty?{isDirty:k()}:{}}),!t.keepIsValid&&y()},L=(e,t={})=>{let n=G(a,e);const i=Ee(t.disabled);return Ne(a,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),c.mount.add(e),n?i&&Ne(l,e,t.disabled?void 0:G(l,e,it(n._f))):x(e,!0,t.value),{...i?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:st(t.min),max:st(t.max),minLength:st(t.minLength),maxLength:st(t.maxLength),pattern:st(t.pattern)}:{},name:e,onChange:O,onBlur:O,ref:i=>{if(i){L(e,t),n=G(a,e);const r=Y(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,s=(e=>Ie(e)||U(e))(r),l=n._f.refs||[];if(s?l.find((e=>e===r)):r===n._f.ref)return;Ne(a,e,{_f:{...n._f,...s?{refs:[...l.filter(Ze),r,...Array.isArray(G(o,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),x(e,!1,void 0,r)}else n=G(a,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!z(c.array,e)||!u.action)&&c.unMount.add(e)}}},M=()=>r.shouldFocusError&&Pe(a,(e=>e&&G(s.errors,e)),c.mount),F=(r,i={})=>{const d=r||o,f=we(d),m=r&&!pe(r)?f:o;if(i.keepDefaultValues||(o=d),!i.keepValues){if(i.keepDirtyValues||n)for(const e of c.mount)G(s.dirtyFields,e)?Ne(m,e,G(l,e)):P(e,G(m,e));else{if(be&&Y(r))for(const e of c.mount){const t=G(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Me(e)){const t=e.closest("form");if(t){t.reset();break}}}}a={}}l=e.shouldUnregister?i.keepDefaultValues?we(o):{}:f,p.array.next({values:m}),p.watch.next({values:m})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!h.isValid||!!i.keepIsValid,u.watch=!!e.shouldUnregister,p.state.next({submitCount:i.keepSubmitCount?s.submitCount:0,isDirty:i.keepDirty||i.keepDirtyValues?s.isDirty:!(!i.keepDefaultValues||Ke(r,o)),isSubmitted:!!i.keepIsSubmitted&&s.isSubmitted,dirtyFields:i.keepDirty||i.keepDirtyValues?s.dirtyFields:i.keepDefaultValues&&r?rt(o,r):{},touchedFields:i.keepTouched?s.touchedFields:{},errors:i.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},I=(e,t)=>F(Le(e)?e(l):e,t);return Le(r.defaultValues)&&r.defaultValues().then((e=>{I(e,r.resetOptions),p.state.next({isLoading:!1})})),{control:{register:L,unregister:_,getFieldState:E,_executeSchema:j,_focusError:M,_getWatch:S,_getDirty:k,_updateValid:y,_removeUnmounted:()=>{for(const e of c.unMount){const t=G(a,e);t&&(t._f.refs?t._f.refs.every((e=>!Ze(e))):!Ze(t._f.ref))&&_(e)}c.unMount=new Set},_updateFieldArray:(e,t=[],r,n,i=!0,c=!0)=>{if(n&&r){if(u.action=!0,c&&Array.isArray(G(a,e))){const t=r(G(a,e),n.argA,n.argB);i&&Ne(a,e,t)}if(c&&Array.isArray(G(s.errors,e))){const t=r(G(s.errors,e),n.argA,n.argB);i&&Ne(s.errors,e,t),((e,t)=>{!Q(G(e,t)).length&&Ye(e,t)})(s.errors,e)}if(h.touchedFields&&c&&Array.isArray(G(s.touchedFields,e))){const t=r(G(s.touchedFields,e),n.argA,n.argB);i&&Ne(s.touchedFields,e,t)}h.dirtyFields&&(s.dirtyFields=rt(o,l)),p.state.next({name:e,isDirty:k(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ne(l,e,t)},_getFieldArray:t=>Q(G(u.mount?l:o,t,e.shouldUnregister?G(o,t,[]):[])),_reset:F,_updateFormState:e=>{s={...s,...e}},_subjects:p,_proxyFormState:h,get _fields(){return a},get _formValues(){return l},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return o},get _names(){return c},set _names(e){c=e},get _formState(){return s},set _formState(e){s=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:D,register:L,handleSubmit:(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let i=we(l);if(p.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await j();s.errors=e,i=t}else await C(a);Ye(s.errors,"root"),pe(s.errors)?(p.state.next({errors:{}}),await e(i,n)):(t&&await t({...s.errors},n),M()),p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:pe(s.errors),submitCount:s.submitCount+1,errors:s.errors})},watch:(e,t)=>Le(e)?p.watch.subscribe({next:r=>e(S(void 0,t),r)}):S(e,t,!0),setValue:P,getValues:A,reset:I,resetField:(e,t={})=>{G(a,e)&&(Y(t.defaultValue)?P(e,G(o,e)):(P(e,t.defaultValue),Ne(o,e,t.defaultValue)),t.keepTouched||Ye(s.touchedFields,e),t.keepDirty||(Ye(s.dirtyFields,e),s.isDirty=t.defaultValue?k(e,G(o,e)):k()),t.keepError||(Ye(s.errors,e),h.isValid&&y()),p.state.next({...s}))},clearErrors:e=>{e&&me(e).forEach((e=>Ye(s.errors,e))),p.state.next({errors:e?s.errors:{}})},unregister:_,setError:(e,t,r)=>{const n=(G(a,e,{_f:{}})._f||{}).ref;Ne(s.errors,e,{...t,ref:n}),p.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},setFocus:(e,t={})=>{const r=G(a,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:E}}function ut(e={}){const r=t.useRef(),[n,i]=t.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Le(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...lt(e,(()=>i((e=>({...e}))))),formState:n});const s=r.current.control;return s._options=e,ye({subject:s._subjects.state,next:e=>{fe(e,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),t.useEffect((()=>{s._stateFlags.mount||(s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.useEffect((()=>{e.values&&!Ke(e.values,s._defaultValues)&&s._reset(e.values,s._options.resetOptions)}),[e.values,s]),t.useEffect((()=>{n.submitCount&&s._focusError()}),[s,n.submitCount]),r.current.formState=he(n,s),r.current}var ct={addressChange:"vanguard.checkout.address.cta.change",addressAdd:"vanguard.checkout.address.cta.add",addressFormTitle:"vanguard.checkout.address.formTitle",addressName:"vanguard.checkout.address.name",addressRequired:"vanguard.checkout.address.required",addressLineFirst:"vanguard.checkout.address.line1",addressLineSecond:"vanguard.checkout.address.line2",addressZipCode:"vanguard.checkout.address.zipcode",addressCityTown:"vanguard.checkout.address.cityTown",addressCountry:"vanguard.checkout.address.country",addressCancel:"vanguard.checkout.address.cta.cancel",addressConfirm:"vanguard.checkout.address.cta.confirm",addressSearch:"vanguard.checkout.address.search",addressAddNew:"vanguard.checkout.address.addNew",addressRemove:"vanguard.cart.overlay.delete",addressTitle:"vanguard.common.nameTitle",addressAdditionalNames:"vanguard.common.name.optionalNames",addressRemoveConfirm:"vanguard.confirmationDialog.message",btnCancel:"vanguard.checkout.address.cancel",btnConfirm:"vanguard.checkout.address.confirm",delete:"vanguard.cart.delete",unitPrice:"vanguard.cart.netPricePerUnit",totalPrice:"vanguard.cart.totalPrice",totalExpressCostDescription:"vanguard.cart.total.expressCostDescription",totalGeneral:"vanguard.cart.total.general",cartEmpty:"vanguard.cart.empty",productNotAvailable:"vanguard.cart.product.notAvailable",configurationNotValid:"vanguard.cart.configuration.notValid",addToWishlist:"vanguard.cart.addToWishlist",uploadFile:"vanguard.cart.uploadFile",edit:"vanguard.cart.edit",duplicate:"vanguard.cart.duplicate",copySuccess:"vanguard.cart.copy.success",copyError:"vanguard.cart.copy.error",overlayMessage:"vanguard.cart.overlay.message",overlayCancel:"vanguard.cart.overlay.cancel",overlayDelete:"vanguard.cart.overlay.delete",positionText:"vanguard.cart.positionText",salesTextToolTip:"vanguard.cart.salesText.toolTip",positionTextError:"vanguard.cart.positionText.error",quantityLimitExceeded:"vanguard.cart.notifications.quantityLimitExceeded",reduction:"vanguard.cart.reduction",summaryClose:"vanguard.cart.summary.close",summaryOpen:"vanguard.cart.summary.open",salesCommentLabel:"vanguard.cart.salesCommentLabel",salesText:"vanguard.cart.salesText",salesTextError:"vanguard.cart.salesText.error",fileUploaded:"vanguard.cart.fileUploaded",fileUploadTooltip:"vanguard.cart.showUploadFile.tooltip",fileUploadFailed:"vanguard.cart.notifications.FileUploadFailed",fileDeleted:"vanguard.cart.fileDeleted",fileDeleteFailed:"vanguard.cart.notifications.FileDeleteFailed",emksNewKeySystem:"vanguard.cart.emks.new_key_system",emksExtension:"vanguard.cart.emks.extension",emksReorder:"vanguard.cart.emks.reorder",emksNewSeries:"vanguard.cart.emks.new_series",deleteSuccess:"vanguard.cart.delete.success",deleteError:"vanguard.cart.delete.error",quantityChangeSuccess:"vanguard.cart.quantityChanged.success",quantityChangeError:"vanguard.cart.quantityChanged.error",itemsSalesTotalPrice:"vanguard.checkout.item.sales.totalPrice",totalPriceTooltip:"vanguard.checkout.item.sales.totalPrice.tooltip",itmesSalesQuantity:"vanguard.checkout.item.sales.quantity",masterEANGTIN:"vanguard.checkout.ean",listPrice:"vanguard.checkout.item.sales.listPrice",userPrice:"vanguard.checkout.item.sales.userPrice",discount:"vanguard.checkout.item.sales.discount",netPrice:"vanguard.checkout.entry.sales.netPricePerUnit",committedDelivery:"vanguard.checkout.committedDelivery",ean:"vanguard.cart.ean",quantity:"vanguard.cart.quantity",amountOfSets:"vanguard.cart.emks.newSeries.setAmount",quantityPerSet:"vanguard.cart.quantityPerSet",quantityPerItem:"vanguard.cart.quantityPerItem",items:"vanguard.cart.items",lockPosition:"vanguard.cart.lockPosition",configurationData:"vanguard.cart.configurationData",createWishlistSuccess:"vanguard.common.wishlist.createWishlist.success",createWishlistError:"vanguard.common.wishlist.createWishlist.error",editWishlistSuccess:"vanguard.common.wishlist.edit.success",editWishlistError:"vanguard.common.wishlist.edit.error",wishlistCreateTitle:"vanguard.common.wishlist.create.title",wishlistName:"vanguard.common.wishlist.name",wishlistNamePlaceholder:"vanguard.common.wishlist.name.placeholder",wishlistPublic:"vanguard.common.wishlist.public",wishlistPrivate:"vanguard.common.wishlist.private",wishlistOptions:"vanguard.common.wishlist.options",wishlistDescription:"vanguard.common.wishlist.description",wishlistDescriptionPlaceholder:"vanguard.common.wishlist.description.placeholder",wishlistCancel:"vanguard.common.wishlist.cancel",wishlistCreate:"vanguard.common.wishlist.create",wishlistNew:"vanguard.common.wishlist.new",wishlistConfirm:"vanguard.common.wishlist.confirm",wishlistSubmit:"vanguard.common.wishlist.{mode}",wishlistCopy:"vanguard.common.wishlist.copy",wishlistMove:"vanguard.common.wishlist.move",wishlistCopySuccess:"vanguard.common.wishlist.copyToWishlist.success",wishlistMoveSuccess:"vanguard.common.wishlist.moveToWishlist.success",wishlistCopyError:"vanguard.common.wishlist.copyToWishlist.error",wishlistMoveError:"vanguard.common.wishlist.moveToWishlist.error",addToWishlistSuccess:"vanguard.common.wishlist.addToWishlist.success",wishlistToDeleteWarning:"vanguard.common.wishlist.wishlistToDeleteWarning",wishlistHeader:"vanguard.common.wishlist.header",namePlaceholderPerson:"vanguard.common.name.person",namePlaceholderCompany:"vanguard.common.name.company",addressRegion:"vanguard.common.address.region",back:"vanguard.common.back",oneTimeAddressTooltip:"vanguard.common.address.onetime.tooltip",authRequiredField:"field.required",authTitle:"mks.MksAuthenticator.AuthFormKeySystemCode.headline",authSecurityQuestionTitle:"mks.MksAuthenticator.AuthFormSecurityQuestion.headline",authPasswordTitle:"mks.MksAuthenticator.AuthFormPassword.headline",authTanCodeTitle:"mks.MksAuthenticator.AuthFormTanCode.headline",authSystemCodeLabel:"mks.MksAuthenticator.AuthFormKeySystemCode.input.label",authSecurityCardNumberLabel:"mks.MksAuthenticator.AuthFormSecurityCardNumber.input.label",authPasswordLabel:"mks.MksAuthenticator.AuthFormPassword.input.label",authTanCodeLabel:"mks.MksAuthenticator.AuthFormTanCode.input.label",authLimitedLoginText:"mks.MksAuthenticator.AuthPermissions.limitedLogin.text",authLimitedLoginButton:"mks.MksAuthenticator.AuthPermissions.limitedLogin.link.label",authSubmitButton:"mks.MksAuthenticator.AuthFormKeySystemCode.button.label",expiredToken:"vanguard.cart.expiredToken",refreshToken:"vanguard.cart.refreshToken",authPasswordInvalid:"OneUi.Molecules.InputValiadatable.error.emksPassword",authTanInvalid:"OneUi.Molecules.InputValiadatable.error.emksTanCode"},dt=function(e){var t=e.isRemove,r=e.onCancel,i=e.onConfirm,s=D().t;return u.jsxs("div",{className:"flex space-x-4 justify-end",children:[u.jsx(n.Button,{variant:"outlined",testid:"cancel",onClick:r,children:s(ct.btnCancel)}),u.jsx(n.Button,{testid:"confirm",onClick:i,children:s(t?ct.addressRemove:ct.btnConfirm)})]})};function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ft=function(r){var i,s,a,o,l,c,d,h,p,f,m,v,y,g,x,b,w,j,C,k,S,T,N,P,O,A,E,_,L,M,F,I,V,U,q,B=r.hideDialog,R=r.setSessionAddresses,$=r.switchMode,W=r.onAdd,z=r.editAddress,Q=r.sessionAddresses,Y=D(),G=Y.t,H=Y.cartCode,K=ut({defaultValues:z?{titleCode:z.titleCode,companyNameLine1:z.companyNameLine1,companyNameLine2:z.companyNameLine2,companyNameLine3:z.companyNameLine3,companyNameLine4:z.companyNameLine4,country:null==(i=z.country)?void 0:i.isocode,regionCode:null==(s=z.region)?void 0:s.isocode,streetName:z.line1,houseNumber:z.line2,zipCode:z.postalCode,city:z.town}:null}),J=K.register,Z=K.control,X=K.formState,ee=K.watch,te=K.setValue,re=K.handleSubmit,ne=X.errors,ie=ee(["titleCode","country"]),se=ie[0],ae=ie[1],oe=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:H}).data,le=e.store.api.checkout.useGetTitlesQuery({cartCode:H}).data,ue=e.store.api.checkout.useGetRegionsQuery({countryCode:ae}).data,ce=e.store.api.checkout.useGetAddressValidationQuery({isoCode:null!=ae?ae:""}).data,de=function(e,r){var n=t.useRef();return t.useEffect((function(){var t,i,s;if("undefined"!=typeof google&&null!=(t=google)&&null!=(i=t.maps)&&null!=(s=i.places)&&s.Autocomplete&&e){var a=new google.maps.places.Autocomplete(n.current,{fields:["address_components"]});return a.setComponentRestrictions({country:e.map((function(e){return e.isocode.toString()}))}),a.addListener("place_changed",(function(){var e,t=((null==(e=a.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("house_number")&&(e.houseNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});Object.keys(t).forEach((function(e){return r(e,t[e])}))})),function(){return a.unbindAll()}}}),[e,r]),n}(oe,te),he=Object.keys(null!=ce?ce:{}).reduce((function(e,t){return e[t].pattern&&(e[t].pattern.value=new RegExp(e[t].pattern.value)),e}),structuredClone(ce||{})),pe=J("streetName",he.streetName);return u.jsxs("div",{className:"space-y-3",children:[u.jsx(n.Button,{variant:"text",iconType:"arrowleft",onClick:function(){return $()},children:G(ct.back)}),u.jsxs("form",{"data-testid":"addAddress",className:"space-y-1",children:[(null==le||null==(a=le.titles)?void 0:a.length)>0&&u.jsx(Ce,{control:Z,name:"titleCode",rules:he.titleCode,render:function(e){var t,r,i,s=e.field;return u.jsx(n.Select,{label:G(ct.addressTitle),testid:"titleInput",options:null==le||null==(t=le.titles)?void 0:t.map((function(e){return{label:e.name,value:e.code}})),error:Boolean(null==ne?void 0:ne.titleCode),value:s.value,onChange:s.onChange,required:null==(r=he.titleCode)||null==(i=r.required)?void 0:i.value})}}),u.jsx(n.TextInput,pt(pt({},J("companyNameLine1",he.companyNameLine1)),{},{label:G(ct.addressName),testid:"nameInput1",autoComplete:"organization",maxlength:null==(o=he.companyNameLine1)?void 0:o.maxLength.value,required:null==(l=he.companyNameLine1)||null==(c=l.required)?void 0:c.value,error:Boolean(null==ne?void 0:ne.companyNameLine1),hint:null==ne||null==(d=ne.companyNameLine1)?void 0:d.message,placeholder:{"0001":G(ct.namePlaceholderPerson),"0002":G(ct.namePlaceholderPerson),"0003":G(ct.namePlaceholderCompany),"0004":G(ct.namePlaceholderPerson)}[se]})),u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(n.TextInput,pt(pt({},J("companyNameLine2",he.companyNameLine2)),{},{testid:"nameInput2",label:G(ct.addressAdditionalNames),autoComplete:"organization",maxlength:null==(h=he.companyNameLine2)?void 0:h.maxLength.value,required:null==(p=he.companyNameLine2)||null==(f=p.required)?void 0:f.value,error:Boolean(null==ne?void 0:ne.companyNameLine2),hint:null==ne||null==(m=ne.companyNameLine2)?void 0:m.message})),u.jsx(n.TextInput,pt(pt({},J("companyNameLine3",he.companyNameLine3)),{},{testid:"nameInput3",autoComplete:"organization",maxlength:null==(v=he.companyNameLine3)?void 0:v.maxLength.value,required:null==(y=he.companyNameLine3)||null==(g=y.required)?void 0:g.value,error:Boolean(null==ne?void 0:ne.companyNameLine3),hint:null==ne||null==(x=ne.companyNameLine3)?void 0:x.message})),u.jsx(n.TextInput,pt(pt({},J("companyNameLine4",he.companyNameLine4)),{},{testid:"nameInput4",autoComplete:"organization",maxlength:null==(b=he.companyNameLine4)?void 0:b.maxLength.value,required:null==(w=he.companyNameLine4)||null==(j=w.required)?void 0:j.value,error:Boolean(null==ne?void 0:ne.companyNameLine4),hint:null==ne||null==(C=ne.companyNameLine4)?void 0:C.message}))]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-6/12",children:u.jsx(Ce,{control:Z,name:"country",rules:he.country,render:function(e){var t,r,i,s=e.field;return u.jsx(n.Select,{label:G(ct.addressCountry),testid:"countryInput",options:null==oe?void 0:oe.map((function(e){return{label:e.name,value:e.isocode}})),required:null==(t=he.country)||null==(r=t.required)?void 0:r.value,error:Boolean(null==ne?void 0:ne.country),errorText:null==ne||null==(i=ne.country)?void 0:i.message,value:s.value,onChange:function(e){s.onChange(e),K.resetField("regionCode",{defaultValue:""})}})}})}),u.jsx("div",{className:"sm:w-6/12",children:(null==ue?void 0:ue.length)>0&&u.jsx(Ce,{control:Z,name:"regionCode",rules:he.regionCode,render:function(e){var t,r,i,s=e.field;return u.jsx(n.Select,{label:G(ct.addressRegion),testid:"regionInput",options:null==ue?void 0:ue.map((function(e){return{label:e.name,value:e.isocode}})),required:null==(t=he.region)||null==(r=t.required)?void 0:r.value,error:Boolean(null==ne?void 0:ne.regionCode),errorText:null==ne||null==(i=ne.regionCode)?void 0:i.message,value:s.value,onChange:s.onChange})}})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[u.jsx("div",{className:"sm:w-9/12",children:u.jsx(n.TextInput,pt(pt({},pe),{},{ref:function(e){pe.ref(e),de.current=e},testid:"streetNameInput",label:G(ct.addressLineFirst),autoComplete:"street-address",maxlength:null==(k=he.streetName)?void 0:k.maxLength.value,required:null==(S=he.streetName)||null==(T=S.required)?void 0:T.value,error:Boolean(null==ne?void 0:ne.streetName),hint:null==ne||null==(N=ne.streetName)?void 0:N.message,inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-3/12",children:u.jsx(n.TextInput,pt(pt({},J("houseNumber",he.houseNumber)),{},{testid:"houseNumberInput",label:G(ct.addressLineSecond),error:Boolean(null==ne?void 0:ne.houseNumber),hint:null==ne||null==(P=ne.houseNumber)?void 0:P.message,maxlength:null==(O=he.houseNumber)?void 0:O.maxLength.value,required:null==(A=he.houseNumber)||null==(E=A.required)?void 0:E.value,autoComplete:"house-address",inputClassName:"w-full"}))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[u.jsx("div",{className:"sm:w-3/12",children:u.jsx(n.TextInput,pt(pt({},J("zipCode",he.zipCode)),{},{testid:"zipCodeInput",label:G(ct.addressZipCode),error:Boolean(null==ne?void 0:ne.zipCode),hint:null==ne||null==(_=ne.zipCode)?void 0:_.message,maxlength:null==(L=he.zipCode)?void 0:L.maxLength.value,required:null==(M=he.zipCode)||null==(F=M.required)?void 0:F.value,autoComplete:"postal-code",inputClassName:"w-full"}))}),u.jsx("div",{className:"sm:w-9/12",children:u.jsx(n.TextInput,pt(pt({},J("city",he.city)),{},{testid:"cityInput",label:G(ct.addressCityTown),error:Boolean(null==ne?void 0:ne.city),hint:null==ne||null==(I=ne.city)?void 0:I.message,maxlength:null==(V=he.city)?void 0:V.maxLength.value,required:null==(U=he.city)||null==(q=U.required)?void 0:q.value,autoComplete:"address-level2",inputClassName:"w-full"}))})]})]}),u.jsx(dt,{onCancel:$,onConfirm:function(){re((function(e){var t,r,n,i,s,a={title:null==le||null==(t=le.titles)||null==(r=t.find((function(t){return t.code===e.titleCode})))?void 0:r.name,titleCode:e.titleCode||"",companyNameLine1:e.companyNameLine1.trim()||null,companyNameLine2:(null==(n=e.companyNameLine2)?void 0:n.trim())||null,companyNameLine3:(null==(i=e.companyNameLine3)?void 0:i.trim())||null,companyNameLine4:(null==(s=e.companyNameLine4)?void 0:s.trim())||null,country:oe.find((function(t){return t.isocode===e.country})),region:ue.find((function(t){return t.isocode===e.regionCode}))||null,line1:e.streetName,line2:e.houseNumber,postalCode:e.zipCode,town:e.city};z?(Q.splice(Q.indexOf(z),1,pt(pt({},a),{},{id:z.id})),R([].concat(Q))):R([].concat(Q,[pt(pt({},a),{},{id:"session-"+Date.now()})])),W(a),B()}))()}})]})},mt=function(e){var t=e.value,r=e.highlight,i=t.companyNameLine1,s=t.companyNameLine2,a=t.companyNameLine3,o=t.companyNameLine4,l=t.line1,c=t.line2,d=t.postalCode,h=t.town,p=t.country,f=t.title,m=t.region;return u.jsxs("div",{"data-testid":"addressPreview",className:"flex-grow",children:[f&&u.jsx(n.Text,{testid:"title",highlight:r,children:f}),i&&u.jsx(n.Text,{testid:"companyNameLine1",highlight:r,children:i}),s&&u.jsx(n.Text,{testid:"companyNameLine2",highlight:r,children:s}),a&&u.jsx(n.Text,{testid:"companyNameLine3",highlight:r,children:a}),o&&u.jsx(n.Text,{testid:"companyNameLine4",highlight:r,children:o}),u.jsxs("div",{className:"flex space-x-1",children:[l&&u.jsx(n.Text,{testid:"street",highlight:r,children:l}),c&&u.jsx(n.Text,{testid:"houseNumber",highlight:r,children:c})]}),u.jsxs("div",{className:"flex space-x-1",children:[d&&u.jsx(n.Text,{testid:"postalCode",highlight:r,children:d}),h&&u.jsx(n.Text,{testid:"town",highlight:r,children:h})]}),m&&u.jsx(n.Text,{testid:"region",highlight:r,children:m.name}),p&&u.jsx(n.Text,{testid:"country",highlight:r,children:p.name})]})},vt=function(e){var r=e.value,s=e.allAddresses,a=e.hideDialog,o=e.switchMode,l=e.onAdd,c=e.onChange,d=D().t,h=t.useState(null==r?void 0:r.id),p=h[0],f=h[1],m=t.useState(""),v=m[0],y=m[1],g=s.filter((function(e){var t;return[e.title,e.companyNameLine1,e.companyNameLine2,e.companyNameLine3,e.companyNameLine4,e.line1,e.line2,e.town,e.country.name,e.postalCode,null==(t=e.region)?void 0:t.name].join(" ").toLowerCase().includes(v.toLowerCase())}));return u.jsxs("div",{"data-testid":"searchAddress",className:"mt-6 sm:mt-0 space-y-3",children:[u.jsx(n.TextInput,{testid:"searchInput",inputClassName:"w-full",value:v,onChange:function(e){return y(e.target.value)},icon:{type:"search"}}),g.length>0&&u.jsx("div",{className:"p-2 space-y-4 max-h-96 overflow-y-auto","data-testid":"list",children:g.map((function(e,t){var r;return u.jsxs("div",{className:i("flex items-start p-2 text-left w-3/4 shadow-xl border-2 hover:bg-primarypalette-200 cursor-pointer flex-shrink-0 space-x-3",{"border-primary":(null==e?void 0:e.id)===p}),onClick:function(){return f(null==e?void 0:e.id)},"data-testid":"item",children:[u.jsx(n.Icon,{type:"location",size:"md",color:"tertiary",className:"self-center ml-1"}),u.jsx(mt,{value:e,highlight:v}),(null==(r=e.id)?void 0:r.includes("session"))&&u.jsxs("div",{className:"space-x-2 flex px-1",children:[u.jsx(n.Tooltip,{position:"bottom",render:d(ct.oneTimeAddressTooltip),children:u.jsx(n.Icon,{type:"clockLeft",color:"tertiary",className:"py-1"})}),u.jsx(n.Button,{iconType:"edit",variant:"text",onClick:function(){o(e)}})]})]},t)}))}),l&&u.jsx(n.Button,{variant:"text",iconType:"plus",onClick:function(){return o()},children:d(ct.addressAdd)}),u.jsx(dt,{onCancel:a,onConfirm:function(){var e,t=s.find((function(e){return e.id===p}));null!=t&&null!=(e=t.id)&&e.includes("session")?(t.id=null,l(t)):c(t),a()}})]})},yt=function(e){var r=e.value,i=e.savedAddresses,s=e.hideDialog,a=e.onChange,o=e.onAdd,l=D().t,c=function(e,r){var n=t.useState((function(){try{var t=sessionStorage.getItem(e);return JSON.parse(t)||r}catch(e){return r}})),i=n[0],s=n[1];return[i,t.useCallback((function(t){try{s(t),sessionStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}),[e])]}("SessionAddresses",[]),d=c[0],h=c[1],p=o?[].concat(i,d):i,f=t.useState(0===(null==p?void 0:p.length)),m=f[0],v=f[1],y=t.useState(null),g=y[0],x=y[1],b=function(e){v((function(e){return!e})),x(e)};return u.jsxs(n.Dialog,{title:l(ct.addressFormTitle),onClose:s,children:[!m&&u.jsx(vt,{value:r,allAddresses:p,hideDialog:s,switchMode:b,onAdd:o,onChange:a,setEditAddress:x}),m&&u.jsx(ft,{hideDialog:s,setSessionAddresses:h,switchMode:b,onAdd:o,editAddress:g,sessionAddresses:d})]})},gt=function(e){var t=e.value,r=e.hideDialog,i=e.onRemove,s=D().t;return u.jsxs(n.Dialog,{title:s(ct.addressRemove),testid:"deleteAddressDialog",onClose:r,children:[u.jsx(n.Text,{children:s(ct.addressRemoveConfirm)}),u.jsx(dt,{isRemove:!0,onCancel:r,onConfirm:function(){i(null==t?void 0:t.id),r()}})]})},xt=function(e){var r=e.label,i=e.value,s=e.savedAddresses,a=void 0===s?[]:s,o=e.onChange,l=e.onAdd,c=e.onRemove,d=D().t,h=t.useState(!1),p=h[0],f=h[1],m=t.useState(!1),v=m[0],y=m[1],g=Boolean(l)||Boolean(o)&&a.length>1;return u.jsxs("div",{"data-testid":"address",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:r}),i&&u.jsx(mt,{value:i}),u.jsxs("div",{className:"flex space-x-2 mt-1 divide-x-2",children:[g&&u.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return f(!0)},children:d(i?ct.addressChange:ct.addressAdd)}),c&&i&&u.jsx("div",{className:g&&"pl-2",children:u.jsx(n.Button,{testid:"remove",variant:"text",onClick:function(){return y(!0)},children:d(ct.addressRemove)})})]}),p&&u.jsx(yt,{value:i,savedAddresses:a,hideDialog:function(){return f(!1)},onChange:o,onAdd:l}),v&&u.jsx(gt,{value:i,hideDialog:function(){return y(!1)},onRemove:c})]})};function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jt=function(r){var i,s,a,o,l,c,d=r.onClose,h=r.headPositionCode,p=r.keySystemCode,f=D().t,m=e.store.hooks.useNotifications().notify,v=e.store.api.keysystem.useAuthenticateMutation()[0],y=e.store.api.keysystem.useConfirmAuthenticationMutation()[0],x=t.useState(null),b=x[0],w=x[1],j=(null==b||null==(i=b.requiredSecurityCardAuthentication)?void 0:i.authenticationMode)||"KEY_SYSTEM_CODE",C={value:!0,message:f(ct.authRequiredField)},k=ut({defaultValues:{keySystemCode:p}}),S=k.formState.errors,T=k.register,N=k.handleSubmit,P=k.setValue,O=N(function(){var e=E(I.mark((function e(t){var r,n,i,s,a;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({keySystemCode:p,headPositionCode:h,authentication:wt(wt({},t),{},{securityQuestions:null==b||null==(r=b.requiredSecurityCardAuthentication)?void 0:r.securityQuestions.map((function(e,r){return{question:e.question,answer:t.securityQuestions[r]}})),authenticationMode:"KEY_SYSTEM_CODE"===j&&t.securityCardNumber?"SECURITY_CARD_NUMBER":j})}).unwrap();case 3:if(!(n=e.sent).requiredSecurityCardAuthentication){e.next=8;break}w(n),e.next=11;break;case 8:return e.next=10,y({keySystemCode:p,headPositionCode:h}).unwrap();case 10:d();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),a=null==e.t0||null==(i=e.t0.data)||null==(s=i.errors)?void 0:s[0],m("error",null==a?void 0:a.message,null==a?void 0:a.errorId);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),A=function(){var e=E(I.mark((function e(){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({keySystemCode:p,headPositionCode:h,limitedLogin:!0}).unwrap();case 3:d(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m("error",e.t0.data.errors[0].message,e.t0.data.errors[0].errorId);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return u.jsxs(n.Dialog,{title:[{KEY_SYSTEM_CODE:f(ct.authTitle),SECURITY_CARD_NUMBER:f(ct.authTitle),PASSWORD:f(ct.authPasswordTitle),SECURITY_QUESTION:f(ct.authSecurityQuestionTitle),TAN_CODE:f(ct.authTanCodeTitle)}[j],p&&"("+p+")"].join(" "),onClose:d,testid:"authenticationDialog",children:[u.jsxs("form",{className:"space-y-0.5","data-testid":"authForm",onSubmit:O,children:[("KEY_SYSTEM_CODE"===j||"SECURITY_CARD_NUMBER"===j)&&u.jsxs(u.Fragment,{children:[u.jsx(n.TextInput,wt(wt({},T("keySystemCode",{required:C})),{},{testid:"keySystemCodeInput",label:f(ct.authSystemCodeLabel),required:!0,disabled:!0,error:Boolean(S.keySystemCode),hint:null==S||null==(s=S.keySystemCode)?void 0:s.message,onChange:function(e){P("keySystemCode",g(e.target.value).toUpperCase())}})),u.jsx(n.TextInput,wt(wt({},T("securityCardNumber")),{},{testid:"securityNumberInput",type:"password",label:f(ct.authSecurityCardNumberLabel),error:Boolean(S.securityCardNumber),hint:null==S||null==(a=S.securityCardNumber)?void 0:a.message,onChange:function(e){P("securityCardNumber",g(e.target.value))}}))]}),"PASSWORD"===j&&u.jsx(n.TextInput,wt(wt({},T("securityCardPassword",{required:C,pattern:{value:/^\S+$/i,message:f(ct.authPasswordInvalid)}})),{},{testid:"securityCardPasswordInput",type:"password",label:f(ct.authPasswordLabel),required:!0,error:Boolean(S.securityCardPassword),hint:null==S||null==(o=S.securityCardPassword)?void 0:o.message})),"SECURITY_QUESTION"===j&&(null==b||null==(l=b.requiredSecurityCardAuthentication)?void 0:l.securityQuestions.map((function(e,t){var r,i,s;return u.jsx(n.TextInput,wt(wt({},T("securityQuestions."+t,{required:C})),{},{testid:"securityQuestionsInput",type:"password",label:e.question,required:!0,error:Boolean(null==S||null==(r=S.securityQuestions)?void 0:r[t]),hint:null==S||null==(i=S.securityQuestions)||null==(s=i[t])?void 0:s.message}),t)}))),"TAN_CODE"===j&&u.jsx(n.TextInput,wt(wt({},T("tanCode",{required:C,pattern:{value:/^\w{4}$|^\d{6}$/i,message:f(ct.authTanInvalid)}})),{},{testid:"tanCodeInput",type:"password",label:f(ct.authTanCodeLabel),required:!0,error:Boolean(S.tanCode),hint:null==S||null==(c=S.tanCode)?void 0:c.message})),u.jsx("input",{type:"submit",hidden:!0})]}),(null==b?void 0:b.extendedAuthentication)&&u.jsx(n.Text,{children:f(ct.authLimitedLoginText)}),u.jsxs("div",{className:"flex flex-col md:flex-row justify-end pt-4 space-y-2 md:space-x-2 md:space-y-0",children:[(null==b?void 0:b.extendedAuthentication)&&u.jsx(n.Button,{variant:"outlined",onClick:A,testid:"limitedLoginButton",children:f(ct.authLimitedLoginButton)}),u.jsx(n.Button,{onClick:O,testid:"confirmButton",children:f(ct.authSubmitButton)})]})]})},Ct=function(r){var i=r.entry,s=D().t,a=t.useState(!1),o=a[0],l=a[1],c=e.store.api.keysystem.useValidateAuthenticationQuery({keySystemCode:i.keySystemCode,headPositionCode:i.headPositionCode},{skip:!i.keySystemCode||i.isReadOnly}).isError;return u.jsxs(u.Fragment,{children:[i.isInvalid&&u.jsxs("div",{className:"flex bg-red-50 py-2 px-4 space-x-2 border border-red-200 rounded","data-testid":"alert",children:[u.jsx(n.Icon,{type:"warning",size:"sm",color:"secondary"}),u.jsx(n.Text,{color:"secondary",testid:"description",children:i.isAvailable?s(ct.configurationNotValid):s(ct.productNotAvailable)})]}),c&&u.jsxs("div",{className:"flex bg-red-50 py-2 px-4 space-x-2 border border-red-200 rounded","data-testid":"expiredToken",children:[u.jsx(n.Icon,{type:"warning",size:"sm",color:"secondary"}),u.jsx(n.Text,{color:"secondary",testid:"description",children:s(ct.expiredToken)}),u.jsx(n.Button,{variant:"text",iconType:"refresh",onClick:function(){return l(!0)},testid:"authenticateButton",children:s(ct.refreshToken)}),o&&u.jsx(jt,{onClose:function(){return l(!1)},headPositionCode:i.headPositionCode,keySystemCode:i.keySystemCode})]})]})},kt=function(e){var t=e.onClose,r=e.onConfirm,i=D().t;return u.jsxs(n.Dialog,{title:i(ct.delete),onClose:t,testid:"confirmDeleteDialog",children:[u.jsx(n.Text,{children:i(ct.overlayMessage)}),u.jsxs("div",{className:"flex flex-row mt-8 space-x-4 justify-end",children:[u.jsx(n.Button,{variant:"outlined",onClick:t,testid:"cancelButton",children:i(ct.overlayCancel)}),u.jsx(n.Button,{onClick:r,testid:"confirmButton",children:i(ct.overlayDelete)})]})]})};function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt=function(t){var r=t.packageName,i=t.privacySwitchDisabled,s=t.wishlist,a=t.onClose,o=t.onAddToWishlist,l=D().t,c=e.store.hooks.useNotifications().notify,d=ut({defaultValues:s?Tt({},s):{publicAccess:!1}}),h=d.register,p=d.control,f=d.handleSubmit,m=d.setValue,v=(0,d.watch)(["publicAccess"])[0],y=e.store.api.wishlist.useCreateWishlistMutation()[0],g=e.store.api.wishlist.useUpdateWishlistItemMutation()[0],x=e.store.api.wishlist.useDeleteWishlistMutation()[0],b=e.store.api.wishlist.useGetWishlistToDeleteQuery({accessType:v?"SHARED":"PRIVATE"}).data,w=function(){var e=E(I.mark((function e(t){var n;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t).unwrap();case 3:if(n=e.sent,c("success",l(ct.createWishlistSuccess),r+".createWishlistSuccess"),"wishlist"===r){e.next=8;break}return e.next=8,o(n.code);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c("error",l(ct.createWishlistError),r+".createWishlistError");case 13:return e.prev=13,a(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=E(I.mark((function e(t,r,n){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({savedItemListCode:t,name:r,description:n,publicAccess:v}).unwrap();case 3:c("success",l(ct.editWishlistSuccess),"wishlistDetails.editSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c("error",l(ct.editWishlistError),"wishlistDetails.editError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r,n){return e.apply(this,arguments)}}();return u.jsxs("div",{"data-testid":"createWishlist",children:[u.jsxs("div",{className:"space-y-1",children:[b&&u.jsxs("div",{className:"flex bg-red-50 py-2 px-4 space-x-2 mb-3","data-testid":"alert",children:[u.jsx(n.Icon,{type:"warning",size:"sm",color:"secondary"}),u.jsx(n.Text,{color:"secondary",testid:"description",children:l(ct.wishlistToDeleteWarning,null==b?void 0:b.name,null==b?void 0:b.modificationDate)})]}),u.jsx(Ce,{control:p,name:"publicAccess",render:function(e){var t=e.field;return u.jsx(n.ToggleSwitch,{testid:"optionsSwitch",disabled:i,leftOption:{value:!1,title:l(ct.wishlistPrivate)},rightOption:{value:!0,title:l(ct.wishlistPublic)},selectedKey:t.value,onChange:function(){return m(t.name,!t.value)}})}}),u.jsx(n.TextInput,Tt(Tt({},h("name")),{},{label:l(ct.wishlistName),placeholder:l(ct.wishlistNamePlaceholder),className:"flex-grow",testid:"nameInput",maxlength:50})),u.jsx(n.TextInput,Tt(Tt({},h("description")),{},{label:l(ct.wishlistDescription),rows:5,testid:"descriptionInput",multiline:!0,placeholder:l(ct.wishlistDescriptionPlaceholder),maxlength:255}))]}),u.jsxs("div",{className:"flex flex-row mt-8 space-x-4 justify-end",children:[u.jsx(n.Button,{variant:"outlined",onClick:a,testid:"cancelButton",children:l(ct.wishlistCancel)}),u.jsx(n.Button,{onClick:function(){f((function(e){b&&x({savedItemListCode:b.code}),s?j(null==s?void 0:s.code,e.name,e.description):w({name:e.name,description:e.description,publicAccess:v}),a()}))()},testid:"submitButton",children:l(ct.wishlistSubmit.replace("{mode}",s?"edit":"create"))})]})]})},Pt=function(r){var i,s=r.isCopying,a=r.setIsCopying,o=r.onClose,l=r.onAddToWishlist,c=r.setIsFormOpen,d=D().t,h=e.store.api.wishlist.useGetWishlistsQuery({ekitSavedItemListOption:"BASIC"}).data,p=t.useState(""),f=p[0],m=p[1];return u.jsxs("div",{"data-testid":"selectWishlist",children:[u.jsxs("div",{className:"space-y-5",children:[u.jsx(n.ToggleSwitch,{testid:"actionModeSwitch",leftOption:{value:!0,title:d(ct.wishlistCopy)},rightOption:{value:!1,title:d(ct.wishlistMove)},selectedKey:s,onChange:a}),u.jsx(n.Select,{options:null==h||null==(i=h.results)?void 0:i.map((function(e){return{label:e.name,value:e.code}})),placeholder:d(ct.wishlistOptions),value:f,onChange:function(e){return m(e.target.value)},children:u.jsx(n.Button,{onClick:function(){return c(!0)},"data-testid":"addButton",variant:"text",isFullWidth:!0,iconType:"plus",testid:"addButton",children:d(ct.wishlistNew)})})]}),u.jsxs("div",{className:"flex flex-row mt-8 space-x-4 justify-end",children:[u.jsx(n.Button,{variant:"outlined",onClick:o,testid:"cancelButton",children:d(ct.wishlistCancel)}),u.jsx(n.Button,{isDisabled:!f,onClick:function(){return l(f)},testid:"confirmButton",children:d(ct.wishlistConfirm)})]})]})};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var At=function(r){var i=r.isCreatingOrEditing,s=void 0!==i&&i,a=r.copyDisabled,o=void 0!==a&&a,l=r.privacySwitchDisabled,c=void 0!==l&&l,d=r.packageName,h=r.wishlist,p=r.productCode,f=r.quantity,m=r.products,v=void 0===m?{}:m,y=r.onClose,g=t.useState(!o),x=g[0],b=g[1],w=t.useState(s),j=w[0],C=w[1],k=e.store.api.cart.useCopyEntriesToWishlistMutation()[0],S=e.store.api.cart.useMoveEntriesToWishlistMutation()[0],T=e.store.api.wishlist.useAddToWishlistMutation()[0],N=e.store.api.wishlist.useCopyEntriesMutation()[0],P=D(),O=P.t,A=P.cartCode,_=P.savedItemListCode,L=e.store.hooks.useNotifications().notify,M=null!=_?_:A,F=function(e){switch(d){case"cart":return(x?k:S)(Dt({code:e,itemsListCode:M},v));case"wishlist":return N(Dt({deleteFromSource:!x,targetCode:e,sourceCode:M},v));case"sales-details":return T({productCode:p,wishlistCode:e,quantity:f})}},V=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t).unwrap();case 3:L("success",O(x?ct.wishlistCopySuccess:ct.wishlistMoveSuccess),x?d+".copyToWishlistSuccess":d+".moveToWishlistSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),L("error",O(x?ct.wishlistCopyError:ct.wishlistMoveError),x?d+".copyToWishlistError":d+".moveToWishlistError");case 9:return e.prev=9,y(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();return u.jsx(n.Dialog,{title:O(h?ct.wishlistCreateTitle:ct.wishlistHeader),onClose:y,testid:"wishlistDialog",children:j?u.jsx(Nt,{packageName:d,wishlist:h,privacySwitchDisabled:c,onClose:y,onAddToWishlist:function(e){return V(e)}}):u.jsx(Pt,{isCopying:x,setIsCopying:b,setIsFormOpen:C,onClose:y,onAddToWishlist:function(e){return V(e)}})})};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lt=function(r){var i=r.entry,s=D(),a=s.t,o=s.cartCode,l=s.savedItemListCode,c=e.store.hooks.useUser().terrific,d=e.store.hooks.useNotifications().notify,h=t.useState(!1),p=h[0],f=h[1],m=t.useState(!1),v=m[0],g=m[1],x=t.useRef(),b=e.store.api.cart.useDuplicateEntryMutation()[0],w=e.store.api.cart.useDeleteEntriesMutation()[0],j=e.store.api.wishlist.useDeleteEntriesMutation()[0],C=e.store.api.cart.useUploadFileMutation()[0],k=i.isSingle?{entryNumbers:[i.number]}:{headPositions:[i.headPositionCode]},S=function(){var e=E(I.mark((function e(){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=5;break}j(_t({code:l},k)).unwrap(),e.next=7;break;case 5:return e.next=7,w(_t({cartCode:o},k)).unwrap();case 7:d("success",a(ct.deleteSuccess),"cart.deleteEntrySuccess"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d("error",a(ct.deleteError),"cart.deleteEntryError");case 13:return e.prev=13,f(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=E(I.mark((function e(){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(_t({cartCode:o},k)).unwrap();case 3:d("success",a(ct.copySuccess),"cartEntries.duplicateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d("error",a(ct.copyError),"cartEntries.duplicateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=E(I.mark((function e(t){var r,n,s;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files){e.next=3;break}return e.abrupt("return");case 3:return(n=new FormData).append("uploadedFile",r[0]),n.append("entryNumber",""+i.number),n.append("CSRFToken",c.CSRFToken),e.prev=7,e.next=10,C({cartCode:o,formData:n}).unwrap();case 10:s=e.sent,"OK"===s.statusCode?d("success",a(ct.fileUploaded),"cartEntries.uploadSuccess"):d("error",a(ct.fileUploadFailed),"cartEntries.uploadError"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),d("error",a(ct.fileUploadFailed),"cartEntries.uploadError");case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),P=[{testid:"addToWishlist",label:a(ct.addToWishlist),icon:"plus",onClick:function(){return g(!0)}},{testid:"uploadFile",label:a(ct.uploadFile),icon:"upload",onClick:function(){x.current.click()},tooltip:a(ct.fileUploadTooltip)},{testid:"edit",label:a(ct.edit),icon:"edit",onClick:function(){return function(e,t){void 0===t&&(t={});var r=new URL(""+location.origin+y(e,"redirect"));Object.entries(t).forEach((function(e){var t=e[0],n=e[1];r.searchParams.set(t,n)})),location.href=r.href}(i.editUrl)}},{testid:"duplicate",label:a(ct.duplicate),icon:"copy",onClick:T},{testid:"delete",label:a(ct.delete),icon:"trash",onClick:function(){return f(!0)}}].filter((function(e){return i.menuOptions[e.testid]}));return u.jsxs("div",{className:"absolute top-0 right-0",children:[u.jsx(n.ActionsMenu,{background:"primary",isDisabled:null==i?void 0:i.isDisabled,children:P.map((function(e){return u.jsx(n.ActionsMenu.ActionItem,_t({},e),e.testid)}))}),v&&u.jsx(At,{packageName:"cart",onClose:function(){return g(!1)},products:k,copyDisabled:!i.isAvailable}),p&&u.jsx(kt,{onClose:function(){return f(!1)},onConfirm:S}),u.jsx("input",{"data-testid":"fileUpload",type:"file",ref:x,onChange:N,className:"w-0 h-0"})]})},Mt=function(r){var i=r.entry,s=D(),a=s.t,o=s.savedItemListCode,l=s.cartCode,c=e.store.hooks.useNotifications().notify,d=t.useState(i.positionText||""),h=d[0],p=d[1],f=e.store.api.cart.useUpdatePositionTextMutation(),m=f[0],v=f[1],y=v.isLoading,g=v.isSuccess,x=v.isError,b=V(function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({cartCode:o||l,entryNumber:i.number,headPositionCode:i.headPositionCode,positionText:t}).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),c("error",a(ct.positionTextError),"cartEntries.positionTextError");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),w=function(){var e=E(I.mark((function e(t){var r;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target,p(r.value),b(r.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=y?{type:"loader",color:"primary",size:"xs"}:x?{type:"close",color:"secondary",size:"sm"}:g?{type:"check",color:"green",size:"sm"}:void 0;return i.isReadOnly?u.jsx(n.Data,{testid:"positionText",label:a(ct.positionText),value:i.positionText}):u.jsx(n.TextInput,{testid:"positionText",label:a(ct.positionText),placeholder:a(ct.salesTextToolTip),onChange:w,value:h,size:40,maxlength:255,icon:j,disabled:i.isInvalid})},Ft=function(t){var r,i,s,a=t.entry,o=D(),l=o.t,c=o.cartCode,d=e.store.hooks.useNotifications().notify,h=e.store.api.cart.useDeleteFileMutation()[0],p=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({cartCode:c,entryNumber:a.number,mediaCode:t}).unwrap();case 3:d("success",l(ct.fileDeleted),"cartEntries.deleteFileSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d("error",l(ct.fileDeleteFailed),"cartEntries.deleteFileError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return u.jsxs(u.Fragment,{children:[u.jsx(n.Image,{src:null==(r=a.thumbnail)?void 0:r.url,alt:null==(i=a.thumbnail)?void 0:i.altText,fullWidth:!1,className:"w-20 h-20"}),u.jsxs("div",{className:"space-y-1",children:[null!=a&&a.productUrl?u.jsx(n.Link,{testid:"name",href:y(a.productUrl,"redirect"),className:"block",children:a.name}):u.jsx(n.Text,{color:"primary",bold:!0,testid:"marketSystem",children:null==a?void 0:a.name}),a.chipText&&u.jsx(n.Chip,{testid:a.isSingle?"materialNumber":"businessCase",label:a.chipText,background:"success"}),a.productSubtext&&u.jsx(n.Text,{size:"sm",testid:a.isSingle?"ean":"keySystemCode",children:a.productSubtext}),u.jsx("div",{className:"flex flex-wrap","data-testid":"uploadedFiles",children:null==(s=a.files)?void 0:s.map((function(e){return u.jsx(n.Chip,{label:e.realFileName,onDelete:a.isReadOnly?void 0:function(){return p(e.code)},onClick:function(){return window.open(e.url,"_blank")},className:"mr-1 mt-1"},e.code)}))})]})]})},It=function(r){var i,s,a=r.entry,o=D(),l=o.t,c=o.cartCode,d=o.savedItemListCode,h=o.minQuantityWithoutConfirmation,p=t.useState(a.quantity),f=p[0],m=p[1],v=e.store.api.cart.useUpdateQuantityMutation()[0],y=e.store.hooks.useNotifications().notify,g=e.store.api.product.useGetSalesDetailsQuery({productCode:a.productCode}).data,x=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({cartCode:d||c,entryNumber:a.number,quantity:t}).unwrap();case 3:y("success",l(ct.quantityChangeSuccess),"cart.quantityChangeSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y("error",l(ct.quantityChangeError),"cart.quantityChangeError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),b=V(x,300),w=function(e,t){m(e),(t?b:x)(e),e>h&&y("warning",l(ct.quantityLimitExceeded),"cartEntries.quantityLimitExceeded",!0)};return a.isReadOnly?u.jsx(n.Data,{testid:"quantity",label:l(ct.quantity),value:a.quantity}):u.jsx(n.NumberInput,{testid:"quantity",value:f,label:l(ct.quantity),min:null!=(i=null==g||null==(s=g.data)?void 0:s.minOrderQuantity)?i:1,disabled:a.isDisabled||a.isInvalid,onChange:function(e){return w(e,!0)},onBlur:function(e){return w(e,!1)}})},Vt=function(r){var i=r.entry,s=D(),a=s.t,o=s.cartCode,l=e.store.hooks.useNotifications().notify,c=t.useState(i.salesText||""),d=c[0],h=c[1],p=e.store.api.cart.useUpdateSalesTextMutation(),f=p[0],m=p[1],v=m.isLoading,y=m.isSuccess,g=m.isError,x=V(function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({cartCode:o,headPositionCode:i.headPositionCode,salesText:t}).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),l("error",a(ct.salesTextError),"cartEntries.salesTextError");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),b=v?{type:"loader",color:"primary",size:"xs"}:g?{type:"close",color:"secondary"}:y?{type:"check",color:"green"}:void 0;return i.isReadOnly?u.jsx(n.Data,{testid:"salesText",label:a(ct.salesCommentLabel),value:i.salesText}):u.jsx(n.TextInput,{testid:"salesText",placeholder:a(ct.salesText),label:a(ct.salesCommentLabel),onChange:function(e){var t=e.target;h(t.value),x(t.value)},value:d,maxlength:255,disabled:i.isInvalid,icon:b,inputClassName:"w-full"})},Ut=function(e){var r=e.lockingPositions,i=void 0===r?[]:r,s=t.useState(!1),a=s[0],o=s[1];return u.jsx("div",{onClick:function(){"Range"!==window.getSelection().type&&o(!a)},children:u.jsx(n.Text,{type:"span",testid:"lockingPosition",children:!a&&(null==i?void 0:i.length)>12?(null==i?void 0:i.slice(0,12).join(", "))+" ...":null==i?void 0:i.join(", ")})})},qt=function(r){var i,s=r.entry,a=r.subposition,o=D(),l=o.t,c=o.cartCode,d=t.useState(!1),h=d[0],p=d[1],f=e.store.api.product.useGetConfigurationSummaryQuery(a?{headPositionEntryConfigurationParameter:{headPositionCode:a.headPositionCode,itemInfoId:a.id}}:{cpqConfigurationParameter:{productCode:s.productCode,cartEntryPk:s.pk,cartId:c}},{skip:!h}),m=f.data,v=f.isLoading,y=f.isSuccess,g=(s||a).configurationName;return u.jsxs("div",{className:"space-y-1 max-w-xl","data-testid":"configuration",children:[g&&u.jsx(n.Text,{testid:"name",children:g}),u.jsx(n.Button,{variant:"text",iconType:h?"arrowup":"arrowdown",onClick:function(){return p(!h)},testid:"expandButton",isLoading:v,children:l(h?ct.summaryClose:ct.summaryOpen)}),y&&u.jsx(n.List,{isCompressed:!0,size:"sm",testid:"details",children:null==m||null==(i=m.configurationInfos)?void 0:i.map((function(e,t){return u.jsx(n.List.Item,{name:e.configurationLabel,value:e.configurationValue},t)}))})]})},Bt=function(e){var t=e.type,r=e.entry,i=e.subposition,s=D(),a=s.t,o=s.showPrice,l={unit:{testid:"unitPrice",label:a(ct.unitPrice),userPrice:null==r?void 0:r.unitUserPrice,listPrice:null==r?void 0:r.unitListPrice,discount:null==r?void 0:r.discount,unitName:null==r?void 0:r.unitName},total:{testid:"totalPrice",label:a(ct.totalPrice),userPrice:null==r?void 0:r.totalUserPrice,listPrice:null==r?void 0:r.totalListPrice,discount:null==r?void 0:r.discount},subposition:{testid:"totalPrice",userPrice:null==i?void 0:i.totalUserPrice,listPrice:null==i?void 0:i.totalListPrice,discount:null==i?void 0:i.discount}}[t],c=l.testid,d=l.label,h=l.userPrice,p=l.listPrice,f=l.discount,m=l.unitName,v=h||p;return Boolean(v)&&o?u.jsx(n.Data,{testid:c,label:d,value:u.jsxs(u.Fragment,{children:[u.jsxs(n.Text,{testid:"userPrice",children:[u.jsx(n.Price,{price:v}),m&&" /"+m]}),f>0&&u.jsxs(u.Fragment,{children:[u.jsx(n.Text,{size:"sm",transform:["line-through"],testid:"listPrice",children:u.jsx(n.Price,{price:p})}),u.jsx(n.Text,{size:"sm",color:"green",testid:"discount",children:a(ct.reduction,""+f)})]})]})}):null},Rt=function(e){var r,i=e.entry,s=D(),a=s.t,o=s.showPrice,l=t.useState(!i.isReadOnly),c=l[0],d=l[1],h=function(e,r,n){void 0===r&&(r=1),void 0===n&&(n=10);var i=t.useState(r),s=i[0],a=i[1],o=t.useMemo((function(){return Array.from({length:Math.ceil(e.length/n)},(function(t,r){return e.slice(r*n,r*n+n)}))}),[e,n]);return{itemsOnPage:o[s-1],page:s,totalPages:o.length,setPage:a}}(null==i?void 0:i.subpositions),p=h.itemsOnPage,f=h.page,m=h.totalPages,v=h.setPage;return u.jsxs(u.Fragment,{children:[u.jsx("div",{"data-testid":"showSubpositions",className:"col-span-full lg:col-span-2 flex justify-end items-end",children:u.jsx(n.Button,{testid:"expandButton",variant:"text",iconType:c?"arrowup":"arrowdown",onClick:function(){return d((function(e){return!e}))},children:(null==(r=i.subpositions)?void 0:r.length)+" "+a(ct.items)})}),c&&u.jsx("div",{"data-testid":"subpositions",className:"col-span-full bg-light p-4 -mx-2 -mb-2 mt-2 border-t shadow-inner",children:u.jsx("div",{className:"p-3 bg-lighter rounded border",children:u.jsxs(n.Table,{isCompressed:!0,children:[u.jsx(n.Table.Header,{children:u.jsxs(n.Table.Row,{className:"grid grid-cols-12",children:[u.jsx(n.Table.HeaderCell,{className:"col-span-2",children:a(ct.items)}),u.jsx(n.Table.HeaderCell,{className:"col-span-2",children:a(ct.lockPosition)}),u.jsx(n.Table.HeaderCell,{className:"col-span-4",children:a(ct.configurationData)}),u.jsx(n.Table.HeaderCell,{className:"col-span-1",children:i.showQuantityPerSet&&a(ct.quantityPerSet)}),u.jsx(n.Table.HeaderCell,{className:"col-span-1",children:a(ct.quantityPerItem)}),u.jsx(n.Table.HeaderCell,{className:"col-span-2",children:o&&a(ct.totalPrice)})]})}),u.jsx(n.Table.Body,{children:null==p?void 0:p.map((function(e){return u.jsxs(n.Table.Row,{className:"grid grid-cols-12",children:[u.jsxs(n.Table.Cell,{className:"col-span-2 flex items-start",children:[!e.isAvailable&&u.jsx(n.Tooltip,{render:a(ct.productNotAvailable),position:"right",children:u.jsx(n.Icon,{type:"warning",color:"secondary",className:"pr-2"})}),u.jsx(n.Icon,{type:e.icon,className:"pr-2"}),u.jsx(n.Text,{type:"span",testid:"name",children:e.name})]}),u.jsx(n.Table.Cell,{className:"col-span-2",children:u.jsx(Ut,{lockingPositions:e.lockingPositions})}),u.jsx(n.Table.Cell,{className:"col-span-4",children:u.jsx(qt,{subposition:e})}),u.jsx(n.Table.Cell,{testid:"quantityPerSet",className:"col-span-1",children:i.showQuantityPerSet&&e.quantity}),u.jsx(n.Table.Cell,{testid:"quantity",className:"col-span-1",children:e.quantityTotal}),u.jsx(n.Table.Cell,{testid:"price",className:"col-span-2",children:u.jsx(Bt,{type:"subposition",subposition:e})})]},e.id)}))}),m>1&&u.jsx("div",{className:"px-4",children:u.jsx(n.Pagination,{current:f,total:m,onChange:v})})]})})})]})},$t=function(e){var t,r=e.entry,s=D(),a=s.t,o=s.showPrice;return u.jsxs("li",{"data-testid":"entry",className:"shadow",children:[u.jsx(Ct,{entry:r}),u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:i("relative grid grid-cols-12 p-2 rounded bg-lighter border gap-x-8 gap-y-2",{"filter grayscale":r.isInvalid}),children:[u.jsx("div",{className:"col-span-full lg:col-span-4 flex gap-2",children:u.jsx(Ft,{entry:r})}),u.jsx("div",{className:"col-span-full lg:col-span-2",children:r.isSingle&&u.jsx(It,{entry:r})}),u.jsx("div",{className:"col-span-6 lg:col-span-2",children:u.jsx(Bt,{type:"unit",entry:r})}),u.jsx("div",{className:"col-span-6 lg:col-span-2",children:u.jsx(Bt,{type:"total",entry:r})}),u.jsx("div",{className:"col-span-full lg:col-span-2",children:r.commitedDeliveryRange&&o&&u.jsx(n.Data,{testid:"committedDelivery",label:a(ct.committedDelivery),value:r.commitedDeliveryRange})}),u.jsx("div",{className:"col-span-full lg:col-span-4",children:r.showPositionText&&u.jsx(Mt,{entry:r})}),u.jsxs("div",{className:"col-span-full lg:col-span-4",children:[r.showSalesText&&u.jsx(Vt,{entry:r}),r.isConfigurable&&u.jsx(n.Data,{testid:"configuration",className:"col-span-4",label:a(ct.configurationData),value:u.jsx(qt,{entry:r})})]}),u.jsx("div",{className:"col-span-full lg:col-span-2",children:r.setAmount>0&&u.jsx(n.Data,{testid:"setAmount",label:a(ct.amountOfSets),value:r.setAmount})}),(null==(t=r.subpositions)?void 0:t.length)>0&&u.jsx(Rt,{entry:r})]}),!r.isReadOnly&&u.jsx(Lt,{entry:r})]})]})},Wt=function(e){return!(null!=e&&e.sapBlocked)&&(null==e?void 0:e.ecommerceEligible)&&(null==e?void 0:e.purchasable)},zt=function(e){var t=e.entries,r=void 0===t?[]:t,i=e.isReadOnly,s=void 0!==i&&i,a=e.isDisabled,o=void 0!==a&&a,l=D(),c=l.t,d=l.showAddToWishlist,h=l.showUploadFile,p=r.map((function(e){return e.singleEntry?(i=e.singleEntry,{isSingle:!0,isReadOnly:s,productCode:null==i||null==(a=i.product)?void 0:a.code,number:null==i?void 0:i.entryNumber,pk:null==i?void 0:i.cartEntryPk,thumbnail:null==i||null==(l=i.product)||null==(u=l.thumbnails)?void 0:u[0],name:null==i||null==(p=i.product)?void 0:p.name,productUrl:null==i||null==(f=i.product)?void 0:f.url,chipText:null==i||null==(m=i.product)||null==(v=m.code)?void 0:v.replace(/^0+/,""),productSubtext:null!=i&&null!=(y=i.product)&&y.ean?c(ct.ean)+": "+(null==i||null==(g=i.product)?void 0:g.ean):void 0,files:null==i?void 0:i.medias,isConfigurable:null==i||null==(x=i.product)?void 0:x.configurable,configurationName:null==i?void 0:i.configurationName,quantity:null==i?void 0:i.displayUnitQuantity,unitUserPrice:null==i?void 0:i.netPricePerUnit,unitListPrice:null==i?void 0:i.listPricePerUnit,unitName:null==i||null==(w=i.displayUnit)?void 0:w.name,discount:null==i?void 0:i.discountInPercentage,totalUserPrice:null==i?void 0:i.userPrice,totalListPrice:null==i?void 0:i.totalListPrice,commitedDeliveryRange:s?k(null==i||null==(j=i.committedDeliveryInfos)||null==(C=j.map((function(e){return b(null==e?void 0:e.receiptDate)})))?void 0:C.filter(Boolean)):void 0,menuOptions:{addToWishlist:d,edit:(null==i||null==(S=i.product)?void 0:S.configurable)&&Wt(null==i?void 0:i.product),duplicate:(null==i||null==(T=i.product)?void 0:T.configurable)&&Wt(null==i?void 0:i.product),uploadFile:!(null!=i&&null!=(N=i.product)&&N.configurable)&&h,delete:!0},editUrl:null==i?void 0:i.editUrl,isAvailable:Wt(null==i?void 0:i.product),isInvalid:!(Wt(null==i?void 0:i.product)&&null!=i&&i.validConfiguration||s),isDisabled:o,positionText:null==i||null==(P=i.positionText)?void 0:P.textContent,showPositionText:!(null!=i&&i.hidePositionText),showSalesText:!1}):(t=e.headPosition,{isSingle:!1,isReadOnly:s,headPositionCode:null==t?void 0:t.code,keySystemCode:null==t?void 0:t.keySystemCode,thumbnail:null==t?void 0:t.thumbnail,name:null==t?void 0:t.marketSystemName,chipText:c({NEW_KEY_SYSTEM:ct.emksNewKeySystem,EXTENSION:ct.emksExtension,REORDER:ct.emksReorder,NEW_SERIES:ct.emksNewSeries}[null==t?void 0:t.businessCase]),productSubtext:null==t?void 0:t.keySystemCode,setAmount:"NEW_SERIES"===(null==t?void 0:t.businessCase)?null==t?void 0:t.quantity:void 0,totalUserPrice:null==t?void 0:t.price,menuOptions:{addToWishlist:"EMKS"===(null==t?void 0:t.useCase)&&d,edit:!0,duplicate:!1,uploadFile:!1,delete:!0},editUrl:null==t?void 0:t.editUrl,isAvailable:t.entries.every((function(e){var t=e.product;return Wt(t)})),isInvalid:(t.entries.some((function(e){var t=e.product;return!Wt(t)}))||!(null!=t&&t.validConfiguration))&&!s,isDisabled:o,positionText:null==t||null==(r=t.positionText)?void 0:r.textContent,showPositionText:!0,salesText:null==t||null==(n=t.salesText)?void 0:n.textContent,showSalesText:"NEW_KEY_SYSTEM"===(null==t?void 0:t.businessCase),showQuantityPerSet:"NEW_SERIES"===(null==t?void 0:t.businessCase),subpositions:null==t?void 0:t.entries.map((function(e){var r,n;return{id:null==e?void 0:e.id,headPositionCode:null==t?void 0:t.code,name:null==e||null==(r=e.product)?void 0:r.name,isAvailable:Wt(null==e?void 0:e.product),icon:{KEY:"locked",CYLINDER:"cylinder",SECURITYCARD:"card"}[null==e||null==(n=e.product)?void 0:n.materialType],lockingPositions:e.lockingPositions,quantity:"NEW_SERIES"===(null==t?void 0:t.businessCase)||"DORICON"===(null==t?void 0:t.useCase)?null==e?void 0:e.quantity:void 0,quantityTotal:(null==e?void 0:e.quantity)*(null==t?void 0:t.quantity),totalUserPrice:null==e?void 0:e.userPrice,totalListPrice:null==e?void 0:e.totalListPrice,discount:null==e?void 0:e.discountInPercentage,configurationName:null==e?void 0:e.configurationName}}))});var t,r,n,i,a,l,u,p,f,m,v,y,g,x,w,j,C,S,T,N,P})).sort((function(e,t){return!e.isSingle&&t.isSingle?-1:0}));return u.jsx("ul",{"data-testid":"cartEntries",className:"space-y-6",children:p.length>0?p.map((function(e){return u.jsx($t,{entry:e},e.headPositionCode||e.number)})):u.jsx(n.Text,{testid:"emptyCart",children:c(ct.cartEmpty)})})},Qt=function(){var r=e.store.hooks.useApi().isFetching,i=t.useState(!1),s=i[0],a=i[1];return t.useEffect((function(){var e=function(){return a(!0)};return addEventListener("beforeunload",e),function(){return removeEventListener("beforeunload",e)}}),[]),(r||s)&&u.jsx("div",{className:"w-full h-full flex items-center justify-center top-0 left-0 z-9000 backdrop-filter backdrop-blur fixed","data-testid":"overlayLoader",children:u.jsx(n.Icon,{size:"xl",type:"loader"})})},Yt="vanguard.cart.calculatePrice.success",Gt="vanguard.cart.calculatePrice.error",Ht="vanguard.checkout.endUserInformation.tile",Kt="vanguard.checkout.notification",Jt="vanguard.checkout.notification.placeOrder.error",Zt="vanguard.checkout.addressUpdate.success",Xt="vanguard.checkout.addressUpdate.error",er="vanguard.checkout.addressDelete.success",tr="vanguard.checkout.addressDelete.error",rr="vanguard.checkout.delivery.tile",nr="vanguard.checkout.delivery.method",ir="vanguard.checkout.delivery.type",sr="vanguard.checkout.delivery.type.TooltipTitle",ar="vanguard.checkout.delivery.shippingDate",or="vanguard.checkout.delivery.recipient",lr="vanguard.checkout.deliverymethod.success",ur="vanguard.checkout.deliverymethod.error",cr="vanguard.checkout.preferreddeliverydate.success",dr="vanguard.checkout.preferreddeliverydate.error",hr="vanguard.checkout.customerOrderNumber",pr="vanguard.checkout.customerCommissionNumber",fr="vanguard.checkout.total.price",mr="vanguard.checkout.total.discount",vr="vanguard.checkout.total.expressCost",yr="vanguard.checkout.total.general",gr="vanguard.checkout.calculatePriceAndDelivery",xr="vanguard.checkout.placeOrder",br="vanguard.checkout.payment.tile",wr="vanguard.checkout.payment.method",jr="vanguard.checkout.payment.termsOfPayment",Cr="vanguard.checkout.paymentterm.default",kr="vanguard.checkout.payment.billing",Sr="vanguard.checkout.mandatoryFiled.error";function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pr=function(t){var r=t.additionalAddresses,i=void 0===r?[]:r,s=D(),a=s.cartCode,o=s.t,l=e.store.hooks.useNotifications().notify,c=e.store.api.checkout.useGetAdditionalAddressTypesQuery({orderCode:a}).data,d=e.store.api.checkout.useAddAdditionalAddressMutation()[0],h=e.store.api.checkout.useDeleteAdditionalAddressMutation()[0],p=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({cartCode:a,address:t}).unwrap();case 3:l("success",o(Zt),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("error",o(Xt),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({cartCode:a,id:t}).unwrap();case 3:l("success",o(er),"checkout.addressDeleteSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("error",o(tr),"checkout.addressDeleteError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"additionalAddresses",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:o(Ht)}),u.jsx("div",{className:"flex flex-wrap md:pl-6","data-testid":"additionalAddresses",children:null==c?void 0:c.map((function(e){return u.jsx("div",{className:"pt-4 pr-16","data-testid":"address-"+e.code,children:u.jsx(xt,{label:e.name,value:i.find((function(t){return t.additionalAddressTypeCode===e.code})),onAdd:function(t){return p(Nr(Nr({},t),{},{additionalAddressTypeCode:e.code}))},onChange:function(t){return p(Nr(Nr({},t),{},{additionalAddressTypeCode:e.code}))},onRemove:function(e){return f(e)}})},e.code)}))})]})},Or=function(e){var t=e.deliveryMethods;return u.jsx("div",{className:"space-y-1",children:null==t?void 0:t.map((function(e,t){var r=e.name,i=e.description;return u.jsxs("div",{children:[u.jsx(n.Text,{type:"span",size:"sm",bold:!0,testid:"name",children:r+": "}),u.jsx(n.Text,{type:"span",size:"sm",testid:"description",children:i})]},t)}))})},Dr=function(e){var t=b(),r=t.day();return 5===r&&e?t=t.add(3,"day"):6===r?t=t.add(2,"day"):(0===r||e)&&(t=t.add(1,"day")),t.toDate()},Ar=function(r){var i=r.deliveryAddressesError,s=t.useRef(),a=function(){var r,n,i=D(),s=i.t,a=i.cartCode,o=i.endOfDeliveryDay,l=i.oneTimeAddressMandatory,u=t.useState(""),c=u[0],d=u[1],h=t.useState(null),p=h[0],f=h[1],m=t.useState(null),v=m[0],y=m[1],g=e.store.hooks.useNotifications().notify,x=e.store.api.checkout.useGetCheckoutQuery({cartCode:a}).data,b=e.store.api.checkout.useGetAddressesQuery({cartCode:a}).data,w=e.store.api.checkout.useGetDeliveryMethodQuery({cartCode:a}).data,j=e.store.api.checkout.useGetDeliveryTypeQuery({cartCode:a}).data,C=e.store.api.checkout.useGetB2BUnitQuery(null,{skip:l}).data,k=e.store.api.checkout.useSetOneTimeAddressMutation()[0],S=e.store.api.checkout.useSetDeliveryAddressMutation()[0],T=e.store.api.checkout.useSetDeliveryMethodMutation()[0],N=t.useCallback(function(){var e=E(I.mark((function e(t,r){var n;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r?Dr(o):null,e.prev=1,e.next=4,T({cartCode:a,code:t,preferredDeliveryDate:n}).unwrap();case 4:g("success",s(lr),"checkout.deliveryMethodSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g("error",s(ur),"checkout.deliveryMethodError");case 10:y(n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,T,a,g,s]),P=t.useCallback(function(){var e=E(I.mark((function e(t){var r;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T({cartCode:a,code:null==x||null==(r=x.deliveryMode)?void 0:r.code,preferredDeliveryDate:t}).unwrap();case 3:g("success",s(cr),"checkout.preferredDeliveryDateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g("error",s(dr),"checkout.preferredDeliveryDateError");case 9:y(t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[T,a,null==x||null==(r=x.deliveryMode)?void 0:r.code,g,s]),O=t.useCallback(function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k({cartCode:a,address:t}).unwrap();case 3:g("success",s(Zt),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g("error",s(Xt),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[k,a,g,s]),A=t.useCallback(function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({cartCode:a,addressId:t.id}).unwrap();case 3:g("success",s(Zt),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g("error",s(Xt),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[S,a,g,s]),_=t.useMemo((function(){var e=[].concat(b||[],(null==C?void 0:C.addresses)||[]).filter((function(e){return null==e?void 0:e.shippingAddress})),t=e.map((function(e){return e.id}));return e.filter((function(e,r){return!t.includes(e.id,r+1)}))}),[null==C?void 0:C.addresses,b]),L=t.useMemo((function(){var e,t;return{selectedMethod:null!=(e=null==x||null==(t=x.deliveryMode)?void 0:t.code)?e:"",selectedType:c,address:null==x?void 0:x.deliveryAddress,deliveryMethods:w||[],deliveryTypes:(null==j?void 0:j.deliveryTypes)||[],deliveryAddresses:_,deliveryDate:v,setSelectedType:d,handleDeliveryMethodUpdate:N,setDeliveryDate:P,handleAddressUpdate:A,handleOneTimeAddressUpdate:O}}),[null==x||null==(n=x.deliveryMode)?void 0:n.code,null==x?void 0:x.deliveryAddress,c,w,null==j?void 0:j.deliveryTypes,_,v,N,P,A,O]);return t.useEffect((function(){var e;!c&&null!=j&&null!=(e=j.deliveryTypes)&&e.length&&d(j.deliveryTypes[0])}),[w,j,c]),t.useEffect((function(){var e=null==x?void 0:x.deliveryMode;if(e&&!p){var t="EX"===e.code||e.showPreferredDate?Dr(o):null;y(t),f(!0)}}),[null==x?void 0:x.deliveryMode,o,p]),L}(),o=a.address,l=a.deliveryDate,c=a.deliveryTypes,d=a.deliveryMethods,h=a.selectedMethod,p=a.selectedType,f=a.deliveryAddresses,m=a.setDeliveryDate,v=a.setSelectedType,y=a.handleDeliveryMethodUpdate,g=a.handleAddressUpdate,x=a.handleOneTimeAddressUpdate,b=D(),w=b.t,j=b.oneTimeAddressMandatory,C=b.language;return u.jsxs("div",{ref:s,className:"shadow-md p-6 space-y-6","data-testid":"delivery",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:w(rr)}),u.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[u.jsxs("div",{className:"md:w-1/2 md:pl-6 space-y-3",children:[u.jsxs("div",{"data-testid":"method",children:[u.jsxs("div",{className:"flex space-x-1 items-center",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:w(nr)}),u.jsx(n.Tooltip,{position:"right",render:u.jsx(Or,{deliveryMethods:d}),children:u.jsx(n.Icon,{type:"info",className:"w-3"})})]}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2 md:pr-2 lg:pr-0","data-testid":"options",children:d.map((function(e){var t=e.code,r=e.name,i=e.showPreferredDate;return u.jsx(n.Radio,{label:r,checked:h===t,onChange:function(){return y(t,i)},testid:t},t)}))})]}),c.length>0&&u.jsxs("div",{"data-testid":"type",children:[u.jsxs("div",{className:"flex space-x-1 items-center",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:w(ir)}),u.jsx(n.Tooltip,{position:"right",render:w(sr),children:u.jsx(n.Icon,{type:"info",className:"w-3"})})]}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:c.map((function(e){return u.jsx(n.Radio,{label:e,checked:p===e,onChange:function(){return v(e)},testid:e},e)}))})]}),u.jsxs("div",{className:"w-full md:max-w-max space-y-1","data-testid":"shippingDate",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:w(ar)}),u.jsx(n.DatePicker,{minDate:new Date,selected:l,onChange:m,locale:C.split("_")[0],dateFormat:"dd.MM.yyyy"})]})]}),u.jsxs("div",{className:"w-1/2","data-testid":"recipient",children:[u.jsx(xt,{label:w(or)+(j?"*":""),value:o,savedAddresses:f,onAdd:x,onChange:g}),j&&i&&u.jsx(n.Text,{testid:"error",color:"secondary",children:w(Sr)})]})]})]})},Er=function(e){var t=e.consents,r=e.setChecked,i=e.checked,s=e.errors,a=D().t;return u.jsx("div",{"data-testid":"consents",children:null==t?void 0:t.map((function(e,t){var o,l;return u.jsx("div",{className:"flex items-center space-x-2","data-testid":"consent",children:u.jsx("div",{className:"m-2",children:u.jsx(n.Checkbox,{checked:i[t],onChange:function(){var e=[].concat(i);e[t]=!e[t],r(e)},error:s.includes("consents_"+t),hint:s.includes("consents_"+t)&&a(Sr),label:u.jsx(u.Fragment,{children:null==e||null==(o=e.text)||null==(l=o.split("{}"))?void 0:l.map((function(t,r){var i;return u.jsxs(n.Text,{type:"span",children:[t+" ",(null==(i=e.links)?void 0:i[r])&&u.jsx(n.Link,{target:"_blank",href:e.links[r].url,children:e.links[r].text})]},t+r)}))})})})},e.text)}))})},_r=function(e){var t=e.price,r=e.discount,i=D(),s=i.t,a=i.showAdditionalInformation,o=i.showExpressCostDescription;return u.jsxs("div",{className:"space-y-1 lg:w-2/6",children:[t&&u.jsxs(n.Text,{bold:!0,size:"lg",align:"right",testid:"priceTotal",children:[s(fr)+" ",u.jsx(n.Price,{price:t})]}),r&&u.jsxs(n.Text,{color:"green",align:"right",testid:"totalDiscount",children:[s(mr)+" ",u.jsx(n.Price,{price:r})]}),o&&u.jsx(n.Text,{align:"right",testid:"expressCost",children:s(vr)}),a&&u.jsx(n.Text,{align:"right",testid:"additionalInformation",children:s(yr)})]})},Lr=function(r){var i=r.selectedPaymentMethod,s=r.setDeliveryError,a=D(),o=a.t,l=a.cartCode,c=a.showCalculateDelivery,d=a.oneTimeAddressMandatory,h=e.store.hooks.useNotifications().notify,p=D().showPrice,f=e.store.api.checkout.useGetConsentsQuery({cartCode:l}).data,m=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data,v=e.store.api.cart.useSimulateCartMutation()[0],g=e.store.api.checkout.usePlaceOrderMutation()[0],x=t.useState([]),b=x[0],w=x[1],j=t.useState(""),C=j[0],k=j[1],S=t.useState(""),T=S[0],N=S[1],P=t.useState([]),O=P[0],A=P[1];t.useEffect((function(){f&&w(Array(null==f?void 0:f.consents.length).fill(null==f?void 0:f.preselectConsents))}),[f]);var _=function(){var e=E(I.mark((function e(){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({cartCode:l,forceSync:!0}).unwrap();case 3:h("success",o(Yt),"checkout.calculatePriceSuccess"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),h("error",o(Gt),"checkout.calculatePriceError"),console.error("Simulation cart failed.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=[];return b.some((function(e){return!1===e}))&&b.map((function(t,r){!1===t&&e.push("consents_"+r)})),C||e.push("orderNumber"),null!=m&&m.deliveryAddress||!d?s(!1):(e.push("deliveryAddress"),s(!0)),A(e),0===e.length},M=function(){var e=E(I.mark((function e(){var t,r;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,g({cartCode:l,customerReferenceId:C,paymentModeCode:i,checkoutCommission:T}).unwrap();case 6:t=e.sent,r=t.code,window.location.href=y("/checkout/orderConfirmation/"+r,"redirect"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),h("error",o(Jt),"checkout.placeOrderError"),console.error("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"space-y-6","data-testid":"order",children:[u.jsx("div",{className:"shadow-md space-between p-6",children:u.jsxs("div",{className:"flex flex-col space-y-6 mb-2 md:space-y-0 md:justify-between md:flex-row",children:[u.jsxs("div",{className:"lg:w-3/6 space-y-3",children:[u.jsxs("div",{className:"flex flex-col md:space-x-3 md:flex-row",children:[u.jsx(n.TextInput,{label:o(hr)+"*",inputClassName:"w-full",value:C,onChange:function(e){return k(e.target.value)},maxlength:35,testid:"orderNumberInput",error:O.includes("orderNumber"),hint:O.includes("orderNumber")&&o(Sr)}),u.jsx(n.TextInput,{label:o(pr),inputClassName:"w-full",value:T,onChange:function(e){return N(e.target.value)},maxlength:35,testid:"commissionNumber"})]}),u.jsx(Er,{checked:b,setChecked:w,consents:null==f?void 0:f.consents,errors:O})]}),p&&u.jsx(_r,{price:null==m?void 0:m.simulatedTotalPrice,discount:null==m?void 0:m.simulatedDiscount})]})}),u.jsxs("div",{className:"flex flex-col space-y-2 md:justify-end md:space-y-0 md:space-x-2 md:flex-row",children:[c&&p&&u.jsx(n.Button,{onClick:_,testid:"calculatePriceAndDeliveryButton",isDisabled:null==m?void 0:m.simulated,variant:"outlined",iconType:"simulateprice",children:o(gr)}),u.jsx(n.Button,{testid:"orderButton",onClick:M,iconType:"arrow",children:o(xr)})]})]})},Mr=function(t){var r,i,s,a=t.selectedPaymentMethod,o=t.setSelectedPaymentMethod,l=t.billingAddress,c=D(),d=c.t,h=c.showBillingAddress,p=c.showPaymentMethod,f=c.cartCode,m=e.store.hooks.useNotifications().notify,v=e.store.api.checkout.useGetB2BUnitQuery(null).data,y=e.store.api.checkout.useGetBillingAddressesQuery({cartCode:f}).data,g=e.store.api.checkout.useSetBillingAddressMutation()[0],x=function(){var e=E(I.mark((function e(t){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({cartCode:f,id:t.id}).unwrap();case 3:m("success",d(Zt),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m("error",d(Zt),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return u.jsxs("div",{className:"shadow-md p-6 space-y-6","data-testid":"payment",children:[u.jsx(n.Text,{size:"lg",bold:!0,testid:"title",children:d(br)}),u.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[u.jsxs("div",{className:"md:w-1/2 md:pl-6",children:[(null==v||null==(r=v.defaultPaymentMethods)?void 0:r.length)>0&&p&&u.jsxs("div",{className:"mb-2 space-y-1","data-testid":"method",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:d(wr)}),u.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:null==v?void 0:v.defaultPaymentMethods.map((function(e){var t=e.code,r=e.description;return u.jsx(n.Radio,{checked:a===t,label:r,onChange:function(){return o(t)},testid:t},t)}))})]}),u.jsxs("div",{"data-testid":"terms",className:"space-y-1",children:[u.jsx(n.Text,{size:"sm",bold:!0,testid:"label",children:d(jr)}),u.jsx(n.Text,{color:null!=v&&v.defaultPaymentTerm?"green":null,testid:"description",children:null!=(i=null==v||null==(s=v.defaultPaymentTerm)?void 0:s.description)?i:d(Cr)})]})]}),u.jsx("div",{className:"w-1/2",children:h&&u.jsx(xt,{label:d(kr),value:l,savedAddresses:y,onChange:x})})]})]})},Fr=function(){var r=e.store.hooks.useNotifications().notify,n=D(),i=n.t,s=n.showAdditionalAddressTile,a=n.showPaymentTile,o=n.cartCode,l=t.useState(null),c=l[0],d=l[1],h=t.useState(null),p=h[0],f=h[1],m=e.store.api.checkout.useGetB2BUnitQuery(null).data,v=e.store.api.checkout.useGetCheckoutQuery({cartCode:o}).data;return t.useEffect((function(){var e;(null==m||null==(e=m.defaultPaymentMethods)?void 0:e.length)>0&&d(m.defaultPaymentMethods[0].code)}),[m]),t.useEffect((function(){r("warning",i(Kt),"checkout.deliveryDateWarning")}),[r,i]),u.jsxs("div",{className:"space-y-6","data-testid":"checkout",children:[a&&u.jsx(Mr,{selectedPaymentMethod:c,setSelectedPaymentMethod:d,billingAddress:null==v?void 0:v.billingAddress}),u.jsx(Ar,{deliveryAddressesError:p}),s&&u.jsx(Pr,{additionalAddresses:null==v?void 0:v.additionalAddresses}),u.jsx(zt,{entries:null==v?void 0:v.groupedEntries,isReadOnly:!0}),u.jsx(Lr,{selectedPaymentMethod:c,setDeliveryError:f}),u.jsx("div",{children:u.jsx(Qt,{})})]})};!function(t,n){var i='[data-react-app="'+n+'"]:not([data-rendered])',s=document.querySelector(i);if(!s)throw new Error(i+" is missing");var a=document.createElement("div");s.appendChild(a),s.setAttribute("data-rendered","true"),r.render(function(t,r){return u.jsx(e.StoreProvider,{children:u.jsx(p,{appId:r,children:u.jsx(m,{children:u.jsx(t,{})})})})}(t,n),a)}((function(){return u.jsx(Fr,{})}),"checkout")}));
