!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,s,n){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(t),o=a(n),l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},c=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{exports:{}}),u={},d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function h(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var s=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==s.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}})()&&Object.assign;var x=i.default,m=60103;if(u.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var v=Symbol.for;m=v("react.element"),u.Fragment=v("react.fragment")}var y=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var s,n={},a=null,i=null;for(s in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)g.call(t,s)&&!b.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:m,type:e,key:a,ref:i,props:n,_owner:y.current}}u.jsx=j,u.jsxs=j;c.exports=u;var w=t.createContext(null),k=function(e){var r=e.appId,s=e.children,n=e.defaultValue,a=void 0===n?{}:n,i=t.useMemo((function(){if(!r)return a;var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var s=t.querySelector("script");return null!=s&&s.innerHTML?JSON.parse(s.innerHTML):a}),[r,a]);return c.exports.jsx(w.Provider,{value:i,children:s})},T=t.createContext(null),S=function(e){var r=e.children,s=t.useState(new URL(location.href));return c.exports.jsx(T.Provider,{value:s,children:r})};var N=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},C=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=N(e)}return r};function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=e=>"checkbox"===e.type,_=e=>e instanceof Date,D=e=>null==e;const P=e=>"object"==typeof e;var M=e=>!D(e)&&!Array.isArray(e)&&P(e)&&!_(e),E=e=>M(e)&&e.target?A(e.target)?e.target.checked:e.target.value:e,V=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),F=e=>Array.isArray(e)?e.filter(Boolean):[],$=e=>void 0===e,I=(e,t,r)=>{if(!t||!M(e))return r;const s=F(t.split(/[,[\].]+?/)).reduce(((e,t)=>D(e)?e:e[t]),e);return $(s)||s===e?$(e[t])?r:e[t]:s};const L="blur",z="focusout",U="change",R="onBlur",B="onChange",q="onSubmit",Y="onTouched",H="all",G="max",W="min",Q="maxLength",J="minLength",K="pattern",Z="required",X="validate",ee=i.default.createContext(null),te=()=>i.default.useContext(ee),re=e=>{const{children:t,...r}=e;return i.default.createElement(ee.Provider,{value:r},e.children)};var se=(e,t,r,s=!0)=>{const n={};for(const a in e)Object.defineProperty(n,a,{get:()=>{const n=a;return t[n]!==H&&(t[n]=!s||H),r&&(r[n]=!0),e[n]}});return n},ne=e=>M(e)&&!Object.keys(e).length,ae=(e,t,r)=>{const{name:s,...n}=e;return ne(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find((e=>t[e]===(!r||H)))},ie=e=>Array.isArray(e)?e:[e],oe=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ie(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function le(e){const t=i.default.useRef(e);t.current=e,i.default.useEffect((()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>(e=>{e&&e.unsubscribe()})(r)}),[e.disabled])}var ce=e=>"string"==typeof e,ue=(e,t,r,s)=>{const n=Array.isArray(e);return ce(e)?(s&&t.watch.add(e),I(r,e)):n?e.map((e=>(s&&t.watch.add(e),I(r,e)))):(s&&(t.watchAll=!0),r)},de=e=>"function"==typeof e,pe=e=>{for(const t in e)if(de(e[t]))return!0;return!1};function fe(e){const t=te(),{name:r,control:s=t.control,shouldUnregister:n}=e,a=V(s._names.array,r),o=function(e){const t=te(),{control:r=t.control,name:s,defaultValue:n,disabled:a,exact:o}=e||{},l=i.default.useRef(s);l.current=s;const c=i.default.useCallback((e=>{if(oe(l.current,e.name,o)){const t=ue(l.current,r._names,e.values||r._formValues);d($(l.current)||M(t)&&!pe(t)?{...t}:Array.isArray(t)?[...t]:$(t)?n:t)}}),[r,o,n]);le({disabled:a,subject:r._subjects.watch,callback:c});const[u,d]=i.default.useState($(n)?r._getWatch(s):n);return i.default.useEffect((()=>{r._removeUnmounted()})),u}({control:s,name:r,defaultValue:I(s._formValues,r,I(s._defaultValues,r,e.defaultValue)),exact:!0}),l=function(e){const t=te(),{control:r=t.control,disabled:s,name:n,exact:a}=e||{},[o,l]=i.default.useState(r._formState),c=i.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=i.default.useRef(n),d=i.default.useRef(!0);return u.current=n,le({disabled:s,callback:i.default.useCallback((e=>d.current&&oe(u.current,e.name,a)&&ae(e,c.current)&&l({...r._formState,...e})),[r,a]),subject:r._subjects.state}),i.default.useEffect((()=>(d.current=!0,()=>{d.current=!1})),[]),se(o,r._proxyFormState,c.current,!1)}({control:s,name:r}),c=i.default.useRef(s.register(r,{...e.rules,value:o}));return i.default.useEffect((()=>{const e=(e,t)=>{const r=I(s._fields,e);r&&(r._f.mount=t)};return e(r,!0),()=>{const t=s._options.shouldUnregister||n;(a?t&&!s._stateFlags.action:t)?s.unregister(r):e(r,!1)}}),[r,s,a,n]),{field:{name:r,value:o,onChange:i.default.useCallback((e=>{c.current.onChange({target:{value:E(e),name:r},type:U})}),[r]),onBlur:i.default.useCallback((()=>{c.current.onBlur({target:{value:I(s._formValues,r),name:r},type:L})}),[r,s]),ref:i.default.useCallback((e=>{const t=I(s._fields,r);e&&t&&e.focus&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r,s._fields])},formState:l,fieldState:Object.defineProperties({},{invalid:{get:()=>!!I(l.errors,r)},isDirty:{get:()=>!!I(l.dirtyFields,r)},isTouched:{get:()=>!!I(l.touchedFields,r)},error:{get:()=>I(l.errors,r)}})}}const he=e=>e.render(fe(e));var xe=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},me=e=>/^\w*$/.test(e),ve=e=>F(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ye(e,t,r){let s=-1;const n=me(t)?[t]:ve(t),a=n.length,i=a-1;for(;++s<a;){const t=n[s];let a=r;if(s!==i){const r=e[t];a=M(r)||Array.isArray(r)?r:isNaN(+n[s+1])?{}:[]}e[t]=a,e=e[t]}return e}const ge=(e,t,r)=>{for(const s of r||Object.keys(e)){const r=I(e,s);if(r){const{_f:e,...s}=r;if(e&&t(e.name)){if(e.ref.focus&&$(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else M(s)&&ge(s,t)}}};var be=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),je="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function we(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(je&&(e instanceof Blob||e instanceof FileList)||!r&&!M(e))return e;t=r?[]:{};for(const r in e){if(de(e[r])){t=e;break}t[r]=we(e[r])}}return t}function ke(e,t){const r=me(t)?[t]:ve(t),s=1==r.length?e:function(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=$(e)?s++:e[t[s++]];return e}(e,r),n=r[r.length-1];let a;s&&delete s[n];for(let t=0;t<r.slice(0,-1).length;t++){let s,n=-1;const i=r.slice(0,-(t+1)),o=i.length-1;for(t>0&&(a=e);++n<i.length;){const t=i[n];s=s?s[t]:e[t],o===n&&(M(s)&&ne(s)||Array.isArray(s)&&!s.filter((e=>!$(e))).length)&&(a?delete a[t]:delete e[t]),a=s}}return e}function Te(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Se=e=>D(e)||!P(e);function Ne(e,t){if(Se(e)||Se(t))return e===t;if(_(e)&&_(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const n of r){const r=e[n];if(!s.includes(n))return!1;if("ref"!==n){const e=t[n];if(_(r)&&_(e)||M(r)&&M(e)||Array.isArray(r)&&Array.isArray(e)?!Ne(r,e):r!==e)return!1}}return!0}var Ce=e=>({isOnSubmit:!e||e===q,isOnBlur:e===R,isOnChange:e===B,isOnAll:e===H,isOnTouch:e===Y}),Oe=e=>"boolean"==typeof e,Ae=e=>"file"===e.type,_e=e=>{const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},De=e=>"select-multiple"===e.type,Pe=e=>"radio"===e.type,Me=e=>_e(e)&&e.isConnected;function Ee(e,t={}){const r=Array.isArray(e);if(M(e)||r)for(const r in e)Array.isArray(e[r])||M(e[r])&&!pe(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ee(e[r],t[r])):D(e[r])||(t[r]=!0);return t}function Ve(e,t,r){const s=Array.isArray(e);if(M(e)||s)for(const s in e)Array.isArray(e[s])||M(e[s])&&!pe(e[s])?$(t)||Se(r[s])?r[s]=Array.isArray(e[s])?Ee(e[s],[]):{...Ee(e[s])}:Ve(e[s],D(t)?{}:t[s],r[s]):r[s]=!Ne(e[s],t[s]);return r}var Fe=(e,t)=>Ve(e,t,Ee(t));const $e={value:!1,isValid:!1},Ie={value:!0,isValid:!0};var Le=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$(e[0].attributes.value)?$(e[0].value)||""===e[0].value?Ie:{value:e[0].value,isValid:!0}:Ie:$e}return $e},ze=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>$(e)?e:t?""===e||D(e)?NaN:+e:r&&ce(e)?new Date(e):s?s(e):e;const Ue={isValid:!1,value:null};var Re=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Ue):Ue;function Be(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Ae(t)?t.files:Pe(t)?Re(e.refs).value:De(t)?[...t.selectedOptions].map((({value:e})=>e)):A(t)?Le(e.refs).value:ze($(t.value)?e.ref.value:t.value,e)}var qe=e=>e instanceof RegExp,Ye=e=>$(e)?void 0:qe(e)?e.source:M(e)?qe(e.value)?e.value.source:e.value:e;function He(e,t,r){const s=I(e,r);if(s||me(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const s=n.join("."),a=I(t,s),i=I(e,s);if(a&&!Array.isArray(a)&&r!==s)return{name:r};if(i&&i.type)return{name:s,error:i};n.pop()}return{name:r}}var Ge=e=>ce(e)||i.default.isValidElement(e);function We(e,t,r="validate"){if(Ge(e)||Array.isArray(e)&&e.every(Ge)||Oe(e)&&!e)return{type:r,message:Ge(e)?e:"",ref:t}}var Qe=e=>M(e)&&!qe(e)?e:{value:e,message:""},Je=async(e,t,r,s)=>{const{ref:n,refs:a,required:i,maxLength:o,minLength:l,min:c,max:u,pattern:d,validate:p,name:f,valueAsNumber:h,mount:x,disabled:m}=e._f;if(!x||m)return{};const v=a?a[0]:n,y=e=>{s&&v.reportValidity&&(v.setCustomValidity(Oe(e)?"":e||" "),v.reportValidity())},g={},b=Pe(n),j=A(n),w=b||j,k=(h||Ae(n))&&!n.value||""===t||Array.isArray(t)&&!t.length,T=xe.bind(null,f,r,g),S=(e,t,r,s=Q,a=J)=>{const i=e?t:r;g[f]={type:e?s:a,message:i,ref:n,...T(e?s:a,i)}};if(i&&(!w&&(k||D(t))||Oe(t)&&!t||j&&!Le(a).isValid||b&&!Re(a).isValid)){const{value:e,message:t}=Ge(i)?{value:!!i,message:i}:Qe(i);if(e&&(g[f]={type:Z,message:t,ref:v,...T(Z,t)},!r))return y(t),g}if(!(k||D(c)&&D(u))){let e,s;const a=Qe(u),i=Qe(c);if(D(t)||isNaN(t)){const r=n.valueAsDate||new Date(t);ce(a.value)&&(e=r>new Date(a.value)),ce(i.value)&&(s=r<new Date(i.value))}else{const r=n.valueAsNumber||+t;D(a.value)||(e=r>a.value),D(i.value)||(s=r<i.value)}if((e||s)&&(S(!!e,a.message,i.message,G,W),!r))return y(g[f].message),g}if((o||l)&&!k&&ce(t)){const e=Qe(o),s=Qe(l),n=!D(e.value)&&t.length>e.value,a=!D(s.value)&&t.length<s.value;if((n||a)&&(S(n,e.message,s.message),!r))return y(g[f].message),g}if(d&&!k&&ce(t)){const{value:e,message:s}=Qe(d);if(qe(e)&&!t.match(e)&&(g[f]={type:K,message:s,ref:n,...T(K,s)},!r))return y(s),g}if(p)if(de(p)){const e=We(await p(t),v);if(e&&(g[f]={...e,...T(X,e.message)},!r))return y(e.message),g}else if(M(p)){let e={};for(const s in p){if(!ne(e)&&!r)break;const n=We(await p[s](t),v,s);n&&(e={...n,...T(s,n.message)},y(n.message),r&&(g[f]=e))}if(!ne(e)&&(g[f]={ref:v,...e},!r))return g}return y(!0),g};const Ke={mode:q,reValidateMode:B,shouldFocusError:!0};function Ze(e={}){let t,r={...Ke,...e},s={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},a=we(r.defaultValues)||{},i=r.shouldUnregister?{}:we(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={};const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={watch:Te(),array:Te(),state:Te()},f=Ce(r.mode),h=Ce(r.reValidateMode),x=r.criteriaMode===H,m=async e=>{let t=!1;return d.isValid&&(t=r.resolver?ne((await b()).errors):await j(n,!0),e||t===s.isValid||(s.isValid=t,p.state.next({isValid:t}))),t},v=(e,t,r,s)=>{const l=I(n,e);if(l){const n=I(i,e,$(r)?I(a,e):r);$(n)||s&&s.defaultChecked||t?ye(i,e,t?n:Be(l._f)):T(e,n),o.mount&&m()}},y=(e,t,r,n,i)=>{let o=!1;const l={name:e},c=I(s.touchedFields,e);if(d.isDirty){const e=s.isDirty;s.isDirty=l.isDirty=w(),o=e!==l.isDirty}if(d.dirtyFields&&(!r||n)){const r=I(s.dirtyFields,e);Ne(I(a,e),t)?ke(s.dirtyFields,e):ye(s.dirtyFields,e,!0),l.dirtyFields=s.dirtyFields,o=o||r!==I(s.dirtyFields,e)}return r&&!c&&(ye(s.touchedFields,e,r),l.touchedFields=s.touchedFields,o=o||d.touchedFields&&c!==r),o&&i&&p.state.next(l),o?l:{}},g=async(r,n,a,i)=>{const o=I(s.errors,r),l=d.isValid&&s.isValid!==n;var f;if(e.delayError&&a?(f=()=>((e,t)=>{ye(s.errors,e,t),p.state.next({errors:s.errors})})(r,a),t=e=>{clearTimeout(c),c=window.setTimeout(f,e)},t(e.delayError)):(clearTimeout(c),t=null,a?ye(s.errors,r,a):ke(s.errors,r)),(a?!Ne(o,a):o)||!ne(i)||l){const e={...i,...l?{isValid:n}:{},errors:s.errors,name:r};s={...s,...e},p.state.next(e)}u[r]--,d.isValidating&&!Object.values(u).some((e=>e))&&(p.state.next({isValidating:!1}),u={})},b=async e=>r.resolver?await r.resolver({...i},r.context,((e,t,r,s)=>{const n={};for(const r of e){const e=I(t,r);e&&ye(n,r,e._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}})(e||l.mount,n,r.criteriaMode,r.shouldUseNativeValidation)):{},j=async(e,t,n={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...a}=o;if(e){const a=await Je(o,I(i,e.name),x,r.shouldUseNativeValidation);if(a[e.name]&&(n.valid=!1,t))break;t||(a[e.name]?ye(s.errors,e.name,a[e.name]):ke(s.errors,e.name))}a&&await j(a,t,n)}}return n.valid},w=(e,t)=>(e&&t&&ye(i,e,t),!Ne(P(),a)),k=(e,t,r)=>{const s={...o.mount?i:$(t)?a:ce(e)?{[e]:t}:t};return ue(e,l,s,r)},T=(e,t,r={})=>{const s=I(n,e);let a=t;if(s){const r=s._f;r&&(!r.disabled&&ye(i,e,ze(t,r)),a=je&&_e(r.ref)&&D(t)?"":t,De(r.ref)?[...r.ref.options].forEach((e=>e.selected=a.includes(e.value))):r.refs?A(r.ref)?r.refs.length>1?r.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(a)?!!a.find((t=>t===e.value)):a===e.value))):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach((e=>e.checked=e.value===a)):Ae(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||p.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&y(e,a,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&O(e)},S=(e,t,r)=>{for(const s in t){const a=t[s],i=`${e}.${s}`,o=I(n,i);!l.array.has(e)&&Se(a)&&(!o||o._f)||_(a)?T(i,a,r):S(i,a,r)}},N=(e,t,r={})=>{const o=I(n,e),c=l.array.has(e),u=we(t);ye(i,e,u),c?(p.array.next({name:e,values:i}),(d.isDirty||d.dirtyFields)&&r.shouldDirty&&(s.dirtyFields=Fe(a,i),p.state.next({name:e,dirtyFields:s.dirtyFields,isDirty:w(e,u)}))):!o||o._f||D(u)?T(e,u,r):S(e,u,r),be(e,l)&&p.state.next({}),p.watch.next({name:e})},C=async e=>{const a=e.target;let o=a.name;const c=I(n,o);if(c){let v,j;const w=a.type?Be(c._f):E(e),k=e.type===L||e.type===z,T=!((d=c._f).mount&&(d.required||d.min||d.max||d.maxLength||d.minLength||d.pattern||d.validate)||r.resolver||I(s.errors,o)||c._f.deps)||((e,t,r,s,n)=>!n.isOnAll&&(!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:!(r?s.isOnChange:n.isOnChange)||e))(k,I(s.touchedFields,o),s.isSubmitted,h,f),S=be(o,l,k);ye(i,o,w),k?(c._f.onBlur&&c._f.onBlur(e),t&&t(0)):c._f.onChange&&c._f.onChange(e);const N=y(o,w,k,!1),C=!ne(N)||S;if(!k&&p.watch.next({name:o,type:e.type}),T)return C&&p.state.next({name:o,...S?{}:N});if(!k&&S&&p.state.next({}),u[o]=(u[o],1),p.state.next({isValidating:!0}),r.resolver){const{errors:e}=await b([o]),t=He(s.errors,n,o),r=He(e,n,t.name||o);v=r.error,o=r.name,j=ne(e)}else v=(await Je(c,I(i,o),x,r.shouldUseNativeValidation))[o],j=await m(!0);c._f.deps&&O(c._f.deps),g(o,j,v,N)}var d},O=async(e,t={})=>{let a,i;const o=ie(e);if(p.state.next({isValidating:!0}),r.resolver){const t=await(async e=>{const{errors:t}=await b();if(e)for(const r of e){const e=I(t,r);e?ye(s.errors,r,e):ke(s.errors,r)}else s.errors=t;return t})($(e)?e:o);a=ne(t),i=e?!o.some((e=>I(t,e))):a}else e?(i=(await Promise.all(o.map((async e=>{const t=I(n,e);return await j(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||s.isValid)&&m()):i=a=await j(n);return p.state.next({...!ce(e)||d.isValid&&a!==s.isValid?{}:{name:e},...r.resolver?{isValid:a}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!i&&ge(n,(e=>I(s.errors,e)),e?o:l.mount),i},P=e=>{const t={...a,...o.mount?i:{}};return $(e)?t:ce(e)?I(t,e):e.map((e=>I(t,e)))},M=(e,t)=>({invalid:!!I((t||s).errors,e),isDirty:!!I((t||s).dirtyFields,e),isTouched:!!I((t||s).touchedFields,e),error:I((t||s).errors,e)}),U=(e,t={})=>{for(const o of e?ie(e):l.mount)l.mount.delete(o),l.array.delete(o),I(n,o)&&(t.keepValue||(ke(n,o),ke(i,o)),!t.keepError&&ke(s.errors,o),!t.keepDirty&&ke(s.dirtyFields,o),!t.keepTouched&&ke(s.touchedFields,o),!r.shouldUnregister&&!t.keepDefaultValue&&ke(a,o));p.watch.next({}),p.state.next({...s,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&m()},R=(e,t={})=>{let s=I(n,e);const c=Oe(t.disabled);return ye(n,e,{_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),s?c&&ye(i,e,t.disabled?void 0:I(i,e,Be(s._f))):v(e,!0,t.value),{...c?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:Ye(t.min),max:Ye(t.max),minLength:Ye(t.minLength),maxLength:Ye(t.maxLength),pattern:Ye(t.pattern)}:{},name:e,onChange:C,onBlur:C,ref:i=>{if(i){R(e,t),s=I(n,e);const r=$(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>Pe(e)||A(e))(r),l=s._f.refs||[];if(o?l.find((e=>e===r)):r===s._f.ref)return;ye(n,e,{_f:{...s._f,...o?{refs:[...l.filter(Me),r,...Array.isArray(I(a,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),v(e,!1,void 0,r)}else s=I(n,e,{}),s._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!V(l.array,e)||!o.action)&&l.unMount.add(e)}}};return{control:{register:R,unregister:U,getFieldState:M,_executeSchema:b,_getWatch:k,_getDirty:w,_updateValid:m,_removeUnmounted:()=>{for(const e of l.unMount){const t=I(n,e);t&&(t._f.refs?t._f.refs.every((e=>!Me(e))):!Me(t._f.ref))&&U(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],r,l,c=!0,u=!0)=>{if(l&&r){if(o.action=!0,u&&Array.isArray(I(n,e))){const t=r(I(n,e),l.argA,l.argB);c&&ye(n,e,t)}if(d.errors&&u&&Array.isArray(I(s.errors,e))){const t=r(I(s.errors,e),l.argA,l.argB);c&&ye(s.errors,e,t),((e,t)=>{!F(I(e,t)).length&&ke(e,t)})(s.errors,e)}if(d.touchedFields&&u&&Array.isArray(I(s.touchedFields,e))){const t=r(I(s.touchedFields,e),l.argA,l.argB);c&&ye(s.touchedFields,e,t)}d.dirtyFields&&(s.dirtyFields=Fe(a,i)),p.state.next({isDirty:w(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else ye(i,e,t)},_getFieldArray:t=>F(I(o.mount?i:a,t,e.shouldUnregister?I(a,t,[]):[])),_subjects:p,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _stateFlags(){return o},set _stateFlags(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return s},set _formState(e){s=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:O,register:R,handleSubmit:(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let o=!0,c=we(i);p.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:e,values:t}=await b();s.errors=e,c=t}else await j(n);ne(s.errors)?(p.state.next({errors:{},isSubmitting:!0}),await e(c,a)):(t&&await t({...s.errors},a),r.shouldFocusError&&ge(n,(e=>I(s.errors,e)),l.mount))}catch(e){throw o=!1,e}finally{s.isSubmitted=!0,p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ne(s.errors)&&o,submitCount:s.submitCount+1,errors:s.errors})}},watch:(e,t)=>de(e)?p.watch.subscribe({next:r=>e(k(void 0,t),r)}):k(e,t,!0),setValue:N,getValues:P,reset:(t,r={})=>{const c=t||a,u=we(c),f=t&&!ne(t)?u:a;if(r.keepDefaultValues||(a=c),!r.keepValues){if(r.keepDirtyValues)for(const e of l.mount)I(s.dirtyFields,e)?ye(f,e,I(i,e)):N(e,I(f,e));else{if(je&&$(t))for(const e of l.mount){const t=I(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{_e(e)&&e.closest("form").reset();break}catch(e){}}}n={}}i=e.shouldUnregister?r.keepDefaultValues?we(a):{}:u,p.array.next({values:f}),p.watch.next({values:f})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!r.keepIsValid,o.watch=!!e.shouldUnregister,p.state.next({submitCount:r.keepSubmitCount?s.submitCount:0,isDirty:r.keepDirty||r.keepDirtyValues?s.isDirty:!(!r.keepDefaultValues||Ne(t,a)),isSubmitted:!!r.keepIsSubmitted&&s.isSubmitted,dirtyFields:r.keepDirty||r.keepDirtyValues?s.dirtyFields:r.keepDefaultValues&&t?Fe(a,t):{},touchedFields:r.keepTouched?s.touchedFields:{},errors:r.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{I(n,e)&&($(t.defaultValue)?N(e,I(a,e)):(N(e,t.defaultValue),ye(a,e,t.defaultValue)),t.keepTouched||ke(s.touchedFields,e),t.keepDirty||(ke(s.dirtyFields,e),s.isDirty=t.defaultValue?w(e,I(a,e)):w()),t.keepError||(ke(s.errors,e),d.isValid&&m()),p.state.next({...s}))},clearErrors:e=>{e?ie(e).forEach((e=>ke(s.errors,e))):s.errors={},p.state.next({errors:s.errors})},unregister:U,setError:(e,t,r)=>{const a=(I(n,e,{_f:{}})._f||{}).ref;ye(s.errors,e,{...t,ref:a}),p.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},setFocus:(e,t={})=>{const r=I(n,e)._f,s=r.refs?r.refs[0]:r.ref;t.shouldSelect?s.select():s.focus()},getFieldState:M}}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tt=function(){var e=t.useContext(w),r=t.useCallback((function(t){var r,s=null==(r=e.translations)?void 0:r[t];if(s){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.length?l(s,a):s}return t}),[e]);return et(et({},e),{},{t:r})};function rt(e,t,r,s,n,a,i){try{var o=e[a](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(s,n)}function st(e){return function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function i(e){rt(a,s,n,i,o,"next",e)}function o(e){rt(a,s,n,i,o,"throw",e)}i(void 0)}))}}var nt={exports:{}},at={exports:{}};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(at),function(e){var t=at.exports.default;function r(){e.exports=r=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var s={},n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(e,t,r,s){var n=t&&t.prototype instanceof h?t:h,a=Object.create(n.prototype),i=new N(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return O()}for(r.method=n,r.arg=a;;){var i=r.delegate;if(i){var o=k(i,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var l=p(e,t,r);if("normal"===l.type){if(s=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(s="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}s.wrap=d;var f={};function h(){}function x(){}function m(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==n&&a.call(g,o)&&(v=g);var b=m.prototype=h.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,r){function s(n,i,o,l){var c=p(e[n],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==t(d)&&a.call(d,"__await")?r.resolve(d.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):r.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return s("throw",e,o,l)}))}l(c.arg)}var n;this._invoke=function(e,t){function a(){return new r((function(r,n){s(e,t,r,n)}))}return n=n?n.then(a,a):a()}}function k(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=p(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,f;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:O}}function O(){return{value:void 0,done:!0}}return x.prototype=m,u(b,"constructor",m),u(m,"constructor",x),x.displayName=u(m,c,"GeneratorFunction"),s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},j(w.prototype),u(w.prototype,l,(function(){return this})),s.AsyncIterator=w,s.async=function(e,t,r,n,a){void 0===a&&(a=Promise);var i=new w(d(e,t,r,n),a);return s.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(b),u(b,c,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),s.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},s.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,s){return i.type="throw",i.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],i=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=a.call(n,"catchLoc"),l=a.call(n,"finallyLoc");if(o&&l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&a.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;S(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(nt);var it=nt.exports(),ot=it;try{regeneratorRuntime=it}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=it:Function("r","regeneratorRuntime = r")(it)}var lt="vanguard.checkout.address.cta.change",ct="vanguard.checkout.address.cta.add",ut="vanguard.checkout.address.formTitle",dt="vanguard.checkout.address.name",pt="vanguard.checkout.address.required",ft="vanguard.checkout.address.line1",ht="vanguard.checkout.address.line2",xt="vanguard.checkout.address.zipcode",mt="vanguard.checkout.address.cityTown",vt="vanguard.checkout.address.country",yt="vanguard.checkout.address.cta.cancel",gt="vanguard.checkout.address.search",bt="vanguard.checkout.address.addNew",jt="vanguard.cart.overlay.delete",wt="vanguard.confirmationDialog.message",kt="vanguard.checkout.address.cancel",Tt="vanguard.checkout.address.confirm",St="vanguard.cart.delete",Nt="vanguard.cart.totalPrice",Ct="vanguard.cart.product.notAvailable",Ot="vanguard.cart.positionText",At="vanguard.cart.reduction",_t="vanguard.cart.salesCommentLabel",Dt="vanguard.cart.emks.new_key_system",Pt="vanguard.cart.emks.extension",Mt="vanguard.cart.emks.reorder",Et="vanguard.cart.emks.new_series",Vt="vanguard.checkout.item.sales.totalPrice",Ft="vanguard.checkout.item.sales.totalPrice.tooltip",$t="vanguard.checkout.item.sales.quantity",It="vanguard.checkout.ean",Lt="vanguard.checkout.item.sales.listPrice",zt="vanguard.checkout.item.sales.userPrice",Ut="vanguard.checkout.item.sales.discount",Rt="vanguard.checkout.entry.sales.netPricePerUnit",Bt="vanguard.checkout.committedDelivery",qt="vanguard.cart.quantityPerSet",Yt="vanguard.cart.quantityPerItem",Ht="vanguard.cart.items",Gt="vanguard.cart.lockPosition",Wt="vanguard.cart.configurationData",Qt=t.createContext(null),Jt=function(r){var s=r.children,n=r.onAdd,a=r.onChange,i=r.onRemove,o=r.available,l=void 0===o?[]:o,u=r.showOneTimeAddress,d=r.address,p=t.useState(d||null),f=p[0],h=p[1],x=t.useState(!1),m=x[0],v=x[1],y=t.useState(!1),g=y[0],b=y[1],j=t.useState([]),w=j[0],k=j[1],T=function(){var e=t.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),r=t.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),s=t.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:t.useCallback((function(){return sessionStorage.clear()}),[]),setItem:e,getItem:r,removeItem:s}}(),S=T.setItem,N=T.getItem,C=tt().cartCode,O=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:C}).data;return t.useEffect((function(){var e=N("OneTimeAddress")&&JSON.parse(N("OneTimeAddress").value);m&&k(e||[])}),[m,N]),c.exports.jsx(Qt.Provider,{value:{address:d,availableAddresses:[].concat(l,u?w:[]),showOneTimeAddress:u,availableCountries:O,selectedAddress:f,setSelectedAddress:h,isAddressDialogVisible:m,setAddressDialogVisible:v,isRemoveAddressDialogVisible:g,setRemoveAddressDialogVisible:b,handleAddOneTimeAddress:function(e){h(e),n(e),S("OneTimeAddress",JSON.stringify([].concat(w,[e]))),v(!1)},handleChange:function(){f.id?a(f):n(f),v(!1)},handleRemove:function(e){i(e),b(!1)}},children:s})},Kt=function(){return t.useContext(Qt)};function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var er=function(){var e=tt().t,r=te(),n=r.register,a=r.setValue,i=r.control,o=r.formState,l=t.useRef(null),u=Kt().availableCountries,d=o.errors,p=n("streetName",{required:e(pt)}),f=t.useMemo((function(){return u.map((function(e){return{label:e.name,value:e.isocode}}))}),[u]),h=t.useState({}),x=h[0],m=h[1];t.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var s=new google.maps.places.Autocomplete(l.current,{fields:["address_components"]});s.setComponentRestrictions({country:f.map((function(e){return e.value.toString()}))}),s.addListener("place_changed",(function(){var e,t=((null==(e=s.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});m(t),Object.keys(t).forEach((function(e){return a(e,t[e])}))}))}}),[a,f]);var v=function(e,t){var r;a(e,t),m(Xt(Xt({},x),{},((r={})[e]=t,r)))};return c.exports.jsxs("div",{"data-testid":"addAddress",className:"h-140 md:h-96",children:[c.exports.jsxs("div",{className:"pb-4 space-y-2",children:[c.exports.jsx(s.TextInput,Xt(Xt({},n("companyName",{required:e(pt)})),{},{label:e(dt)+"*",testid:"companyNameInput",autoComplete:"organization",maxlength:40,error:null==d?void 0:d.companyName,inputClassName:"w-full"})),c.exports.jsx(s.TextInput,Xt(Xt({},n("companyName2")),{},{testid:"companyName2Input",maxlength:40,inputClassName:"w-full"}))]}),c.exports.jsxs("div",{className:"flex flex-col pb-2 sm:flex-row sm:space-x-2",children:[c.exports.jsx("div",{className:"w-full sm:w-4/5",children:c.exports.jsx(s.TextInput,Xt(Xt({},p),{},{ref:function(e){p.ref(e),l.current=e},testid:"streetNameInput",label:e(ft)+"*",autoComplete:"street-address",maxlength:60,error:null==d?void 0:d.streetName,onChange:function(e){return v("streetName",e.target.value)},value:null==x?void 0:x.streetName,inputClassName:"w-full"}))}),c.exports.jsx("div",{className:"w-full sm:w-1/5",children:c.exports.jsx(s.TextInput,Xt(Xt({},n("streetNumber",{required:e(pt)})),{},{testid:"streetNumberInput",label:e(ht)+"*",error:null==d?void 0:d.streetNumber,maxlength:12,autoComplete:"street-address",onChange:function(e){return v("streetNumber",e.target.value)},value:null==x?void 0:x.streetNumber,inputClassName:"w-full"}))})]}),c.exports.jsxs("div",{className:"flex space-x-2 pb-2",children:[c.exports.jsx("div",{className:"w-1/5",children:c.exports.jsx(s.TextInput,Xt(Xt({},n("zipCode",{required:e(pt)})),{},{testid:"zipCodeInput",label:e(xt)+"*",error:null==d?void 0:d.zipCode,maxlength:10,autoComplete:"postal-code",onChange:function(e){return v("zipCode",e.target.value)},value:null==x?void 0:x.zipCode,inputClassName:"w-full"}))}),c.exports.jsx("div",{className:"w-4/5",children:c.exports.jsx(s.TextInput,Xt(Xt({},n("city",{required:e(pt)})),{},{testid:"cityInput",label:e(mt)+"*",error:null==d?void 0:d.city,maxlength:40,autoComplete:"address-level2",onChange:function(e){return v("city",e.target.value)},value:null==x?void 0:x.city,inputClassName:"w-full"}))})]}),c.exports.jsx(he,{control:i,name:"country",rules:{required:!0},render:function(t){var r=t.field;return c.exports.jsx(s.Select,{label:e(vt)+"*",value:null==x?void 0:x.country,testid:"countryInput",options:f,error:null==d?void 0:d.country,onChange:function(e){r.onChange(e.target.value),v("country",e.target.value)}})}})]})},tr=function(e){var r=e.address,n=t.useMemo((function(){var e;return{company:null==r?void 0:r.companyName,imprint:[null==r?void 0:r.line1,null==r?void 0:r.line2].join(" "),region:[null==r?void 0:r.postalCode,null==r?void 0:r.town].join(" "),country:null==r||null==(e=r.country)?void 0:e.name,first_name:null==r?void 0:r.first_name,last_name:null==r?void 0:r.last_name}}),[r]);return c.exports.jsxs("div",{"data-testid":"addressPreview",children:[(null==n?void 0:n.company)&&c.exports.jsx(s.Text,{testid:"company",children:null==n?void 0:n.company}),((null==n?void 0:n.first_name)||(null==n?void 0:n.last_name))&&c.exports.jsxs(s.Text,{testid:"name",children:[null==n?void 0:n.first_name," ",null==n?void 0:n.last_name]}),(null==n?void 0:n.imprint)&&c.exports.jsx(s.Text,{testid:"imprint",children:null==n?void 0:n.imprint}),(null==n?void 0:n.region)&&c.exports.jsx(s.Text,{testid:"region",children:null==n?void 0:n.region}),(null==n?void 0:n.country)&&c.exports.jsx(s.Text,{testid:"country",children:null==n?void 0:n.country})]})},rr=function(){var e=Kt(),r=e.availableAddresses,n=e.selectedAddress,a=e.setSelectedAddress,i=t.useState(""),l=i[0],u=i[1],d=function(e,t){return e.id&&t.id?e.id===t.id:e.companyName.trim()===t.companyName.trim()&&e.line1.trim()===t.line1.trim()&&e.line2.trim()===t.line2.trim()&&e.town.trim()===t.town.trim()&&e.postalCode===t.postalCode&&JSON.stringify(e.country)===JSON.stringify(t.country)};return c.exports.jsxs("div",{"data-testid":"searchAddress",className:"h-140 mt-6 md:h-96 sm:mt-0",children:[c.exports.jsx(s.TextInput,{testid:"searchInput",inputClassName:"w-full",value:l,onChange:function(e){var t=e.target.value;u(t)},icon:{type:"search"}}),c.exports.jsx("div",{className:"max-h-80 overflow-y-auto mt-2","data-testid":"list",children:r.filter((function(e){return(null==l?void 0:l.length)<3||e.companyName.toLowerCase().includes(l.toLowerCase())})).map((function(e,t){return c.exports.jsx("div",{className:o.default("h-1/3","p-3","cursor-pointer","border-l-4",n&&{"hover:border-gray-300":!d(e,n),"border-primary":d(e,n)}),onClick:function(){return a(e)},"data-testid":"item",children:c.exports.jsx(tr,{address:e})},t)}))})]})};function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ar=function(){var e=t.useState("addNew"),r=e[0],n=e[1],a=tt().t,o=Kt(),l=o.availableAddresses,u=o.showOneTimeAddress,d=o.isAddressDialogVisible,p=o.availableCountries,f=o.setAddressDialogVisible,h=o.handleChange,x=o.handleAddOneTimeAddress,m=function(e={}){const t=i.default.useRef(),[r,s]=i.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Ze(e),formState:r};const n=t.current.control,a=i.default.useCallback((e=>{ae(e,n._proxyFormState,!0)&&(n._formState={...n._formState,...e},s({...n._formState}))}),[n]);return le({subject:n._subjects.state,callback:a}),i.default.useEffect((()=>{n._stateFlags.mount||(n._proxyFormState.isValid&&n._updateValid(),n._stateFlags.mount=!0),n._stateFlags.watch&&(n._stateFlags.watch=!1,n._subjects.state.next({})),n._removeUnmounted()})),t.current.formState=se(r,n._proxyFormState),t.current}(),v=function(e){var t={companyName:(e.companyName+" "+e.companyName2).trim(),line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:p.find((function(t){return t.isocode===e.country}))};x(t)};return t.useEffect((function(){n((null==l?void 0:l.length)>0?"search":"addNew")}),[l]),c.exports.jsxs(s.Dialog,{title:a(ut),isOpen:d,onClose:function(){return f(!1)},testid:"addressDialog",children:[(null==l?void 0:l.length)>0&&u&&c.exports.jsxs(s.Tabs,{className:"flex-col sm:flex-row",onSelectTab:function(e){return n(e)},size:"sm",children:[c.exports.jsx(s.Tabs.Tab,{testid:"searchTab",tabKey:"search",title:a(gt),selected:"search"===r}),c.exports.jsx(s.Tabs.Tab,{testid:"addNewTab",tabKey:"addNew",title:a(bt),selected:"addNew"===r})]}),c.exports.jsx(re,nr(nr({},m),{},{children:"search"===r?c.exports.jsx(rr,{}):c.exports.jsx(er,{})})),c.exports.jsxs("div",{className:"flex mt-6 space-x-4 justify-between sm:justify-end",children:[c.exports.jsx(s.Button,{variant:"outlined",testid:"cancelButton",onClick:function(){return f(!1),void m.reset()},children:a(kt)}),c.exports.jsx(s.Button,{testid:"confirmButton",onClick:function(){return"search"===r?h():m.handleSubmit(v)()},children:a(Tt)})]})]})},ir=function(e){var t=e.hasRemove,r=Kt(),n=r.address,a=r.availableAddresses,i=r.showOneTimeAddress,o=r.setAddressDialogVisible,l=r.setRemoveAddressDialogVisible,u=tt().t,d=(null==a?void 0:a.length)>1||i;return c.exports.jsxs(c.exports.Fragment,{children:[c.exports.jsx(tr,{address:n}),d&&c.exports.jsxs("div",{className:"flex divide-x-2 space-x-2 mt-1",children:[c.exports.jsx(s.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return o(!0)},children:u(n?lt:ct)}),n&&t&&c.exports.jsx("div",{className:"pl-2",children:c.exports.jsx(s.Button,{testid:"removeAddressButton",variant:"text",onClick:function(){return l(!0)},children:u(jt)})})]})]})},or=function(){var e=tt().t,t=Kt(),r=t.setRemoveAddressDialogVisible,n=t.isRemoveAddressDialogVisible,a=t.handleRemove,i=t.address;return c.exports.jsxs(s.Dialog,{title:e(St),testid:"deleteAddressDialog",isOpen:n,onClose:function(){return r(!1)},children:[c.exports.jsx(s.Text,{children:e(wt)}),c.exports.jsxs("div",{className:"flex mt-8 space-x-4 justify-end",children:[c.exports.jsx(s.Button,{testid:"cancelButton",variant:"outlined",onClick:function(){return r(!1)},children:e(yt)}),c.exports.jsx(s.Button,{testid:"confirmButton",onClick:function(){return a(i)},children:e(jt)})]})]})};function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ur=function(e){var t=Object.assign({},e);return c.exports.jsxs(Jt,cr(cr({},t),{},{children:[c.exports.jsx(ir,{hasRemove:!!t.onRemove}),c.exports.jsx(ar,{}),c.exports.jsx(or,{})]}))},dr={NEW_KEY_SYSTEM:Dt,EXTENSION:Pt,REORDER:Mt,NEW_SERIES:Et},pr={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,s="millisecond",n="second",a="minute",i="hour",o="day",l="week",c="month",u="quarter",d="year",p="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},y={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+v(s,2,"0")+":"+v(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(s,c),a=r-n<0,i=t.clone().add(s+(a?-1:1),c);return+(-(s+(r-n)/(a?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:o,D:p,h:i,m:a,s:n,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=m;var j=function(e){return e instanceof S},w=function e(t,r,s){var n;if(!t)return g;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(n=a),r&&(b[a]=r,n=a);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var o=t.name;b[o]=t,n=o}return!s&&n&&(g=n),n||!s&&g},k=function(e,t){if(j(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},T=y;T.l=w,T.i=j,T.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function m(e){this.$L=w(e.locale,null,!0),this.parse(e)}var v=m.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(h);if(s){var n=s[2]-1||0,a=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return T},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,r){return T.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,s=!!T.u(t)||t,u=T.p(e),f=function(e,t){var n=T.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return s?n:n.endOf(o)},h=function(e,t){return T.w(r.toDate()[e].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},x=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return s?f(1,0):f(31,11);case c:return s?f(1,m):f(0,m+1);case l:var g=this.$locale().weekStart||0,b=(x<g?x+7:x)-g;return f(s?v-b:v+(6-b),m);case o:case p:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case n:return h(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,l=T.p(e),u="set"+(this.$u?"UTC":""),f=(r={},r[o]=u+"Date",r[p]=u+"Date",r[c]=u+"Month",r[d]=u+"FullYear",r[i]=u+"Hours",r[a]=u+"Minutes",r[n]=u+"Seconds",r[s]=u+"Milliseconds",r)[l],h=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var x=this.clone().set(p,1);x.$d[f](h),x.init(),this.$d=x.set(p,Math.min(this.$D,x.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[T.p(e)]()},v.add=function(s,u){var p,f=this;s=Number(s);var h=T.p(u),x=function(e){var t=k(f);return T.w(t.date(t.date()+Math.round(e*s)),f)};if(h===c)return this.set(c,this.$M+s);if(h===d)return this.set(d,this.$y+s);if(h===o)return x(1);if(h===l)return x(7);var m=(p={},p[a]=t,p[i]=r,p[n]=e,p)[h]||1,v=this.$d.getTime()+s*m;return T.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=T.z(this),a=this.$H,i=this.$m,o=this.$M,l=r.weekdays,c=r.months,u=function(e,r,n,a){return e&&(e[r]||e(t,s))||n[r].slice(0,a)},d=function(e){return T.s(a%12||12,e,"0")},p=r.meridiem||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:T.s(o+1,2,"0"),MMM:u(r.monthsShort,o,c,3),MMMM:u(c,o),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:u(r.weekdaysMin,this.$W,l,2),ddd:u(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:T.s(a,2,"0"),h:d(1),hh:d(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:T.s(i,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:n};return s.replace(x,(function(e,t){return t||h[e]||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(s,p,f){var h,x=T.p(p),m=k(s),v=(m.utcOffset()-this.utcOffset())*t,y=this-m,g=T.m(this,m);return g=(h={},h[d]=g/12,h[c]=g,h[u]=g/3,h[l]=(y-v)/6048e5,h[o]=(y-v)/864e5,h[i]=y/r,h[a]=y/t,h[n]=y/e,h)[x]||y,f?g:T.a(g)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=w(e,t,!0);return s&&(r.$L=s),r},v.clone=function(){return T.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),N=S.prototype;return k.prototype=N,[["$ms",s],["$s",n],["$m",a],["$H",i],["$W",o],["$M",c],["$y",d],["$D",p]].forEach((function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,S,k),e.$i=!0),k},k.locale=w,k.isDayjs=j,k.unix=function(e){return k(1e3*e)},k.en=b[g],k.Ls=b,k.p={},k}()}(pr);var fr,hr,xr=pr.exports,mr=function(e){var t=e.deliveryInfos,r=void 0===t?[]:t,n=tt().t,a=r.filter((function(e){return e.receiptDate})).map((function(e){return e.receiptDate})).sort().map((function(e){return xr(e).format("DD.MM.YYYY")})),i=a[0],o=a[a.length-1];return c.exports.jsxs("div",{className:"w-1/2 md:w-36 lg:w-40 xl:w-48 flex-none lg:text-right","data-testid":"committedDelivery",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"label",children:n(Bt)}),c.exports.jsx("div",{className:"flex md:justify-end space-x-2","data-testid":"value",children:a.length>0?c.exports.jsxs(c.exports.Fragment,{children:[c.exports.jsx(s.Icon,{type:"greenTick"}),c.exports.jsx(s.Text,{size:"sm",type:"span",children:i===o?i:i+" - "+o})]}):c.exports.jsx(s.Text,{type:"span",children:"-"})})]})},vr=function(e){var t=e.value,r=tt().t;return c.exports.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"positionText",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"label",children:r(Ot)}),c.exports.jsx(s.Text,{size:"sm",testid:"value",children:t})]})},yr=function(e){var t=e.imageSrc,r=e.imageAlt,n=e.productName,a=e.configName,i=e.marketSystemName,o=e.ean,l=e.badgeType,u=e.badgeText,d=e.medias,p=tt().t;return c.exports.jsxs("div",{className:"flex-grow flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-2",children:[c.exports.jsx(s.Image,{src:t,alt:r,fullWidth:!1,className:"w-20 h-20"}),c.exports.jsxs("div",{className:"space-y-1",children:[c.exports.jsxs("div",{children:[c.exports.jsx(s.Text,{color:"primary",type:"span",bold:!0,testid:"name",children:n}),i&&c.exports.jsx(s.Text,{color:"primary",size:"sm",type:"span",bold:!0,testid:"masterMarketSystem",children:i})]}),c.exports.jsxs("div",{className:"flex lg:flex-col xl:flex-row space-x-2 xl:items-center",children:[u&&c.exports.jsx(s.Chip,{testid:"masterBadge",background:l,label:u}),o&&c.exports.jsx(s.Text,{size:"sm",testid:"ean",children:p(It)+": "+o})]}),a&&c.exports.jsx(s.Text,{size:"sm",testid:"configName",children:a}),d&&c.exports.jsx("div",{className:"flex flex-wrap","data-testid":"uploadedFiles",children:d.map((function(e){return c.exports.jsx(s.Chip,{label:e.realFileName,onClick:function(){return window.open(e.url,"_blank")},className:"mr-1 mt-1"},e.code)}))})]})]})},gr=function(e){var t=e.amount,r=e.unitName,n=tt().t;return c.exports.jsxs("div",{className:"w-1/2 md:w-20 lg:w-28 flex-none lg:text-right","data-testid":"quantity",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"label",children:n($t)}),c.exports.jsxs(s.Text,{size:"sm",testid:"value",children:[t," ",r]})]})},br=function(e){var t=e.value,r=tt().t;return c.exports.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"salesText",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"label",children:r(_t)}),c.exports.jsx(s.Text,{size:"sm",testid:"value",children:t})]})},jr=function(e){var t=e.totalPrice,r=tt().t;return c.exports.jsxs("div",{className:"w-1/2 md:w-28 lg:w-32 flex-none lg:text-right","data-testid":"totalPrice",children:[c.exports.jsxs("div",{className:"flex lg:justify-end",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"label",children:r(Vt)}),c.exports.jsx(s.Tooltip,{position:"left",render:r(Ft),children:c.exports.jsx(s.Icon,{type:"info",className:"px-1",size:"xs"})})]}),c.exports.jsx(s.Text,{size:"sm","data-testid":"value",children:c.exports.jsx(s.Price,{price:t})})]})},wr=function(e){var t=e.gross,r=e.net,n=e.discount,a=tt().t;return c.exports.jsxs("div",{className:"w-1/2 md:w-40 lg:w-48 xl:w-64 flex-none lg:text-right","data-testid":"unitPrice",children:[c.exports.jsx(s.Text,{bold:!0,size:"sm",testid:"header",children:a(Rt)}),c.exports.jsxs(s.Text,{size:"sm",testid:"grossPrice",children:[a(Lt)+": ",c.exports.jsx(s.Price,{price:t})]}),c.exports.jsxs(s.Text,{size:"sm",testid:"netPrice",children:[a(zt)+": ",c.exports.jsx(s.Price,{price:r})]}),!!n&&c.exports.jsxs(s.Text,{color:"green",size:"sm",testid:"discount",children:[a(Ut)," ",n,"%"]})]})},kr=function(e){var r=e.lockingPositions,n=t.useState(!1),a=n[0],i=n[1];return c.exports.jsx("div",{onClick:function(){"Range"!=window.getSelection().type&&i(!a)},className:"pr-6 space-y-3",children:c.exports.jsx(s.Text,{size:"sm",type:"span",testid:"lockingPosition",children:!a&&r.length>12?r.slice(0,12).join(", ")+" ...":r.join(", ")})})},Tr=function(e){var t=e.name,r=e.infos,n=void 0===r?[]:r;return c.exports.jsxs("div",{className:"pr-6 space-y-3","data-testid":"configuration",children:[t&&c.exports.jsx(s.Text,{size:"sm",testid:"name",children:t}),n.length>0&&c.exports.jsx(s.List,{isCompressed:!0,children:n.map((function(e,t){return c.exports.jsx(s.List.Item,{name:e.configurationLabel,value:e.configurationValue},t)}))})]})},Sr=function(e){var t=e.name,r=e.isEntryAvailable,n=e.type,a=tt().t;return c.exports.jsxs("div",{className:"flex items-center",children:[!r&&c.exports.jsx(s.Tooltip,{render:a(Ct),position:"right",children:c.exports.jsx(s.Icon,{type:"warning",className:"pr-2"})}),c.exports.jsx(s.Icon,{type:{KEY:"locked",CYLINDER:"cylinder",SECURITYCARD:"card"}[n],className:"pr-2"}),c.exports.jsx(s.Text,{size:"sm",type:"span",testid:"name",children:t})]})},Nr=function(e){var t=e.userPrice,r=e.listPrice,n=e.discount,a=tt().t;return c.exports.jsxs("div",{className:"justify-center",children:[c.exports.jsx(s.Text,{bold:!0,align:"right",size:"sm",color:"primary",testid:"userPrice",children:c.exports.jsx(s.Price,{price:t||r})}),!!n&&c.exports.jsxs("div",{className:"flex flex-col",children:[c.exports.jsx(s.Text,{type:"span",size:"sm",color:"gray",transform:["line-through"],testid:"listPrice",children:c.exports.jsx(s.Price,{price:r})}),c.exports.jsx(s.Text,{type:"span",size:"sm",color:"green",testid:"discount",children:a(At,""+n)})]})]})},Cr=function(e){var r=e.subpositions,n=e.isExpanded,a=void 0!==n&&n,i=e.showPrice,o=e.showSetsQuantity,l=e.totalSets,u=tt().t,d=t.useState(a),p=d[0],f=d[1],h=t.useState(1),x=h[0],m=h[1],v=t.useMemo((function(){return e=r,t=10,Array.from({length:Math.ceil(e.length/t)},(function(r,s){return e.slice(s*t,s*t+t)}));var e,t}),[r]);return c.exports.jsxs("div",{"data-testid":"subpositions",children:[p&&c.exports.jsxs(c.exports.Fragment,{children:[c.exports.jsx("div",{className:"overflow-x-auto",children:c.exports.jsx("div",{className:"px-2 min-w-300",children:c.exports.jsxs(s.Table,{children:[c.exports.jsx(s.Table.Header,{children:c.exports.jsxs(s.Table.Row,{children:[c.exports.jsx(s.Table.HeaderCell,{width:"200px",children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(Ht)})}),c.exports.jsx(s.Table.HeaderCell,{width:"300px",children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(Gt)})}),c.exports.jsx(s.Table.HeaderCell,{children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(Wt)})}),o&&c.exports.jsx(s.Table.HeaderCell,{width:"120px",align:"right",children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(qt)})}),c.exports.jsx(s.Table.HeaderCell,{width:"120px",align:"right",children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(Yt)})}),i&&c.exports.jsx(s.Table.HeaderCell,{width:"220px",align:"right",children:c.exports.jsx(s.Text,{size:"sm",color:"primary",children:u(Nt)})})]})}),c.exports.jsx(s.Table.Body,{children:v[x-1].map((function(e,t){var r,n,a,u,d;return c.exports.jsxs(s.Table.Row,{children:[c.exports.jsx(s.Table.Cell,{children:c.exports.jsx(Sr,{name:null==(r=e.product)?void 0:r.name,isEntryAvailable:!(null!=(n=e.product)&&n.sapBlocked)&&(null==(a=e.product)?void 0:a.purchasable)&&(null==(u=e.product)?void 0:u.ecommerceEligible),type:null==(d=e.product)?void 0:d.materialType})}),c.exports.jsx(s.Table.Cell,{children:c.exports.jsx(kr,{lockingPositions:e.lockingPositions})}),c.exports.jsx(s.Table.Cell,{children:c.exports.jsx(Tr,{name:e.configurationName,infos:e.configurationInfos})}),o&&c.exports.jsx(s.Table.Cell,{align:"right",children:c.exports.jsxs(s.Text,{size:"sm",type:"span",testid:"quantityPerSet",children:[e.quantity,"x"]})}),c.exports.jsx(s.Table.Cell,{align:"right",children:c.exports.jsxs(s.Text,{size:"sm",type:"span",testid:"quantity",children:[e.quantity*l,"x"]})}),i&&c.exports.jsx(s.Table.Cell,{align:"right",children:c.exports.jsx(Nr,{userPrice:e.userPrice,listPrice:e.totalListPrice,discount:e.discountInPercentage})})]},t)}))})]})})}),v.length>1&&c.exports.jsx("div",{className:"px-4",children:c.exports.jsx(s.Pagination,{current:x,total:v.length,onChange:function(e){return m(e)}})})]}),r.length>0&&c.exports.jsxs("button",{"data-testid":"expandButton",className:"flex bg-gray-100 w-full text-xs space-x-1 justify-center",onClick:function(){return f(!p)},children:[c.exports.jsx(s.Icon,{type:p?"arrowup":"arrowdown",size:"xs",className:"self-center"}),c.exports.jsx(s.Text,{color:"primary",size:"sm",bold:!0,children:r.length+" "+u(Ht)})]})]})},Or=function(e){var r=e.groupedEntries,s=tt(),n=s.t,a=s.showPrice,i=t.useMemo((function(){return r.filter((function(e){return"headPosition"===Object.keys(e)[0]})).map((function(e){var t,r,s,i,o,l,u,d=e.headPosition;return c.exports.jsxs("li",{className:"shadow rounded bg-lighter",children:[c.exports.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full relative p-2 mb-4",children:[c.exports.jsx("div",{className:"col-span-full lg:col-span-4",children:c.exports.jsx(yr,{imageSrc:null==d||null==(t=d.thumbnail)?void 0:t.url,imageAlt:null==d||null==(r=d.thumbnail)?void 0:r.altText,productName:(null==d?void 0:d.marketSystemName)&&""+(null==d?void 0:d.marketSystemName),badgeType:"success",badgeText:n((u=null==d?void 0:d.businessCase,dr[u]))})}),c.exports.jsx("div",{className:"col-span-full lg:col-span-8",children:c.exports.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==d||null==(s=d.salesText)?void 0:s.textContent)&&c.exports.jsx(br,{value:null==d||null==(i=d.salesText)?void 0:i.textContent}),(null==d||null==(o=d.positionText)?void 0:o.textContent)&&c.exports.jsx(vr,{value:null==d||null==(l=d.positionText)?void 0:l.textContent}),c.exports.jsx(gr,{amount:null==d?void 0:d.quantity}),a&&c.exports.jsx(jr,{totalPrice:null==d?void 0:d.price})]})})]}),(null==d?void 0:d.entries)&&c.exports.jsx("div",{className:"w-full",children:c.exports.jsx(Cr,{subpositions:d.entries,showPrice:a})})]},null==d?void 0:d.code)}))}),[r,a,n]),o=t.useMemo((function(){return r.filter((function(e){return"singleEntry"===Object.keys(e)[0]})).map((function(e){var t,r,s,n,i,o,l,u,d,p,f,h,x,m=e.singleEntry;return c.exports.jsx("li",{children:c.exports.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full shadow rounded relative bg-lighter p-2 mb-4",children:[c.exports.jsx("div",{className:"col-span-full lg:col-span-4",children:c.exports.jsx(yr,{imageSrc:null==m||null==(r=m.product)||null==(s=r.thumbnails)||null==(n=s[0])?void 0:n.url,imageAlt:null==m||null==(i=m.product)||null==(o=i.thumbnails)||null==(l=o[0])?void 0:l.altText,productName:null==m||null==(u=m.product)?void 0:u.name,badgeText:null==m||null==(d=m.product)?void 0:d.code.replace(/^0+/,""),badgeType:"error",ean:null==m||null==(p=m.product)?void 0:p.ean,medias:null==m?void 0:m.medias,configName:null==m?void 0:m.configurationName})}),c.exports.jsx("div",{className:"col-span-full lg:col-span-8",children:c.exports.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==m||null==(f=m.positionText)?void 0:f.textContent)&&c.exports.jsx(vr,{value:null==m||null==(h=m.positionText)?void 0:h.textContent}),a&&c.exports.jsx(wr,{gross:null==m?void 0:m.listPricePerUnit,net:null==m?void 0:m.netPricePerUnit,discount:null==m?void 0:m.discountInPercentage}),c.exports.jsx(gr,{amount:null==m?void 0:m.quantity,unitName:null==m||null==(x=m.displayUnit)?void 0:x.name}),a&&c.exports.jsx(jr,{totalPrice:null==m?void 0:m.userPrice}),a&&c.exports.jsx(mr,{deliveryInfos:null==m?void 0:m.committedDeliveryInfos})]})})]})},null==m||null==(t=m.product)?void 0:t.code)}))}),[r,a]);return c.exports.jsxs("ul",{className:"space-y-4 py-2 lg:px-8","data-testid":"finalReview",children:[i,o]})};!function(e){e.Copy="copy",e.Move="move"}(fr||(fr={})),function(e){e.private="private",e.public="public"}(hr||(hr={}));var Ar=navigator.userAgent.includes("Firefox"),_r=function(t){var r=t.fixed,n=void 0===r||r;return e.store.hooks.useIsFetching()&&c.exports.jsx("div",{className:o.default("w-full h-full flex items-center justify-center top-0 left-0 z-10 backdrop-filter backdrop-blur",{"bg-gray-200 opacity-60":Ar},n?"fixed":"absolute"),"data-testid":"overlayLoader",children:c.exports.jsx(s.Icon,{size:"xl",type:"loader"})})},Dr="vanguard.cart.calculatePrice.success",Pr="vanguard.cart.calculatePrice.error",Mr="vanguard.checkout.endUserInformation.tile",Er="vanguard.checkout.notification",Vr="vanguard.checkout.notification.placeOrder.error",Fr="vanguard.checkout.header",$r="vanguard.checkout.addressUpdate.success",Ir="vanguard.checkout.addressUpdate.error",Lr="vanguard.checkout.addressDelete.success",zr="vanguard.checkout.addressDelete.error",Ur="vanguard.checkout.delivery.tile",Rr="vanguard.checkout.delivery.method",Br="vanguard.checkout.delivery.type",qr="vanguard.checkout.delivery.type.TooltipTitle",Yr="vanguard.checkout.delivery.shippingDate",Hr="vanguard.checkout.delivery.recipient",Gr="vanguard.checkout.deliverymethod.success",Wr="vanguard.checkout.deliverymethod.error",Qr="vanguard.checkout.preferreddeliverydate.success",Jr="vanguard.checkout.preferreddeliverydate.error",Kr="vanguard.checkout.customerOrderNumber",Zr="vanguard.checkout.customerCommissionNumber",Xr="vanguard.checkout.total.price",es="vanguard.checkout.total.discount",ts="vanguard.checkout.total.expressCost",rs="vanguard.checkout.total.general",ss="vanguard.checkout.calculatePriceAndDelivery",ns="vanguard.checkout.placeOrder",as="vanguard.checkout.payment.tile",is="vanguard.checkout.payment.method",os="vanguard.checkout.payment.termsOfPayment",ls="vanguard.checkout.paymentterm.default",cs="vanguard.checkout.payment.billing",us="vanguard.checkout.mandatoryFiled.error",ds=function(t){var r=t.additionalAddresses,n=void 0===r?[]:r,a=tt(),i=a.cartCode,o=a.t,l=e.store.hooks.useNotifications().notify,u=e.store.api.checkout.useGetAdditionalAddressTypesQuery({orderCode:i}).data,d=e.store.api.checkout.useAddAdditionalAddressMutation()[0],p=e.store.api.checkout.useDeleteAdditionalAddressMutation()[0],f=function(){var e=st(ot.mark((function e(t,r){var s,n,a,c,u,p;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.companyName,n=r.line1,a=r.line2,c=r.postalCode,u=r.country,p=r.town,e.prev=1,e.next=4,d({cartCode:i,additionalAddressTypeCode:t,companyName:s,line1:n,line2:a,postalCode:c,country:u,town:p,isoCode:u.isocode});case 4:l("success",o($r),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("error",o(Ir),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=st(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({cartCode:i,id:t});case 3:l("success",o(Lr),"checkout.addressDeleteSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("error",o(zr),"checkout.addressDeleteError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"additionalAddresses",children:[c.exports.jsx(s.Text,{size:"lg",bold:!0,testid:"header",children:o(Mr)}),c.exports.jsx("div",{className:"flex flex-wrap md:pl-6","data-testid":"additionalAddresses",children:null==u?void 0:u.map((function(e){return c.exports.jsxs("div",{className:"pt-4 pr-16","data-testid":"address-"+e.code,children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:e.name}),c.exports.jsx(ur,{showOneTimeAddress:!0,address:n.find((function(t){return t.additionalAddressTypeCode===e.code})),onAdd:function(t){return f(e.code,t)},onChange:function(t){return f(e.code,t)},onRemove:function(e){return h(e.id)}})]},e.code)}))})]})},ps=function(e){var t=e.deliveryMethods;return c.exports.jsx("div",{className:"space-y-1",children:null==t?void 0:t.map((function(e,t){var r=e.name,n=e.description;return c.exports.jsxs("div",{children:[c.exports.jsx(s.Text,{type:"span",size:"sm",bold:!0,testid:"name",children:r+": "}),c.exports.jsx(s.Text,{type:"span",size:"sm",testid:"description",children:n})]},t)}))})},fs=function(e){var t=xr(),r=t.day();return 5===r&&e?t=t.add(3,"day"):6===r?t=t.add(2,"day"):(0===r||e)&&(t=t.add(1,"day")),t.toDate()},hs=function(r){var n=r.deliveryAddressesError,a=t.useRef(),i=function(){var r,s,n=tt(),a=n.t,i=n.cartCode,o=n.endOfDeliveryDay,l=n.oneTimeAddressMandatory,c=t.useState(""),u=c[0],d=c[1],p=t.useState(null),f=p[0],h=p[1],x=t.useState(null),m=x[0],v=x[1],y=e.store.hooks.useNotifications().notify,g=e.store.api.checkout.useGetCheckoutQuery({cartCode:i}).data,b=e.store.api.checkout.useGetAddressesQuery({cartCode:i}).data,j=e.store.api.checkout.useGetDeliveryMethodQuery({cartCode:i}).data,w=e.store.api.checkout.useGetDeliveryTypeQuery({cartCode:i}).data,k=e.store.api.checkout.useGetB2BUnitQuery(null,{skip:l}).data,T=e.store.api.checkout.useSetOneTimeAddressMutation()[0],S=e.store.api.checkout.useSetDeliveryAddressMutation()[0],N=e.store.api.checkout.useSetDeliveryMethodMutation()[0],C=t.useCallback(function(){var e=st(ot.mark((function e(t,r){var s;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r?fs(o):null,e.prev=1,e.next=4,N({cartCode:i,code:t,preferredDeliveryDate:s}).unwrap();case 4:y("success",a(Gr),"checkout.deliveryMethodSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y("error",a(Wr),"checkout.deliveryMethodError");case 10:v(s);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,N,i,y,a]),O=t.useCallback(function(){var e=st(ot.mark((function e(t){var r;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({cartCode:i,code:null==g||null==(r=g.deliveryMode)?void 0:r.code,preferredDeliveryDate:t}).unwrap();case 3:y("success",a(Qr),"checkout.preferredDeliveryDateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y("error",a(Jr),"checkout.preferredDeliveryDateError");case 9:v(t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[N,i,null==g||null==(r=g.deliveryMode)?void 0:r.code,y,a]),A=t.useCallback(function(){var e=st(ot.mark((function e(t){var r,s,n,o,l,c;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.companyName,s=t.line1,n=t.line2,o=t.postalCode,l=t.country,c=t.town,e.prev=1,e.next=4,T({cartCode:i,companyName:r,line1:s,line2:n,postalCode:o,country:l,town:c,isoCode:l.isocode}).unwrap();case 4:y("success",a($r),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y("error",a(Ir),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[T,i,y,a]),_=t.useCallback(function(){var e=st(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({cartCode:i,addressId:t.id}).unwrap();case 3:y("success",a($r),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y("error",a(Ir),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[S,i,y,a]),D=t.useMemo((function(){var e=[].concat(b||[],(null==k?void 0:k.addresses)||[]).filter((function(e){return null==e?void 0:e.shippingAddress})),t=e.map((function(e){return e.id}));return e.filter((function(e,r){return!t.includes(e.id,r+1)}))}),[null==k?void 0:k.addresses,b]),P=t.useMemo((function(){var e,t;return{selectedMethod:null!=(e=null==g||null==(t=g.deliveryMode)?void 0:t.code)?e:"",selectedType:u,address:null==g?void 0:g.deliveryAddress,deliveryMethods:j||[],deliveryTypes:(null==w?void 0:w.deliveryTypes)||[],deliveryAddresses:D,deliveryDate:m,setSelectedType:d,handleDeliveryMethodUpdate:C,setDeliveryDate:O,handleAddressUpdate:_,handleOneTimeAddressUpdate:A}}),[null==g||null==(s=g.deliveryMode)?void 0:s.code,null==g?void 0:g.deliveryAddress,u,j,null==w?void 0:w.deliveryTypes,D,m,C,O,_,A]);return t.useEffect((function(){var e;!u&&null!=w&&null!=(e=w.deliveryTypes)&&e.length&&d(w.deliveryTypes[0])}),[j,w,u]),t.useEffect((function(){var e=null==g?void 0:g.deliveryMode;if(e&&!f){var t="EX"===e.code||e.showPreferredDate?fs(o):null;v(t),h(!0)}}),[null==g?void 0:g.deliveryMode,o,f]),P}(),o=i.address,l=i.deliveryDate,u=i.deliveryTypes,d=i.deliveryMethods,p=i.selectedMethod,f=i.selectedType,h=i.deliveryAddresses,x=i.setDeliveryDate,m=i.setSelectedType,v=i.handleDeliveryMethodUpdate,y=i.handleAddressUpdate,g=i.handleOneTimeAddressUpdate,b=tt(),j=b.t,w=b.oneTimeAddressMandatory,k=b.language;return c.exports.jsxs("div",{ref:a,className:"shadow-md p-6 space-y-2","data-testid":"delivery",children:[c.exports.jsx(s.Text,{size:"lg",bold:!0,testid:"header",children:j(Ur)}),c.exports.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[c.exports.jsxs("div",{className:"md:w-1/2 md:pl-6 space-y-1",children:[c.exports.jsxs("div",{"data-testid":"method",children:[c.exports.jsxs("div",{className:"flex",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:j(Rr)}),c.exports.jsx(s.Tooltip,{position:"right",render:c.exports.jsx(ps,{deliveryMethods:d}),children:c.exports.jsx(s.Icon,{type:"info",className:"px-1"})})]}),c.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2 md:pr-2 lg:pr-0","data-testid":"options",children:d.map((function(e){var t=e.code,r=e.name,n=e.showPreferredDate;return c.exports.jsx(s.Radio,{label:r,checked:p===t,onChange:function(){return v(t,n)},testid:t},t)}))})]}),u.length>0&&c.exports.jsxs("div",{"data-testid":"type",children:[c.exports.jsxs("div",{className:"flex",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:j(Br)}),c.exports.jsx(s.Tooltip,{position:"right",render:j(qr),children:c.exports.jsx(s.Icon,{type:"info",className:"px-1"})})]}),c.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:u.map((function(e){return c.exports.jsx(s.Radio,{label:e,checked:f===e,onChange:function(){return m(e)},testid:e},e)}))})]}),c.exports.jsxs("div",{className:"w-full md:max-w-max","data-testid":"shippingDate",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:j(Yr)}),c.exports.jsx(s.DatePicker,{minDate:new Date,selected:l,onChange:x,locale:k.split("_")[0],dateFormat:"dd.MM.yyyy"})]})]}),c.exports.jsxs("div",{className:"w-1/2","data-testid":"recipient",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:j(Hr)+(w?"*":"")}),c.exports.jsx(ur,{address:o,available:h,onAdd:g,onChange:y,showOneTimeAddress:!0}),w&&n&&c.exports.jsx(s.Text,{testid:"error",color:"secondary",size:"sm",children:j(us)})]})]})]})},xs=function(e){var t=e.consents,r=e.setChecked,n=e.checked,a=e.errors,i=tt().t;return c.exports.jsx("div",{"data-testid":"consents",children:null==t?void 0:t.map((function(e,t){var o,l;return c.exports.jsx("div",{className:"flex items-center space-x-2","data-testid":"consent",children:c.exports.jsx("div",{className:"m-2",children:c.exports.jsx(s.Checkbox,{checked:n[t],onChange:function(){var e=[].concat(n);e[t]=!e[t],r(e)},error:a.includes("consents_"+t),hint:a.includes("consents_"+t)&&i(us),label:c.exports.jsx(c.exports.Fragment,{children:null==e||null==(o=e.text)||null==(l=o.split("{}"))?void 0:l.map((function(t,r){return c.exports.jsxs(s.Text,{type:"span",size:"sm",children:[t+" ",e.links[r]&&c.exports.jsx(s.Link,{target:"_blank",href:e.links[r].url,size:"sm",children:e.links[r].text})]},t+r)}))})})})},e.text)}))})},ms=function(e){var t=e.price,r=e.discount,n=tt(),a=n.t,i=n.showAdditionalInformation,o=n.showExpressCostDescription;return c.exports.jsxs("div",{className:"space-y-1 lg:w-2/6",children:[t&&c.exports.jsxs(s.Text,{bold:!0,size:"lg",color:"primary",align:"right",testid:"priceTotal",children:[a(Xr)+" ",c.exports.jsx(s.Price,{price:t})]}),r&&c.exports.jsxs(s.Text,{color:"green",align:"right",testid:"totalDiscount",children:[a(es)+" ",c.exports.jsx(s.Price,{price:r})]}),o&&c.exports.jsx(s.Text,{size:"sm",align:"right",testid:"expressCost",children:a(ts)}),i&&c.exports.jsx(s.Text,{size:"sm",align:"right",testid:"additionalInformation",children:a(rs)})]})},vs=function(r){var n=r.selectedPaymentMethod,a=r.setDeliveryError,i=tt(),o=i.t,l=i.cartCode,u=i.showCalculateDelivery,d=i.oneTimeAddressMandatory,p=e.store.hooks.useNotifications().notify,f=tt().showPrice,h=e.store.api.checkout.useGetConsentsQuery({cartCode:l}).data,x=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data,m=e.store.api.cart.useSimulateCartMutation()[0],v=e.store.api.checkout.usePlaceOrderMutation()[0],y=t.useState(Array(null==h?void 0:h.consents.length).fill(!1)||[]),g=y[0],b=y[1],j=t.useState(""),w=j[0],k=j[1],T=t.useState(""),S=T[0],N=T[1],O=t.useState([]),A=O[0],_=O[1],D=function(){var e=st(ot.mark((function e(){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({cartCode:l,forceSync:!0}).unwrap();case 3:p("success",o(Dr),"checkout.calculatePriceSuccess"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),p("error",o(Pr),"checkout.calculatePriceError"),console.error("Simulation cart failed.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=[];return g.some((function(e){return!1===e}))&&g.map((function(t,r){!1===t&&e.push("consents_"+r)})),w||e.push("orderNumber"),null!=x&&x.deliveryAddress||!d?a(!1):(e.push("deliveryAddress"),a(!0)),_(e),0===e.length},M=function(){var e=st(ot.mark((function e(){var t,r;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,v({cartCode:l,customerReferenceId:w,paymentModeCode:n,checkoutCommission:S}).unwrap();case 6:t=e.sent,r=t.code,window.location.href=C("/checkout/orderConfirmation/"+r,"redirect"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),p("error",o(Vr),"checkout.placeOrderError"),console.error("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return c.exports.jsxs("div",{className:"space-y-6","data-testid":"order",children:[c.exports.jsx("div",{className:"shadow-md space-between p-6",children:c.exports.jsxs("div",{className:"flex flex-col space-y-6 mb-2 md:space-y-0 md:justify-between md:flex-row",children:[c.exports.jsxs("div",{className:"lg:w-3/6 space-y-3",children:[c.exports.jsxs("div",{className:"flex flex-col md:space-x-3 md:flex-row",children:[c.exports.jsx(s.TextInput,{label:o(Kr)+"*",inputClassName:"w-full",value:w,onChange:function(e){return k(e.target.value)},maxlength:35,testid:"orderNumberInput",error:A.includes("orderNumber"),hint:A.includes("orderNumber")&&o(us)}),c.exports.jsx(s.TextInput,{label:o(Zr),inputClassName:"w-full",value:S,onChange:function(e){return N(e.target.value)},maxlength:35,testid:"commissionNumber"})]}),c.exports.jsx(xs,{checked:g,setChecked:b,consents:null==h?void 0:h.consents,errors:A})]}),f&&c.exports.jsx(ms,{price:null==x?void 0:x.simulatedTotalPrice,discount:null==x?void 0:x.simulatedDiscount})]})}),c.exports.jsxs("div",{className:"flex flex-col space-y-2 md:justify-end md:space-y-0 md:space-x-2 md:flex-row",children:[u&&f&&c.exports.jsx(s.Button,{onClick:D,testid:"calculatePriceAndDeliveryButton",isDisabled:null==x?void 0:x.simulated,variant:"outlined",iconType:"simulateprice",children:o(ss)}),c.exports.jsx(s.Button,{testid:"orderButton",onClick:M,iconType:"arrow",children:o(ns)})]})]})},ys=function(t){var r,n,a,i=t.selectedPaymentMethod,o=t.setSelectedPaymentMethod,l=t.billingAddress,u=tt(),d=u.t,p=u.showBillingAddress,f=u.showPaymentMethod,h=u.cartCode,x=e.store.hooks.useNotifications().notify,m=e.store.api.checkout.useGetB2BUnitQuery(null).data,v=e.store.api.checkout.useGetBillingAddressesQuery({cartCode:h}).data,y=e.store.api.checkout.useSetBillingAddressMutation()[0],g=function(){var e=st(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({cartCode:h,id:t.id}).unwrap();case 3:x("success",d($r),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x("error",d($r),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"payment",children:[c.exports.jsx(s.Text,{size:"lg",bold:!0,testid:"title",children:d(as)}),c.exports.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[c.exports.jsxs("div",{className:"md:w-1/2 md:pl-6",children:[(null==m||null==(r=m.defaultPaymentMethods)?void 0:r.length)>0&&f&&c.exports.jsxs("div",{className:"mb-2 space-y-1","data-testid":"method",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:d(is)}),c.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:null==m?void 0:m.defaultPaymentMethods.map((function(e){var t=e.code,r=e.description;return c.exports.jsx(s.Radio,{checked:i===t,label:r,onChange:function(){return o(t)},testid:t},t)}))})]}),c.exports.jsxs("div",{"data-testid":"terms",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:d(os)}),c.exports.jsx(s.Text,{color:null!=m&&m.defaultPaymentTerm?"green":null,testid:"description",children:null!=(n=null==m||null==(a=m.defaultPaymentTerm)?void 0:a.description)?n:d(ls)})]})]}),c.exports.jsx("div",{className:"w-1/2",children:p&&c.exports.jsxs("div",{"data-testid":"billing",children:[c.exports.jsx(s.Text,{bold:!0,testid:"label",children:d(cs)}),c.exports.jsx(ur,{address:l,available:v||[],onChange:g})]})})]})]})},gs=function(){var r=e.store.hooks.useNotifications().notify,n=tt(),a=n.t,i=n.showAdditionalAddressTile,o=n.showPaymentTile,l=n.cartCode,u=t.useState(null),d=u[0],p=u[1],f=t.useState(null),h=f[0],x=f[1],m=e.store.api.checkout.useGetB2BUnitQuery(null).data,v=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data;return t.useEffect((function(){var e;(null==m||null==(e=m.defaultPaymentMethods)?void 0:e.length)>0&&p(m.defaultPaymentMethods[0].code)}),[m]),t.useEffect((function(){r("warning",a(Er),"checkout.deliveryDateWarning")}),[r,a]),c.exports.jsxs("div",{className:"space-y-6","data-testid":"checkout",children:[c.exports.jsx(s.Text,{type:"h3",size:"xl",color:"primary",testid:"header",children:a(Fr)}),o&&c.exports.jsx(ys,{selectedPaymentMethod:d,setSelectedPaymentMethod:p,billingAddress:null==v?void 0:v.billingAddress}),c.exports.jsx(hs,{deliveryAddressesError:h}),i&&c.exports.jsx(ds,{additionalAddresses:null==v?void 0:v.additionalAddresses}),(null==v?void 0:v.groupedEntries)&&c.exports.jsx(Or,{groupedEntries:null==v?void 0:v.groupedEntries}),c.exports.jsx(vs,{selectedPaymentMethod:d,setDeliveryError:x}),c.exports.jsx(_r,{})]})};!function(t,s){var n='[data-react-app="'+s+'"]',a=document.querySelector(n);if(!a)throw new Error(n+" is missing");var i=document.createElement("div");a.appendChild(i),r.render(function(t,r){return c.exports.jsx(e.StoreProvider,{children:c.exports.jsx(k,{appId:r,children:c.exports.jsx(S,{children:c.exports.jsx(t,{})})})})}(t,s),i)}((function(){return c.exports.jsx(gs,{})}),"checkout")}));
