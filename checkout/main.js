!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@Apps/backbone"),require("react"),require("react-dom"),require("@dormakaba/vanguard"),require("classnames")):"function"==typeof define&&define.amd?define(["@Apps/backbone","react","react-dom","@dormakaba/vanguard","classnames"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).backbone,e.dormakaba.vendorReact["vendor/react"],e.dormakaba.vendorReact["vendor/react-dom"],e.DormakabaVanguard,e.dormakaba.vendorReact["vendor/classnames"])}(this,(function(e,t,r,n,s){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=a(t),i=a(s),l=function(e,t){return void 0===t&&(t=[]),e.replaceAll("{}",function(e){var t=0;return function(r){return""+e[t++]||r}}(t))},d=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{exports:{}}),c={},u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function h(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==n.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(e){s[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}})()&&Object.assign;var m=o.default,x=60103;if(c.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var v=Symbol.for;x=v("react.element"),c.Fragment=v("react.fragment")}var y=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var n,s={},a=null,o=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)g.call(t,n)&&!b.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:x,type:e,key:a,ref:o,props:s,_owner:y.current}}c.jsx=j,c.jsxs=j;d.exports=c;var w=t.createContext(null),k=function(e){var r=e.appId,n=e.children,s=e.defaultValue,a=void 0===s?{}:s,o=t.useMemo((function(){if(!r)return a;var e='[data-react-app="'+r+'"]',t=document.querySelector(e);if(!t)throw new Error(e+" is missing");var n=t.querySelector("script");return null!=n&&n.innerHTML?JSON.parse(n.innerHTML):a}),[r,a]);return d.exports.jsx(w.Provider,{value:o,children:n})},C=t.createContext(null),T=function(e){var r=e.children,n=t.useState(new URL(location.href));return d.exports.jsx(C.Provider,{value:n,children:r})};var S=function(e){return"/"+(null==(t=window.location.pathname.split("/").filter((function(e){return e})))?void 0:t[0])+"/"+(null==t?void 0:t[1])+e;var t},A=function(e,t){void 0===e&&(e=""),void 0===t&&(t="occ");var r="";switch(t){case"occ":r=function(e){var t="rootB2BUnit",r=new URL(e,"http://updateQueryParams");return r.searchParams.has(t)&&r.searchParams.delete(t),r.searchParams.append(t,"{rootB2BUnit}"),decodeURI(""+r.pathname+r.search)}(function(e){return"/dormakabacommercewebservices/v2"+e}(e));break;case"redirect":r=S(e)}return r};function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=e=>"checkbox"===e.type,D=e=>e instanceof Date,O=e=>null==e;const P=e=>"object"==typeof e;var M=e=>!O(e)&&!Array.isArray(e)&&P(e)&&!D(e),E=e=>M(e)&&e.target?_(e.target)?e.target.checked:e.target.value:e,V=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),F=e=>Array.isArray(e)?e.filter(Boolean):[],I=e=>void 0===e,$=(e,t,r)=>{if(!t||!M(e))return r;const n=F(t.split(/[,[\].]+?/)).reduce(((e,t)=>O(e)?e:e[t]),e);return I(n)||n===e?I(e[t])?r:e[t]:n};const L="blur",z="focusout",B="change",U="onBlur",R="onChange",q="onSubmit",Y="onTouched",G="all",H="max",W="min",Q="maxLength",J="minLength",K="pattern",Z="required",X="validate",ee=o.default.createContext(null),te=()=>o.default.useContext(ee);var re=(e,t,r,n=!0)=>{const s={};for(const a in e)Object.defineProperty(s,a,{get:()=>{const s=a;return t[s]!==G&&(t[s]=!n||G),r&&(r[s]=!0),e[s]}});return s},ne=e=>M(e)&&!Object.keys(e).length,se=(e,t,r)=>{const{name:n,...s}=e;return ne(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||G)))},ae=e=>Array.isArray(e)?e:[e],oe=(e,t,r)=>r&&t?e===t:!e||!t||e===t||ae(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function ie(e){const t=o.default.useRef(e);t.current=e,o.default.useEffect((()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>(e=>{e&&e.unsubscribe()})(r)}),[e.disabled])}var le=e=>"string"==typeof e,de=(e,t,r,n)=>{const s=Array.isArray(e);return le(e)?(n&&t.watch.add(e),$(r,e)):s?e.map((e=>(n&&t.watch.add(e),$(r,e)))):(n&&(t.watchAll=!0),r)},ce=e=>"function"==typeof e,ue=e=>{for(const t in e)if(ce(e[t]))return!0;return!1};function pe(e){const t=te(),{name:r,control:n=t.control,shouldUnregister:s}=e,a=V(n._names.array,r),i=function(e){const t=te(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:i}=e||{},l=o.default.useRef(n);l.current=n;const d=o.default.useCallback((e=>{if(oe(l.current,e.name,i)){const t=de(l.current,r._names,e.values||r._formValues);u(I(l.current)||M(t)&&!ue(t)?{...t}:Array.isArray(t)?[...t]:I(t)?s:t)}}),[r,i,s]);ie({disabled:a,subject:r._subjects.watch,callback:d});const[c,u]=o.default.useState(I(s)?r._getWatch(n):s);return o.default.useEffect((()=>{r._removeUnmounted()})),c}({control:n,name:r,defaultValue:$(n._formValues,r,$(n._defaultValues,r,e.defaultValue)),exact:!0}),l=function(e){const t=te(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[i,l]=o.default.useState(r._formState),d=o.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=o.default.useRef(s),u=o.default.useRef(!0);return c.current=s,ie({disabled:n,callback:o.default.useCallback((e=>u.current&&oe(c.current,e.name,a)&&se(e,d.current)&&l({...r._formState,...e})),[r,a]),subject:r._subjects.state}),o.default.useEffect((()=>(u.current=!0,()=>{u.current=!1})),[]),re(i,r._proxyFormState,d.current,!1)}({control:n,name:r}),d=o.default.useRef(n.register(r,{...e.rules,value:i}));return o.default.useEffect((()=>{const e=(e,t)=>{const r=$(n._fields,e);r&&(r._f.mount=t)};return e(r,!0),()=>{const t=n._options.shouldUnregister||s;(a?t&&!n._stateFlags.action:t)?n.unregister(r):e(r,!1)}}),[r,n,a,s]),{field:{name:r,value:i,onChange:o.default.useCallback((e=>{d.current.onChange({target:{value:E(e),name:r},type:B})}),[r]),onBlur:o.default.useCallback((()=>{d.current.onBlur({target:{value:$(n._formValues,r),name:r},type:L})}),[r,n]),ref:o.default.useCallback((e=>{const t=$(n._fields,r);e&&t&&e.focus&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r,n._fields])},formState:l,fieldState:Object.defineProperties({},{invalid:{get:()=>!!$(l.errors,r)},isDirty:{get:()=>!!$(l.dirtyFields,r)},isTouched:{get:()=>!!$(l.touchedFields,r)},error:{get:()=>$(l.errors,r)}})}}const fe=e=>e.render(pe(e));var he=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},me=e=>/^\w*$/.test(e),xe=e=>F(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ve(e,t,r){let n=-1;const s=me(t)?[t]:xe(t),a=s.length,o=a-1;for(;++n<a;){const t=s[n];let a=r;if(n!==o){const r=e[t];a=M(r)||Array.isArray(r)?r:isNaN(+s[n+1])?{}:[]}e[t]=a,e=e[t]}return e}const ye=(e,t,r)=>{for(const n of r||Object.keys(e)){const r=$(e,n);if(r){const{_f:e,...n}=r;if(e&&t(e.name)){if(e.ref.focus&&I(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else M(n)&&ye(n,t)}}};var ge=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),be="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function je(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(be&&(e instanceof Blob||e instanceof FileList)||!r&&!M(e))return e;t=r?[]:{};for(const r in e){if(ce(e[r])){t=e;break}t[r]=je(e[r])}}return t}function we(e,t){const r=me(t)?[t]:xe(t),n=1==r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=I(e)?n++:e[t[n++]];return e}(e,r),s=r[r.length-1];let a;n&&delete n[s];for(let t=0;t<r.slice(0,-1).length;t++){let n,s=-1;const o=r.slice(0,-(t+1)),i=o.length-1;for(t>0&&(a=e);++s<o.length;){const t=o[s];n=n?n[t]:e[t],i===s&&(M(n)&&ne(n)||Array.isArray(n)&&!n.filter((e=>!I(e))).length)&&(a?delete a[t]:delete e[t]),a=n}}return e}function ke(){let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Ce=e=>O(e)||!P(e);function Te(e,t){if(Ce(e)||Ce(t))return e===t;if(D(e)&&D(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(D(r)&&D(e)||M(r)&&M(e)||Array.isArray(r)&&Array.isArray(e)?!Te(r,e):r!==e)return!1}}return!0}var Se=e=>({isOnSubmit:!e||e===q,isOnBlur:e===U,isOnChange:e===R,isOnAll:e===G,isOnTouch:e===Y}),Ae=e=>"boolean"==typeof e,Ne=e=>"file"===e.type,_e=e=>{const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},De=e=>"select-multiple"===e.type,Oe=e=>"radio"===e.type,Pe=e=>_e(e)&&e.isConnected;function Me(e,t={}){const r=Array.isArray(e);if(M(e)||r)for(const r in e)Array.isArray(e[r])||M(e[r])&&!ue(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Me(e[r],t[r])):O(e[r])||(t[r]=!0);return t}function Ee(e,t,r){const n=Array.isArray(e);if(M(e)||n)for(const n in e)Array.isArray(e[n])||M(e[n])&&!ue(e[n])?I(t)||Ce(r[n])?r[n]=Array.isArray(e[n])?Me(e[n],[]):{...Me(e[n])}:Ee(e[n],O(t)?{}:t[n],r[n]):r[n]=!Te(e[n],t[n]);return r}var Ve=(e,t)=>Ee(e,t,Me(t));const Fe={value:!1,isValid:!1},Ie={value:!0,isValid:!0};var $e=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!I(e[0].attributes.value)?I(e[0].value)||""===e[0].value?Ie:{value:e[0].value,isValid:!0}:Ie:Fe}return Fe},Le=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>I(e)?e:t?""===e||O(e)?NaN:+e:r&&le(e)?new Date(e):n?n(e):e;const ze={isValid:!1,value:null};var Be=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),ze):ze;function Ue(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Ne(t)?t.files:Oe(t)?Be(e.refs).value:De(t)?[...t.selectedOptions].map((({value:e})=>e)):_(t)?$e(e.refs).value:Le(I(t.value)?e.ref.value:t.value,e)}var Re=e=>e instanceof RegExp,qe=e=>I(e)?void 0:Re(e)?e.source:M(e)?Re(e.value)?e.value.source:e.value:e;function Ye(e,t,r){const n=$(e,r);if(n||me(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),a=$(t,n),o=$(e,n);if(a&&!Array.isArray(a)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};s.pop()}return{name:r}}var Ge=e=>le(e)||o.default.isValidElement(e);function He(e,t,r="validate"){if(Ge(e)||Array.isArray(e)&&e.every(Ge)||Ae(e)&&!e)return{type:r,message:Ge(e)?e:"",ref:t}}var We=e=>M(e)&&!Re(e)?e:{value:e,message:""},Qe=async(e,t,r,n)=>{const{ref:s,refs:a,required:o,maxLength:i,minLength:l,min:d,max:c,pattern:u,validate:p,name:f,valueAsNumber:h,mount:m,disabled:x}=e._f;if(!m||x)return{};const v=a?a[0]:s,y=e=>{n&&v.reportValidity&&(v.setCustomValidity(Ae(e)?"":e||" "),v.reportValidity())},g={},b=Oe(s),j=_(s),w=b||j,k=(h||Ne(s))&&!s.value||""===t||Array.isArray(t)&&!t.length,C=he.bind(null,f,r,g),T=(e,t,r,n=Q,a=J)=>{const o=e?t:r;g[f]={type:e?n:a,message:o,ref:s,...C(e?n:a,o)}};if(o&&(!w&&(k||O(t))||Ae(t)&&!t||j&&!$e(a).isValid||b&&!Be(a).isValid)){const{value:e,message:t}=Ge(o)?{value:!!o,message:o}:We(o);if(e&&(g[f]={type:Z,message:t,ref:v,...C(Z,t)},!r))return y(t),g}if(!(k||O(d)&&O(c))){let e,n;const a=We(c),o=We(d);if(O(t)||isNaN(t)){const r=s.valueAsDate||new Date(t);le(a.value)&&(e=r>new Date(a.value)),le(o.value)&&(n=r<new Date(o.value))}else{const r=s.valueAsNumber||+t;O(a.value)||(e=r>a.value),O(o.value)||(n=r<o.value)}if((e||n)&&(T(!!e,a.message,o.message,H,W),!r))return y(g[f].message),g}if((i||l)&&!k&&le(t)){const e=We(i),n=We(l),s=!O(e.value)&&t.length>e.value,a=!O(n.value)&&t.length<n.value;if((s||a)&&(T(s,e.message,n.message),!r))return y(g[f].message),g}if(u&&!k&&le(t)){const{value:e,message:n}=We(u);if(Re(e)&&!t.match(e)&&(g[f]={type:K,message:n,ref:s,...C(K,n)},!r))return y(n),g}if(p)if(ce(p)){const e=He(await p(t),v);if(e&&(g[f]={...e,...C(X,e.message)},!r))return y(e.message),g}else if(M(p)){let e={};for(const n in p){if(!ne(e)&&!r)break;const s=He(await p[n](t),v,n);s&&(e={...s,...C(n,s.message)},y(s.message),r&&(g[f]=e))}if(!ne(e)&&(g[f]={ref:v,...e},!r))return g}return y(!0),g};const Je={mode:q,reValidateMode:R,shouldFocusError:!0};function Ke(e={}){let t,r={...Je,...e},n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},s={},a=je(r.defaultValues)||{},o=r.shouldUnregister?{}:je(a),i={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,c={};const u={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={watch:ke(),array:ke(),state:ke()},f=Se(r.mode),h=Se(r.reValidateMode),m=r.criteriaMode===G,x=async e=>{let t=!1;return u.isValid&&(t=r.resolver?ne((await b()).errors):await j(s,!0),e||t===n.isValid||(n.isValid=t,p.state.next({isValid:t}))),t},v=(e,t,r,n)=>{const l=$(s,e);if(l){const s=$(o,e,I(r)?$(a,e):r);I(s)||n&&n.defaultChecked||t?ve(o,e,t?s:Ue(l._f)):C(e,s),i.mount&&x()}},y=(e,t,r,s,o)=>{let i=!1;const l={name:e},d=$(n.touchedFields,e);if(u.isDirty){const e=n.isDirty;n.isDirty=l.isDirty=w(),i=e!==l.isDirty}if(u.dirtyFields&&(!r||s)){const r=$(n.dirtyFields,e);Te($(a,e),t)?we(n.dirtyFields,e):ve(n.dirtyFields,e,!0),l.dirtyFields=n.dirtyFields,i=i||r!==$(n.dirtyFields,e)}return r&&!d&&(ve(n.touchedFields,e,r),l.touchedFields=n.touchedFields,i=i||u.touchedFields&&d!==r),i&&o&&p.state.next(l),i?l:{}},g=async(r,s,a,o)=>{const i=$(n.errors,r),l=u.isValid&&n.isValid!==s;var f;if(e.delayError&&a?(f=()=>((e,t)=>{ve(n.errors,e,t),p.state.next({errors:n.errors})})(r,a),t=e=>{clearTimeout(d),d=window.setTimeout(f,e)},t(e.delayError)):(clearTimeout(d),t=null,a?ve(n.errors,r,a):we(n.errors,r)),(a?!Te(i,a):i)||!ne(o)||l){const e={...o,...l?{isValid:s}:{},errors:n.errors,name:r};n={...n,...e},p.state.next(e)}c[r]--,u.isValidating&&!Object.values(c).some((e=>e))&&(p.state.next({isValidating:!1}),c={})},b=async e=>r.resolver?await r.resolver({...o},r.context,((e,t,r,n)=>{const s={};for(const r of e){const e=$(t,r);e&&ve(s,r,e._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||l.mount,s,r.criteriaMode,r.shouldUseNativeValidation)):{},j=async(e,t,s={valid:!0})=>{for(const a in e){const i=e[a];if(i){const{_f:e,...a}=i;if(e){const a=await Qe(i,$(o,e.name),m,r.shouldUseNativeValidation);if(a[e.name]&&(s.valid=!1,t))break;t||(a[e.name]?ve(n.errors,e.name,a[e.name]):we(n.errors,e.name))}a&&await j(a,t,s)}}return s.valid},w=(e,t)=>(e&&t&&ve(o,e,t),!Te(P(),a)),k=(e,t,r)=>{const n={...i.mount?o:I(t)?a:le(e)?{[e]:t}:t};return de(e,l,n,r)},C=(e,t,r={})=>{const n=$(s,e);let a=t;if(n){const r=n._f;r&&(!r.disabled&&ve(o,e,Le(t,r)),a=be&&_e(r.ref)&&O(t)?"":t,De(r.ref)?[...r.ref.options].forEach((e=>e.selected=a.includes(e.value))):r.refs?_(r.ref)?r.refs.length>1?r.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(a)?!!a.find((t=>t===e.value)):a===e.value))):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach((e=>e.checked=e.value===a)):Ne(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||p.watch.next({name:e})))}(r.shouldDirty||r.shouldTouch)&&y(e,a,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&N(e)},T=(e,t,r)=>{for(const n in t){const a=t[n],o=`${e}.${n}`,i=$(s,o);!l.array.has(e)&&Ce(a)&&(!i||i._f)||D(a)?C(o,a,r):T(o,a,r)}},S=(e,t,r={})=>{const i=$(s,e),d=l.array.has(e),c=je(t);ve(o,e,c),d?(p.array.next({name:e,values:o}),(u.isDirty||u.dirtyFields)&&r.shouldDirty&&(n.dirtyFields=Ve(a,o),p.state.next({name:e,dirtyFields:n.dirtyFields,isDirty:w(e,c)}))):!i||i._f||O(c)?C(e,c,r):T(e,c,r),ge(e,l)&&p.state.next({}),p.watch.next({name:e})},A=async e=>{const a=e.target;let i=a.name;const d=$(s,i);if(d){let v,j;const w=a.type?Ue(d._f):E(e),k=e.type===L||e.type===z,C=!((u=d._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||r.resolver||$(n.errors,i)||d._f.deps)||((e,t,r,n,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:!(r?n.isOnChange:s.isOnChange)||e))(k,$(n.touchedFields,i),n.isSubmitted,h,f),T=ge(i,l,k);ve(o,i,w),k?(d._f.onBlur&&d._f.onBlur(e),t&&t(0)):d._f.onChange&&d._f.onChange(e);const S=y(i,w,k,!1),A=!ne(S)||T;if(!k&&p.watch.next({name:i,type:e.type}),C)return A&&p.state.next({name:i,...T?{}:S});if(!k&&T&&p.state.next({}),c[i]=(c[i],1),p.state.next({isValidating:!0}),r.resolver){const{errors:e}=await b([i]),t=Ye(n.errors,s,i),r=Ye(e,s,t.name||i);v=r.error,i=r.name,j=ne(e)}else v=(await Qe(d,$(o,i),m,r.shouldUseNativeValidation))[i],j=await x(!0);d._f.deps&&N(d._f.deps),g(i,j,v,S)}var u},N=async(e,t={})=>{let a,o;const i=ae(e);if(p.state.next({isValidating:!0}),r.resolver){const t=await(async e=>{const{errors:t}=await b();if(e)for(const r of e){const e=$(t,r);e?ve(n.errors,r,e):we(n.errors,r)}else n.errors=t;return t})(I(e)?e:i);a=ne(t),o=e?!i.some((e=>$(t,e))):a}else e?(o=(await Promise.all(i.map((async e=>{const t=$(s,e);return await j(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||n.isValid)&&x()):o=a=await j(s);return p.state.next({...!le(e)||u.isValid&&a!==n.isValid?{}:{name:e},...r.resolver?{isValid:a}:{},errors:n.errors,isValidating:!1}),t.shouldFocus&&!o&&ye(s,(e=>$(n.errors,e)),e?i:l.mount),o},P=e=>{const t={...a,...i.mount?o:{}};return I(e)?t:le(e)?$(t,e):e.map((e=>$(t,e)))},M=(e,t)=>({invalid:!!$((t||n).errors,e),isDirty:!!$((t||n).dirtyFields,e),isTouched:!!$((t||n).touchedFields,e),error:$((t||n).errors,e)}),B=(e,t={})=>{for(const i of e?ae(e):l.mount)l.mount.delete(i),l.array.delete(i),$(s,i)&&(t.keepValue||(we(s,i),we(o,i)),!t.keepError&&we(n.errors,i),!t.keepDirty&&we(n.dirtyFields,i),!t.keepTouched&&we(n.touchedFields,i),!r.shouldUnregister&&!t.keepDefaultValue&&we(a,i));p.watch.next({}),p.state.next({...n,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&x()},U=(e,t={})=>{let n=$(s,e);const d=Ae(t.disabled);return ve(s,e,{_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n?d&&ve(o,e,t.disabled?void 0:$(o,e,Ue(n._f))):v(e,!0,t.value),{...d?{disabled:t.disabled}:{},...r.shouldUseNativeValidation?{required:!!t.required,min:qe(t.min),max:qe(t.max),minLength:qe(t.minLength),maxLength:qe(t.maxLength),pattern:qe(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:o=>{if(o){U(e,t),n=$(s,e);const r=I(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,i=(e=>Oe(e)||_(e))(r),l=n._f.refs||[];if(i?l.find((e=>e===r)):r===n._f.ref)return;ve(s,e,{_f:{...n._f,...i?{refs:[...l.filter(Pe),r,...Array.isArray($(a,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),v(e,!1,void 0,r)}else n=$(s,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!V(l.array,e)||!i.action)&&l.unMount.add(e)}}};return{control:{register:U,unregister:B,getFieldState:M,_executeSchema:b,_getWatch:k,_getDirty:w,_updateValid:x,_removeUnmounted:()=>{for(const e of l.unMount){const t=$(s,e);t&&(t._f.refs?t._f.refs.every((e=>!Pe(e))):!Pe(t._f.ref))&&B(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],r,l,d=!0,c=!0)=>{if(l&&r){if(i.action=!0,c&&Array.isArray($(s,e))){const t=r($(s,e),l.argA,l.argB);d&&ve(s,e,t)}if(u.errors&&c&&Array.isArray($(n.errors,e))){const t=r($(n.errors,e),l.argA,l.argB);d&&ve(n.errors,e,t),((e,t)=>{!F($(e,t)).length&&we(e,t)})(n.errors,e)}if(u.touchedFields&&c&&Array.isArray($(n.touchedFields,e))){const t=r($(n.touchedFields,e),l.argA,l.argB);d&&ve(n.touchedFields,e,t)}u.dirtyFields&&(n.dirtyFields=Ve(a,o)),p.state.next({isDirty:w(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ve(o,e,t)},_getFieldArray:t=>F($(i.mount?o:a,t,e.shouldUnregister?$(a,t,[]):[])),_subjects:p,_proxyFormState:u,get _fields(){return s},get _formValues(){return o},get _stateFlags(){return i},set _stateFlags(e){i=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return n},set _formState(e){n=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:N,register:U,handleSubmit:(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let i=!0,d=je(o);p.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:e,values:t}=await b();n.errors=e,d=t}else await j(s);ne(n.errors)?(p.state.next({errors:{},isSubmitting:!0}),await e(d,a)):(t&&await t({...n.errors},a),r.shouldFocusError&&ye(s,(e=>$(n.errors,e)),l.mount))}catch(e){throw i=!1,e}finally{n.isSubmitted=!0,p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ne(n.errors)&&i,submitCount:n.submitCount+1,errors:n.errors})}},watch:(e,t)=>ce(e)?p.watch.subscribe({next:r=>e(k(void 0,t),r)}):k(e,t,!0),setValue:S,getValues:P,reset:(t,r={})=>{const d=t||a,c=je(d),f=t&&!ne(t)?c:a;if(r.keepDefaultValues||(a=d),!r.keepValues){if(r.keepDirtyValues)for(const e of l.mount)$(n.dirtyFields,e)?ve(f,e,$(o,e)):S(e,$(f,e));else{if(be&&I(t))for(const e of l.mount){const t=$(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{_e(e)&&e.closest("form").reset();break}catch(e){}}}s={}}o=e.shouldUnregister?r.keepDefaultValues?je(a):{}:c,p.array.next({values:f}),p.watch.next({values:f})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!r.keepIsValid,i.watch=!!e.shouldUnregister,p.state.next({submitCount:r.keepSubmitCount?n.submitCount:0,isDirty:r.keepDirty||r.keepDirtyValues?n.isDirty:!(!r.keepDefaultValues||Te(t,a)),isSubmitted:!!r.keepIsSubmitted&&n.isSubmitted,dirtyFields:r.keepDirty||r.keepDirtyValues?n.dirtyFields:r.keepDefaultValues&&t?Ve(a,t):{},touchedFields:r.keepTouched?n.touchedFields:{},errors:r.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{$(s,e)&&(I(t.defaultValue)?S(e,$(a,e)):(S(e,t.defaultValue),ve(a,e,t.defaultValue)),t.keepTouched||we(n.touchedFields,e),t.keepDirty||(we(n.dirtyFields,e),n.isDirty=t.defaultValue?w(e,$(a,e)):w()),t.keepError||(we(n.errors,e),u.isValid&&x()),p.state.next({...n}))},clearErrors:e=>{e?ae(e).forEach((e=>we(n.errors,e))):n.errors={},p.state.next({errors:n.errors})},unregister:B,setError:(e,t,r)=>{const a=($(s,e,{_f:{}})._f||{}).ref;ve(n.errors,e,{...t,ref:a}),p.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},setFocus:(e,t={})=>{const r=$(s,e)._f,n=r.refs?r.refs[0]:r.ref;t.shouldSelect?n.select():n.focus()},getFieldState:M}}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=function(){var e=t.useContext(w),r=t.useCallback((function(t){var r,n=null==(r=e.translations)?void 0:r[t];if(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.length?l(n,a):n}return t}),[e]);return Xe(Xe({},e),{},{t:r})};function tt(e,t,r,n,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,s)}function rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function o(e){tt(a,n,s,o,i,"next",e)}function i(e){tt(a,n,s,o,i,"throw",e)}o(void 0)}))}}var nt={exports:{}},st={exports:{}};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(st),function(e){var t=st.exports.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},s=Object.prototype,a=s.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new S(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(s,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw a;return N()}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var i=k(o,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=p(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,o),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=u;var f={};function h(){}function m(){}function x(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(A([])));g&&g!==s&&a.call(g,i)&&(v=g);var b=x.prototype=h.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,r){function n(s,o,i,l){var d=p(e[s],e,o);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==t(u)&&a.call(u,"__await")?r.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):r.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(d.arg)}var s;this._invoke=function(e,t){function a(){return new r((function(r,s){n(e,t,r,s)}))}return s=s?s.then(a,a):a()}}function k(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=x,c(b,"constructor",x),c(x,"constructor",m),m.displayName=c(x,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,d,"GeneratorFunction")),e.prototype=Object.create(b),e},n.awrap=function(e){return{__await:e}},j(w.prototype),c(w.prototype,l,(function(){return this})),n.AsyncIterator=w,n.async=function(e,t,r,s,a){void 0===a&&(a=Promise);var o=new w(u(e,t,r,s),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(b),c(b,d,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},n.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var i=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(i&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(i){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;T(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(nt);var at=nt.exports(),ot=at;try{regeneratorRuntime=at}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=at:Function("r","regeneratorRuntime = r")(at)}var it="vanguard.checkout.address.cta.change",lt="vanguard.checkout.address.cta.add",dt="vanguard.checkout.address.formTitle",ct="vanguard.checkout.address.name",ut="vanguard.checkout.address.required",pt="vanguard.checkout.address.line1",ft="vanguard.checkout.address.line2",ht="vanguard.checkout.address.zipcode",mt="vanguard.checkout.address.cityTown",xt="vanguard.checkout.address.country",vt="vanguard.checkout.address.cta.cancel",yt="vanguard.checkout.address.search",gt="vanguard.checkout.address.addNew",bt="vanguard.cart.overlay.delete",jt="vanguard.common.nameTitle",wt="vanguard.common.name.optionalNames",kt="vanguard.confirmationDialog.message",Ct="vanguard.checkout.address.cancel",Tt="vanguard.checkout.address.confirm",St="vanguard.cart.delete",At="vanguard.cart.totalPrice",Nt="vanguard.cart.product.notAvailable",_t="vanguard.cart.positionText",Dt="vanguard.cart.reduction",Ot="vanguard.cart.summary.close",Pt="vanguard.cart.summary.open",Mt="vanguard.cart.salesCommentLabel",Et="vanguard.cart.emks.new_key_system",Vt="vanguard.cart.emks.extension",Ft="vanguard.cart.emks.reorder",It="vanguard.cart.emks.new_series",$t="vanguard.checkout.item.sales.totalPrice",Lt="vanguard.checkout.item.sales.totalPrice.tooltip",zt="vanguard.checkout.item.sales.quantity",Bt="vanguard.checkout.ean",Ut="vanguard.checkout.item.sales.listPrice",Rt="vanguard.checkout.item.sales.userPrice",qt="vanguard.checkout.item.sales.discount",Yt="vanguard.checkout.entry.sales.netPricePerUnit",Gt="vanguard.checkout.committedDelivery",Ht="vanguard.cart.quantityPerSet",Wt="vanguard.cart.quantityPerItem",Qt="vanguard.cart.items",Jt="vanguard.cart.lockPosition",Kt="vanguard.cart.configurationData",Zt="vanguard.common.name.person",Xt="vanguard.common.name.company";function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rr=function(e){var r=e.form,s=e.availableCountries,a=e.titles,o=et().t,i=r.register,l=r.setValue,c=r.control,u=r.formState,p=r.watch,f=u.errors,h=p("titleCode"),m=t.useRef(null),x=i("streetName",{required:o(ut)}),v=t.useMemo((function(){return s.map((function(e){return{label:e.name,value:e.isocode}}))}),[s]);return t.useEffect((function(){var e,t,r;if("undefined"!=typeof google&&null!=(e=google)&&null!=(t=e.maps)&&null!=(r=t.places)&&r.Autocomplete){var n=new google.maps.places.Autocomplete(m.current,{fields:["address_components"]});n.setComponentRestrictions({country:v.map((function(e){return e.value.toString()}))}),n.addListener("place_changed",(function(){var e,t=((null==(e=n.getPlace())?void 0:e.address_components)||[]).reduce((function(e,t){return null!=t&&t.types.includes("street_number")&&(e.streetNumber=t.long_name),null!=t&&t.types.includes("postal_code")&&(e.zipCode=t.long_name),null!=t&&t.types.includes("route")&&(e.streetName=t.long_name),null!=t&&t.types.includes("locality")&&(e.city=t.long_name),null!=t&&t.types.includes("country")&&(e.country=t.short_name),e}),{});Object.keys(t).forEach((function(e){return l(e,t[e])}))}))}}),[l,v]),d.exports.jsxs("form",{"data-testid":"addAddress",className:"space-y-1",children:[(null==a?void 0:a.length)>0&&d.exports.jsx(fe,{control:c,name:"titleCode",render:function(e){var t=e.field;return d.exports.jsx(n.Select,{label:""+o(jt),testid:"titleInput",options:null==a?void 0:a.map((function(e){return{label:e.name,value:e.code}})),error:Boolean(null==f?void 0:f.titleCode),value:t.value,onChange:t.onChange})}}),d.exports.jsx(n.TextInput,tr(tr({},i("name1",{required:o(ut)})),{},{label:o(ct)+"*",testid:"nameInput1",autoComplete:"organization",maxlength:35,error:Boolean(null==f?void 0:f.name1),placeholder:{"0001":o(Zt),"0002":o(Zt),"0003":o(Xt),"0004":o(Zt)}[h]})),d.exports.jsxs("div",{className:"space-y-0.5",children:[d.exports.jsx(n.TextInput,tr(tr({},i("name2")),{},{testid:"nameInput2",label:o(wt),autoComplete:"organization",maxlength:35,error:Boolean(null==f?void 0:f.name2)})),d.exports.jsx(n.TextInput,tr(tr({},i("name3")),{},{testid:"nameInput3",autoComplete:"organization",maxlength:35,error:Boolean(null==f?void 0:f.name3)})),d.exports.jsx(n.TextInput,tr(tr({},i("name4")),{},{testid:"nameInput4",autoComplete:"organization",maxlength:35,error:Boolean(null==f?void 0:f.name4)}))]}),d.exports.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-1 sm:space-y-0",children:[d.exports.jsx("div",{className:"sm:w-10/12",children:d.exports.jsx(n.TextInput,tr(tr({},x),{},{ref:function(e){x.ref(e),m.current=e},testid:"streetNameInput",label:o(pt)+"*",autoComplete:"street-address",maxlength:60,error:Boolean(null==f?void 0:f.streetName),inputClassName:"w-full"}))}),d.exports.jsx("div",{className:"sm:w-2/12",children:d.exports.jsx(n.TextInput,tr(tr({},i("streetNumber",{required:o(ut)})),{},{testid:"streetNumberInput",label:o(ft)+"*",error:Boolean(null==f?void 0:f.streetNumber),maxlength:12,autoComplete:"street-address",inputClassName:"w-full"}))})]}),d.exports.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[d.exports.jsx("div",{className:"sm:w-2/12",children:d.exports.jsx(n.TextInput,tr(tr({},i("zipCode",{required:o(ut)})),{},{testid:"zipCodeInput",label:o(ht)+"*",error:Boolean(null==f?void 0:f.zipCode),maxlength:10,autoComplete:"postal-code",inputClassName:"w-full"}))}),d.exports.jsx("div",{className:"sm:w-10/12",children:d.exports.jsx(n.TextInput,tr(tr({},i("city",{required:o(ut)})),{},{testid:"cityInput",label:o(mt)+"*",error:Boolean(null==f?void 0:f.city),maxlength:40,autoComplete:"address-level2",inputClassName:"w-full"}))})]}),d.exports.jsx("div",{className:"w-12/12",children:d.exports.jsx(fe,{control:c,name:"country",rules:{required:!0},render:function(e){var t=e.field;return d.exports.jsx(n.Select,{label:o(xt)+"*",testid:"countryInput",options:v,error:Boolean(null==f?void 0:f.country),value:t.value,onChange:t.onChange})}})})]})},nr=function(e){var r=e.address,s=t.useMemo((function(){var e;return{name1:null==r?void 0:r.name1,name2:null==r?void 0:r.name2,name3:null==r?void 0:r.name3,name4:null==r?void 0:r.name4,imprint:[null==r?void 0:r.line1,null==r?void 0:r.line2].join(" "),region:[null==r?void 0:r.postalCode,null==r?void 0:r.town].join(" "),country:null==r||null==(e=r.country)?void 0:e.name,first_name:null==r?void 0:r.first_name,last_name:null==r?void 0:r.last_name,title:null==r?void 0:r.title}}),[r]);return d.exports.jsxs("div",{"data-testid":"addressPreview",children:[(null==s?void 0:s.title)&&d.exports.jsx(n.Text,{testid:"title",children:null==s?void 0:s.title}),((null==s?void 0:s.first_name)||(null==s?void 0:s.last_name))&&d.exports.jsxs(n.Text,{testid:"name",children:[null==s?void 0:s.first_name," ",null==s?void 0:s.last_name]}),(null==s?void 0:s.name1)&&d.exports.jsx(n.Text,{testid:"name1",children:null==s?void 0:s.name1}),(null==s?void 0:s.name2)&&d.exports.jsx(n.Text,{testid:"name2",children:null==s?void 0:s.name2}),(null==s?void 0:s.name3)&&d.exports.jsx(n.Text,{testid:"name3",children:null==s?void 0:s.name3}),(null==s?void 0:s.name4)&&d.exports.jsx(n.Text,{testid:"name4",children:null==s?void 0:s.name4}),(null==s?void 0:s.imprint)&&d.exports.jsx(n.Text,{testid:"imprint",children:null==s?void 0:s.imprint}),(null==s?void 0:s.region)&&d.exports.jsx(n.Text,{testid:"region",children:null==s?void 0:s.region}),(null==s?void 0:s.country)&&d.exports.jsx(n.Text,{testid:"country",children:null==s?void 0:s.country})]})},sr=t.createContext(null),ar=function(e){var r=e.children,n=e.onAdd,s=e.onChange,a=e.onRemove,o=e.available,i=void 0===o?[]:o,l=e.showOneTimeAddress,c=e.address,u=t.useState(c||null),p=u[0],f=u[1],h=t.useState(!1),m=h[0],x=h[1],v=t.useState(!1),y=v[0],g=v[1],b=t.useState([]),j=b[0],w=b[1],k=function(){var e=t.useCallback((function(e,t){var r={meta:{createdAt:Date.now()},value:t};return sessionStorage.setItem(e,JSON.stringify(r)),r}),[]),r=t.useCallback((function(e){return JSON.parse(sessionStorage.getItem(e))}),[]),n=t.useCallback((function(e){return sessionStorage.removeItem(e)}),[]);return{clear:t.useCallback((function(){return sessionStorage.clear()}),[]),setItem:e,getItem:r,removeItem:n}}(),C=k.setItem,T=k.getItem;return t.useEffect((function(){var e=T("OneTimeAddress")&&JSON.parse(T("OneTimeAddress").value);m&&w(e||[])}),[m,T]),d.exports.jsx(sr.Provider,{value:{address:c,availableAddresses:[].concat(i,l?j:[]),showOneTimeAddress:l,selectedAddress:p,setSelectedAddress:f,isAddressDialogVisible:m,setAddressDialogVisible:x,isRemoveAddressDialogVisible:y,setRemoveAddressDialogVisible:g,handleAddOneTimeAddress:function(e){f(e),n(e),C("OneTimeAddress",JSON.stringify([].concat(j,[e]))),x(!1)},handleChange:function(){p.id?s(p):n(p),x(!1)},handleRemove:function(e){a(e),g(!1)}},children:r})},or=function(){return t.useContext(sr)},ir=function(){var e=or(),r=e.availableAddresses,s=e.selectedAddress,a=e.setSelectedAddress,o=t.useState(""),l=o[0],c=o[1],u=function(e,t){return e.id&&t.id?e.id===t.id:(null==e||null==(r=e.name1)?void 0:r.trim())===(null==t||null==(n=t.name1)?void 0:n.trim())&&(null==e||null==(s=e.name2)?void 0:s.trim())===(null==t||null==(a=t.name2)?void 0:a.trim())&&(null==e||null==(o=e.name3)?void 0:o.trim())===(null==t||null==(i=t.name3)?void 0:i.trim())&&(null==e||null==(l=e.name4)?void 0:l.trim())===(null==t||null==(d=t.name4)?void 0:d.trim())&&(null==e||null==(c=e.line1)?void 0:c.trim())===(null==t||null==(u=t.line1)?void 0:u.trim())&&(null==e||null==(p=e.line2)?void 0:p.trim())===(null==t||null==(f=t.line2)?void 0:f.trim())&&(null==e||null==(h=e.town)?void 0:h.trim())===(null==t||null==(m=t.town)?void 0:m.trim())&&(null==e?void 0:e.postalCode)===(null==t?void 0:t.postalCode)&&JSON.stringify(null==e?void 0:e.country)===JSON.stringify(null==t?void 0:t.country);var r,n,s,a,o,i,l,d,c,u,p,f,h,m};return d.exports.jsxs("div",{"data-testid":"searchAddress",className:"mt-6 sm:mt-0",children:[d.exports.jsx(n.TextInput,{testid:"searchInput",inputClassName:"w-full",value:l,onChange:function(e){var t=e.target.value;c(t)},icon:{type:"search"}}),d.exports.jsx("div",{className:"h-96 overflow-y-auto mt-2 space-y-2","data-testid":"list",children:r.filter((function(e){return[e.name1,e.name2,e.name3,e.name4].join(" ").toLowerCase().includes(l.toLowerCase())})).map((function(e,t){return d.exports.jsx("div",{className:i.default("p-2","cursor-pointer","border-l-4",s&&{"hover:border-gray-300":!u(e,s),"border-primary":u(e,s)}),onClick:function(){return a(e)},"data-testid":"item",children:d.exports.jsx(nr,{address:e})},t)}))})]})},lr=function(){var r=t.useState("addNew"),s=r[0],a=r[1],i=et(),l=i.t,c=i.cartCode,u=or(),p=u.availableAddresses,f=u.showOneTimeAddress,h=u.isAddressDialogVisible,m=u.setAddressDialogVisible,x=u.handleChange,v=u.handleAddOneTimeAddress,y=e.store.api.checkout.useGetAlternativeDeliveryCountriesQuery({cartCode:c}).data,g=e.store.api.checkout.useGetTitlesQuery({cartCode:c}).data,b=function(e={}){const t=o.default.useRef(),[r,n]=o.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current={...Ke(e),formState:r};const s=t.current.control,a=o.default.useCallback((e=>{se(e,s._proxyFormState,!0)&&(s._formState={...s._formState,...e},n({...s._formState}))}),[s]);return ie({subject:s._subjects.state,callback:a}),o.default.useEffect((()=>{s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),t.current.formState=re(r,s._proxyFormState),t.current}(),j=function(e){var t={titleCode:e.titleCode||"",name1:e.name1.trim()||null,name2:e.name2.trim()||null,name3:e.name3.trim()||null,name4:e.name4.trim()||null,line1:e.streetName,line2:e.streetNumber,postalCode:e.zipCode,town:e.city,country:y.find((function(t){return t.isocode===e.country}))};b.reset(),v(t)};return t.useEffect((function(){a((null==p?void 0:p.length)>0?"search":"addNew")}),[p]),d.exports.jsxs(n.Dialog,{title:l(dt),isOpen:h,onClose:function(){return m(!1)},testid:"addressDialog",children:[(null==p?void 0:p.length)>0&&f&&d.exports.jsxs(n.Tabs,{className:"flex-col sm:flex-row",onSelectTab:function(e){return a(e)},size:"sm",children:[d.exports.jsx(n.Tabs.Tab,{testid:"searchTab",tabKey:"search",title:l(yt),selected:"search"===s}),d.exports.jsx(n.Tabs.Tab,{testid:"addNewTab",tabKey:"addNew",title:l(gt),selected:"addNew"===s})]}),"search"===s?d.exports.jsx(ir,{}):d.exports.jsx(rr,{form:b,availableCountries:y,titles:null==g?void 0:g.titles}),d.exports.jsxs("div",{className:"flex mt-6 space-x-4 justify-between sm:justify-end",children:[d.exports.jsx(n.Button,{variant:"outlined",testid:"cancelButton",onClick:function(){return m(!1),void b.reset()},children:l(Ct)}),d.exports.jsx(n.Button,{testid:"confirmButton",onClick:function(){return"search"===s?x():b.handleSubmit(j)()},children:l(Tt)})]})]})},dr=function(e){var t=e.hasRemove,r=or(),s=r.address,a=r.availableAddresses,o=r.showOneTimeAddress,i=r.setAddressDialogVisible,l=r.setRemoveAddressDialogVisible,c=et().t,u=(null==a?void 0:a.length)>1||o;return d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx(nr,{address:s}),u&&d.exports.jsxs("div",{className:"flex divide-x-2 space-x-2 mt-1",children:[d.exports.jsx(n.Button,{testid:"changeAddressButton",variant:"text",onClick:function(){return i(!0)},children:c(s?it:lt)}),s&&t&&d.exports.jsx("div",{className:"pl-2",children:d.exports.jsx(n.Button,{testid:"removeAddressButton",variant:"text",onClick:function(){return l(!0)},children:c(bt)})})]})]})},cr=function(){var e=et().t,t=or(),r=t.setRemoveAddressDialogVisible,s=t.isRemoveAddressDialogVisible,a=t.handleRemove,o=t.address;return d.exports.jsxs(n.Dialog,{title:e(St),testid:"deleteAddressDialog",isOpen:s,onClose:function(){return r(!1)},children:[d.exports.jsx(n.Text,{children:e(kt)}),d.exports.jsxs("div",{className:"flex mt-8 space-x-4 justify-end",children:[d.exports.jsx(n.Button,{testid:"cancelButton",variant:"outlined",onClick:function(){return r(!1)},children:e(vt)}),d.exports.jsx(n.Button,{testid:"confirmButton",onClick:function(){return a(o)},children:e(bt)})]})]})};function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fr=function(e){var t=Object.assign({},e);return d.exports.jsxs(ar,pr(pr({},t),{},{children:[d.exports.jsx(dr,{hasRemove:!!t.onRemove}),d.exports.jsx(lr,{}),d.exports.jsx(cr,{})]}))},hr={NEW_KEY_SYSTEM:Et,EXTENSION:Vt,REORDER:Ft,NEW_SERIES:It},mr={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",o="hour",i="day",l="week",d="month",c="quarter",u="year",p="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},y={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,d),a=r-s<0,o=t.clone().add(n+(a?-1:1),d);return+(-(n+(r-s)/(a?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:l,d:i,D:p,h:o,m:a,s:s,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=x;var j=function(e){return e instanceof T},w=function e(t,r,n){var s;if(!t)return g;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(s=a),r&&(b[a]=r,s=a);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var i=t.name;b[i]=t,s=i}return!n&&s&&(g=s),s||!n&&g},k=function(e,t){if(j(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new T(r)},C=y;C.l=w,C.i=j,C.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function x(e){this.$L=w(e.locale,null,!0),this.parse(e)}var v=x.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!C.u(t)||t,c=C.p(e),f=function(e,t){var s=C.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(i)},h=function(e,t){return C.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,x=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(c){case u:return n?f(1,0):f(31,11);case d:return n?f(1,x):f(0,x+1);case l:var g=this.$locale().weekStart||0,b=(m<g?m+7:m)-g;return f(n?v-b:v+(6-b),x);case i:case p:return h(y+"Hours",0);case o:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case s:return h(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,l=C.p(e),c="set"+(this.$u?"UTC":""),f=(r={},r[i]=c+"Date",r[p]=c+"Date",r[d]=c+"Month",r[u]=c+"FullYear",r[o]=c+"Hours",r[a]=c+"Minutes",r[s]=c+"Seconds",r[n]=c+"Milliseconds",r)[l],h=l===i?this.$D+(t-this.$W):t;if(l===d||l===u){var m=this.clone().set(p,1);m.$d[f](h),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[C.p(e)]()},v.add=function(n,c){var p,f=this;n=Number(n);var h=C.p(c),m=function(e){var t=k(f);return C.w(t.date(t.date()+Math.round(e*n)),f)};if(h===d)return this.set(d,this.$M+n);if(h===u)return this.set(u,this.$y+n);if(h===i)return m(1);if(h===l)return m(7);var x=(p={},p[a]=t,p[o]=r,p[s]=e,p)[h]||1,v=this.$d.getTime()+n*x;return C.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=C.z(this),a=this.$H,o=this.$m,i=this.$M,l=r.weekdays,d=r.months,c=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},u=function(e){return C.s(a%12||12,e,"0")},p=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:C.s(i+1,2,"0"),MMM:c(r.monthsShort,i,d,3),MMMM:c(d,i),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:C.s(a,2,"0"),h:u(1),hh:u(2),a:p(a,o,!0),A:p(a,o,!1),m:String(o),mm:C.s(o,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:s};return n.replace(m,(function(e,t){return t||h[e]||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,p,f){var h,m=C.p(p),x=k(n),v=(x.utcOffset()-this.utcOffset())*t,y=this-x,g=C.m(this,x);return g=(h={},h[u]=g/12,h[d]=g,h[c]=g/3,h[l]=(y-v)/6048e5,h[i]=(y-v)/864e5,h[o]=y/r,h[a]=y/t,h[s]=y/e,h)[m]||y,f?g:C.a(g)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},x}(),S=T.prototype;return k.prototype=S,[["$ms",n],["$s",s],["$m",a],["$H",o],["$W",i],["$M",d],["$y",u],["$D",p]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,T,k),e.$i=!0),k},k.locale=w,k.isDayjs=j,k.unix=function(e){return k(1e3*e)},k.en=b[g],k.Ls=b,k.p={},k}()}(mr);var xr,vr,yr=mr.exports,gr=function(e){var t=e.deliveryInfos,r=void 0===t?[]:t,s=et().t,a=r.filter((function(e){return e.receiptDate})).map((function(e){return e.receiptDate})).sort().map((function(e){return yr(e).format("DD.MM.YYYY")})),o=a[0],i=a[a.length-1];return d.exports.jsxs("div",{className:"w-1/2 md:w-36 lg:w-40 xl:w-48 flex-none lg:text-right","data-testid":"committedDelivery",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:s(Gt)}),d.exports.jsx("div",{className:"flex md:justify-end space-x-2","data-testid":"value",children:a.length>0?d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx(n.Icon,{type:"greenTick"}),d.exports.jsx(n.Text,{size:"sm",type:"span",children:o===i?o:o+" - "+i})]}):d.exports.jsx(n.Text,{type:"span",children:"-"})})]})},br=function(e){var t=e.value,r=et().t;return d.exports.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"positionText",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r(_t)}),d.exports.jsx(n.Text,{size:"sm",testid:"value",children:t})]})},jr=function(r){var s,a=r.configurationName,o=r.productCode,i=r.headPositionCode,l=r.itemInfoId,c=et().t,u=t.useState(!1),p=u[0],f=u[1],h=e.store.api.product.useGetConfigurationQuery({productCode:o},{skip:!p||!o}),m=h.data,x=h.isLoading,v=e.store.api.product.useGetConfigurationSummaryQuery({headPositionEntryConfigurationParameter:i&&{headPositionCode:i,itemInfoId:l},cpqConfigurationParameter:o&&{productCode:o,configId:null==m?void 0:m.configId}},{skip:!p||o&&!m}),y=v.data,g=v.isLoading,b=v.isSuccess;return d.exports.jsxs("div",{className:"space-y-1","data-testid":"configuration",children:[a&&d.exports.jsx(n.Text,{size:"sm",testid:"name",children:a}),d.exports.jsx(n.Button,{variant:"text",iconType:p?"arrowup":"arrowdown",size:"sm",onClick:function(){return f(!p)},testid:"expandButton",isLoading:g||x,children:c(p?Ot:Pt)}),b&&d.exports.jsx(n.List,{isCompressed:!0,size:"sm",testid:"details",children:null==y||null==(s=y.configurationInfos)?void 0:s.map((function(e,t){return d.exports.jsx(n.List.Item,{name:e.configurationLabel,value:e.configurationValue},t)}))})]})},wr=function(e){var t=e.imageSrc,r=e.imageAlt,s=e.productName,a=e.productCode,o=e.configName,i=e.marketSystemName,l=e.ean,c=e.badgeType,u=e.badgeText,p=e.medias,f=et().t;return d.exports.jsxs("div",{className:"flex-grow flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-2",children:[d.exports.jsx(n.Image,{src:t,alt:r,fullWidth:!1,className:"w-20 h-20"}),d.exports.jsxs("div",{className:"space-y-1",children:[d.exports.jsxs("div",{children:[d.exports.jsx(n.Text,{color:"primary",type:"span",bold:!0,testid:"name",children:s}),i&&d.exports.jsx(n.Text,{color:"primary",size:"sm",type:"span",bold:!0,testid:"masterMarketSystem",children:i})]}),d.exports.jsxs("div",{className:"flex lg:flex-col xl:flex-row space-x-2 xl:items-center",children:[u&&d.exports.jsx(n.Chip,{testid:"masterBadge",background:c,label:u}),l&&d.exports.jsx(n.Text,{size:"sm",testid:"ean",children:f(Bt)+": "+l})]}),o&&d.exports.jsx(jr,{configurationName:o,productCode:a}),p&&d.exports.jsx("div",{className:"flex flex-wrap","data-testid":"uploadedFiles",children:p.map((function(e){return d.exports.jsx(n.Chip,{label:e.realFileName,onClick:function(){return window.open(e.url,"_blank")},className:"mr-1 mt-1"},e.code)}))})]})]})},kr=function(e){var t=e.amount,r=e.unitName,s=et().t;return d.exports.jsxs("div",{className:"w-1/2 md:w-20 lg:w-28 flex-none lg:text-right","data-testid":"quantity",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:s(zt)}),d.exports.jsxs(n.Text,{size:"sm",testid:"value",children:[t," ",r]})]})},Cr=function(e){var t=e.value,r=et().t;return d.exports.jsxs("div",{className:"w-full sm:w-1/2 md:w-48 lg:w-64 flex-none lg:text-right","data-testid":"salesText",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r(Mt)}),d.exports.jsx(n.Text,{size:"sm",testid:"value",children:t})]})},Tr=function(e){var t=e.totalPrice,r=et().t;return d.exports.jsxs("div",{className:"w-1/2 md:w-28 lg:w-32 flex-none lg:text-right","data-testid":"totalPrice",children:[d.exports.jsxs("div",{className:"flex lg:justify-end",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"label",children:r($t)}),d.exports.jsx(n.Tooltip,{position:"left",render:r(Lt),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1",size:"xs"})})]}),d.exports.jsx(n.Text,{size:"sm","data-testid":"value",children:d.exports.jsx(n.Price,{price:t})})]})},Sr=function(e){var t=e.gross,r=e.net,s=e.discount,a=et().t;return d.exports.jsxs("div",{className:"w-1/2 md:w-40 lg:w-48 xl:w-64 flex-none lg:text-right","data-testid":"unitPrice",children:[d.exports.jsx(n.Text,{bold:!0,size:"sm",testid:"header",children:a(Yt)}),d.exports.jsxs(n.Text,{size:"sm",testid:"grossPrice",children:[a(Ut)+": ",d.exports.jsx(n.Price,{price:t})]}),d.exports.jsxs(n.Text,{size:"sm",testid:"netPrice",children:[a(Rt)+": ",d.exports.jsx(n.Price,{price:r})]}),!!s&&d.exports.jsxs(n.Text,{color:"green",size:"sm",testid:"discount",children:[a(qt)," ",s,"%"]})]})},Ar=function(e){var r=e.lockingPositions,s=t.useState(!1),a=s[0],o=s[1];return d.exports.jsx("div",{onClick:function(){"Range"!=window.getSelection().type&&o(!a)},className:"pr-6 space-y-3",children:d.exports.jsx(n.Text,{size:"sm",type:"span",testid:"lockingPosition",children:!a&&r.length>12?r.slice(0,12).join(", ")+" ...":r.join(", ")})})},Nr=function(e){var t=e.name,r=e.isEntryAvailable,s=e.type,a=et().t;return d.exports.jsxs("div",{className:"flex items-center",children:[!r&&d.exports.jsx(n.Tooltip,{render:a(Nt),position:"right",children:d.exports.jsx(n.Icon,{type:"warning",className:"pr-2"})}),d.exports.jsx(n.Icon,{type:{KEY:"locked",CYLINDER:"cylinder",SECURITYCARD:"card"}[s],className:"pr-2"}),d.exports.jsx(n.Text,{size:"sm",type:"span",testid:"name",children:t})]})},_r=function(e){var t=e.userPrice,r=e.listPrice,s=e.discount,a=et().t;return d.exports.jsxs("div",{className:"justify-center",children:[d.exports.jsx(n.Text,{bold:!0,align:"right",size:"sm",color:"primary",testid:"userPrice",children:d.exports.jsx(n.Price,{price:t||r})}),!!s&&d.exports.jsxs("div",{className:"flex flex-col",children:[d.exports.jsx(n.Text,{type:"span",size:"sm",color:"gray",transform:["line-through"],testid:"listPrice",children:d.exports.jsx(n.Price,{price:r})}),d.exports.jsx(n.Text,{type:"span",size:"sm",color:"green",testid:"discount",children:a(Dt,""+s)})]})]})},Dr=function(e){var r,s,a=e.headPosition,o=e.isExpanded,i=void 0!==o&&o,l=et(),c=l.t,u=l.showPrice,p=t.useState(i),f=p[0],h=p[1],m=t.useState(1),x=m[0],v=m[1],y=t.useMemo((function(){return e=a.entries,t=10,Array.from({length:Math.ceil(e.length/t)},(function(r,n){return e.slice(n*t,n*t+t)}));var e,t}),[a.entries]),g="NEW_SERIES"===a.businessCase;return d.exports.jsxs("div",{"data-testid":"subpositions",children:[f&&d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx("div",{className:"overflow-x-auto",children:d.exports.jsx("div",{className:"px-2 min-w-300",children:d.exports.jsxs(n.Table,{children:[d.exports.jsx(n.Table.Header,{children:d.exports.jsxs(n.Table.Row,{children:[d.exports.jsx(n.Table.HeaderCell,{width:"200px",children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(Qt)})}),d.exports.jsx(n.Table.HeaderCell,{width:"300px",children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(Jt)})}),d.exports.jsx(n.Table.HeaderCell,{children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(Kt)})}),g&&d.exports.jsx(n.Table.HeaderCell,{width:"120px",align:"right",children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(Ht)})}),d.exports.jsx(n.Table.HeaderCell,{width:"120px",align:"right",children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(Wt)})}),u&&d.exports.jsx(n.Table.HeaderCell,{width:"220px",align:"right",children:d.exports.jsx(n.Text,{size:"sm",color:"primary",children:c(At)})})]})}),d.exports.jsx(n.Table.Body,{children:y[x-1].map((function(e,t){var r,s,o,i,l;return d.exports.jsxs(n.Table.Row,{children:[d.exports.jsx(n.Table.Cell,{children:d.exports.jsx(Nr,{name:null==(r=e.product)?void 0:r.name,isEntryAvailable:!(null!=(s=e.product)&&s.sapBlocked)&&(null==(o=e.product)?void 0:o.purchasable)&&(null==(i=e.product)?void 0:i.ecommerceEligible),type:null==(l=e.product)?void 0:l.materialType})}),d.exports.jsx(n.Table.Cell,{children:d.exports.jsx(Ar,{lockingPositions:e.lockingPositions})}),d.exports.jsx(n.Table.Cell,{children:d.exports.jsx(jr,{configurationName:e.configurationName,headPositionCode:a.code,itemInfoId:e.id})}),g&&d.exports.jsx(n.Table.Cell,{align:"right",children:d.exports.jsxs(n.Text,{size:"sm",type:"span",testid:"quantityPerSet",children:[e.quantity,"x"]})}),d.exports.jsx(n.Table.Cell,{align:"right",children:d.exports.jsxs(n.Text,{size:"sm",type:"span",testid:"quantity",children:[e.quantity*a.quantity,"x"]})}),u&&d.exports.jsx(n.Table.Cell,{align:"right",children:d.exports.jsx(_r,{userPrice:e.userPrice,listPrice:e.totalListPrice,discount:e.discountInPercentage})})]},t)}))})]})})}),y.length>1&&d.exports.jsx("div",{className:"px-4",children:d.exports.jsx(n.Pagination,{current:x,total:y.length,onChange:function(e){return v(e)}})})]}),(null==a||null==(r=a.entries)?void 0:r.length)>0&&d.exports.jsxs("button",{"data-testid":"expandButton",className:"flex bg-gray-100 w-full text-xs space-x-1 justify-center",onClick:function(){return h(!f)},children:[d.exports.jsx(n.Icon,{type:f?"arrowup":"arrowdown",size:"xs",className:"self-center"}),d.exports.jsx(n.Text,{color:"primary",size:"sm",bold:!0,children:(null==a||null==(s=a.entries)?void 0:s.length)+" "+c(Qt)})]})]})},Or=function(e){var r=e.groupedEntries,n=et(),s=n.t,a=n.showPrice,o=t.useMemo((function(){return r.filter((function(e){return"headPosition"===Object.keys(e)[0]})).map((function(e){var t,r,n,o,i,l,c,u=e.headPosition;return d.exports.jsxs("li",{className:"shadow rounded bg-lighter",children:[d.exports.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full relative p-2 mb-4",children:[d.exports.jsx("div",{className:"col-span-full lg:col-span-4",children:d.exports.jsx(wr,{imageSrc:null==u||null==(t=u.thumbnail)?void 0:t.url,imageAlt:null==u||null==(r=u.thumbnail)?void 0:r.altText,productName:(null==u?void 0:u.marketSystemName)&&""+(null==u?void 0:u.marketSystemName),badgeType:"success",badgeText:s((c=null==u?void 0:u.businessCase,hr[c]))})}),d.exports.jsx("div",{className:"col-span-full lg:col-span-8",children:d.exports.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==u||null==(n=u.salesText)?void 0:n.textContent)&&d.exports.jsx(Cr,{value:null==u||null==(o=u.salesText)?void 0:o.textContent}),(null==u||null==(i=u.positionText)?void 0:i.textContent)&&d.exports.jsx(br,{value:null==u||null==(l=u.positionText)?void 0:l.textContent}),d.exports.jsx(kr,{amount:null==u?void 0:u.quantity}),a&&d.exports.jsx(Tr,{totalPrice:null==u?void 0:u.price})]})})]}),(null==u?void 0:u.entries)&&d.exports.jsx("div",{className:"w-full",children:d.exports.jsx(Dr,{headPosition:u})})]},null==u?void 0:u.code)}))}),[r,a,s]),i=t.useMemo((function(){return r.filter((function(e){return"singleEntry"===Object.keys(e)[0]})).map((function(e){var t,r,n,s,o,i,l,c,u,p,f,h,m,x,v=e.singleEntry;return d.exports.jsx("li",{children:d.exports.jsxs("div",{className:"grid grid-cols-12 gap-4 w-full shadow rounded relative bg-lighter p-2 mb-4",children:[d.exports.jsx("div",{className:"col-span-full lg:col-span-4",children:d.exports.jsx(wr,{imageSrc:null==v||null==(r=v.product)||null==(n=r.thumbnails)||null==(s=n[0])?void 0:s.url,imageAlt:null==v||null==(o=v.product)||null==(i=o.thumbnails)||null==(l=i[0])?void 0:l.altText,productName:null==v||null==(c=v.product)?void 0:c.name,productCode:null==v||null==(u=v.product)?void 0:u.code,badgeText:null==v||null==(p=v.product)?void 0:p.code.replace(/^0+/,""),badgeType:"error",ean:null==v||null==(f=v.product)?void 0:f.ean,medias:null==v?void 0:v.medias,configName:null==v?void 0:v.configurationName})}),d.exports.jsx("div",{className:"col-span-full lg:col-span-8",children:d.exports.jsxs("div",{className:"flex flex-row flex-wrap space-y-2 w-full md:flex-nowrap md:space-y-0 md:space-x-2 lg:justify-end",children:[(null==v||null==(h=v.positionText)?void 0:h.textContent)&&d.exports.jsx(br,{value:null==v||null==(m=v.positionText)?void 0:m.textContent}),a&&d.exports.jsx(Sr,{gross:null==v?void 0:v.listPricePerUnit,net:null==v?void 0:v.netPricePerUnit,discount:null==v?void 0:v.discountInPercentage}),d.exports.jsx(kr,{amount:null==v?void 0:v.quantity,unitName:null==v||null==(x=v.displayUnit)?void 0:x.name}),a&&d.exports.jsx(Tr,{totalPrice:null==v?void 0:v.userPrice}),a&&d.exports.jsx(gr,{deliveryInfos:null==v?void 0:v.committedDeliveryInfos})]})})]})},null==v||null==(t=v.product)?void 0:t.code)}))}),[r,a]);return d.exports.jsxs("ul",{className:"space-y-4 py-2 lg:px-8","data-testid":"finalReview",children:[o,i]})};!function(e){e.Copy="copy",e.Move="move"}(xr||(xr={})),function(e){e.private="private",e.public="public"}(vr||(vr={}));var Pr=navigator.userAgent.includes("Firefox"),Mr=function(t){var r=t.fixed,s=void 0===r||r;return e.store.hooks.useIsFetching()&&d.exports.jsx("div",{className:i.default("w-full h-full flex items-center justify-center top-0 left-0 z-10 backdrop-filter backdrop-blur",{"bg-gray-200 opacity-60":Pr},s?"fixed":"absolute"),"data-testid":"overlayLoader",children:d.exports.jsx(n.Icon,{size:"xl",type:"loader"})})},Er="vanguard.cart.calculatePrice.success",Vr="vanguard.cart.calculatePrice.error",Fr="vanguard.checkout.endUserInformation.tile",Ir="vanguard.checkout.notification",$r="vanguard.checkout.notification.placeOrder.error",Lr="vanguard.checkout.header",zr="vanguard.checkout.addressUpdate.success",Br="vanguard.checkout.addressUpdate.error",Ur="vanguard.checkout.addressDelete.success",Rr="vanguard.checkout.addressDelete.error",qr="vanguard.checkout.delivery.tile",Yr="vanguard.checkout.delivery.method",Gr="vanguard.checkout.delivery.type",Hr="vanguard.checkout.delivery.type.TooltipTitle",Wr="vanguard.checkout.delivery.shippingDate",Qr="vanguard.checkout.delivery.recipient",Jr="vanguard.checkout.deliverymethod.success",Kr="vanguard.checkout.deliverymethod.error",Zr="vanguard.checkout.preferreddeliverydate.success",Xr="vanguard.checkout.preferreddeliverydate.error",en="vanguard.checkout.customerOrderNumber",tn="vanguard.checkout.customerCommissionNumber",rn="vanguard.checkout.total.price",nn="vanguard.checkout.total.discount",sn="vanguard.checkout.total.expressCost",an="vanguard.checkout.total.general",on="vanguard.checkout.calculatePriceAndDelivery",ln="vanguard.checkout.placeOrder",dn="vanguard.checkout.payment.tile",cn="vanguard.checkout.payment.method",un="vanguard.checkout.payment.termsOfPayment",pn="vanguard.checkout.paymentterm.default",fn="vanguard.checkout.payment.billing",hn="vanguard.checkout.mandatoryFiled.error",mn=function(t){var r=t.additionalAddresses,s=void 0===r?[]:r,a=et(),o=a.cartCode,i=a.t,l=e.store.hooks.useNotifications().notify,c=e.store.api.checkout.useGetAdditionalAddressTypesQuery({orderCode:o}).data,u=e.store.api.checkout.useAddAdditionalAddressMutation()[0],p=e.store.api.checkout.useDeleteAdditionalAddressMutation()[0],f=function(){var e=rt(ot.mark((function e(t,r){var n,s,a,d,c,p,f,h,m,x;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.name1,s=r.name2,a=r.name3,d=r.name4,c=r.line1,p=r.line2,f=r.postalCode,h=r.country,m=r.town,x=r.titleCode,e.prev=1,e.next=4,u({cartCode:o,additionalAddressTypeCode:t,name1:n,name2:s,name3:a,name4:d,line1:c,line2:p,postalCode:f,country:h,town:m,isoCode:h.isocode,titleCode:x});case 4:l("success",i(zr),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("error",i(Br),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=rt(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({cartCode:o,id:t});case 3:l("success",i(Ur),"checkout.addressDeleteSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("error",i(Rr),"checkout.addressDeleteError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return d.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"additionalAddresses",children:[d.exports.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:i(Fr)}),d.exports.jsx("div",{className:"flex flex-wrap md:pl-6","data-testid":"additionalAddresses",children:null==c?void 0:c.map((function(e){return d.exports.jsxs("div",{className:"pt-4 pr-16","data-testid":"address-"+e.code,children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:e.name}),d.exports.jsx(fr,{showOneTimeAddress:!0,address:s.find((function(t){return t.additionalAddressTypeCode===e.code})),onAdd:function(t){return f(e.code,t)},onChange:function(t){return f(e.code,t)},onRemove:function(e){return h(e.id)}})]},e.code)}))})]})},xn=function(e){var t=e.deliveryMethods;return d.exports.jsx("div",{className:"space-y-1",children:null==t?void 0:t.map((function(e,t){var r=e.name,s=e.description;return d.exports.jsxs("div",{children:[d.exports.jsx(n.Text,{type:"span",size:"sm",bold:!0,testid:"name",children:r+": "}),d.exports.jsx(n.Text,{type:"span",size:"sm",testid:"description",children:s})]},t)}))})},vn=function(e){var t=yr(),r=t.day();return 5===r&&e?t=t.add(3,"day"):6===r?t=t.add(2,"day"):(0===r||e)&&(t=t.add(1,"day")),t.toDate()},yn=function(r){var s=r.deliveryAddressesError,a=t.useRef(),o=function(){var r,n,s=et(),a=s.t,o=s.cartCode,i=s.endOfDeliveryDay,l=s.oneTimeAddressMandatory,d=t.useState(""),c=d[0],u=d[1],p=t.useState(null),f=p[0],h=p[1],m=t.useState(null),x=m[0],v=m[1],y=e.store.hooks.useNotifications().notify,g=e.store.api.checkout.useGetCheckoutQuery({cartCode:o}).data,b=e.store.api.checkout.useGetAddressesQuery({cartCode:o}).data,j=e.store.api.checkout.useGetDeliveryMethodQuery({cartCode:o}).data,w=e.store.api.checkout.useGetDeliveryTypeQuery({cartCode:o}).data,k=e.store.api.checkout.useGetB2BUnitQuery(null,{skip:l}).data,C=e.store.api.checkout.useSetOneTimeAddressMutation()[0],T=e.store.api.checkout.useSetDeliveryAddressMutation()[0],S=e.store.api.checkout.useSetDeliveryMethodMutation()[0],A=t.useCallback(function(){var e=rt(ot.mark((function e(t,r){var n;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r?vn(i):null,e.prev=1,e.next=4,S({cartCode:o,code:t,preferredDeliveryDate:n}).unwrap();case 4:y("success",a(Jr),"checkout.deliveryMethodSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y("error",a(Kr),"checkout.deliveryMethodError");case 10:v(n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[i,S,o,y,a]),N=t.useCallback(function(){var e=rt(ot.mark((function e(t){var r;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({cartCode:o,code:null==g||null==(r=g.deliveryMode)?void 0:r.code,preferredDeliveryDate:t}).unwrap();case 3:y("success",a(Zr),"checkout.preferredDeliveryDateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y("error",a(Xr),"checkout.preferredDeliveryDateError");case 9:v(t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[S,o,null==g||null==(r=g.deliveryMode)?void 0:r.code,y,a]),_=t.useCallback(function(){var e=rt(ot.mark((function e(t){var r,n,s,i,l,d,c,u,p,f;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name1,n=t.name2,s=t.name3,i=t.name4,l=t.line1,d=t.line2,c=t.postalCode,u=t.country,p=t.town,f=t.titleCode,e.prev=1,e.next=4,C({cartCode:o,name1:r,name2:n,name3:s,name4:i,line1:l,line2:d,postalCode:c,country:u,town:p,isoCode:u.isocode,titleCode:f}).unwrap();case 4:y("success",a(zr),"checkout.addressUpdateSuccess"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),y("error",a(Br),"checkout.addressUpdateError");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[C,o,y,a]),D=t.useCallback(function(){var e=rt(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T({cartCode:o,addressId:t.id}).unwrap();case 3:y("success",a(zr),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y("error",a(Br),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[T,o,y,a]),O=t.useMemo((function(){var e=[].concat(b||[],(null==k?void 0:k.addresses)||[]).filter((function(e){return null==e?void 0:e.shippingAddress})),t=e.map((function(e){return e.id}));return e.filter((function(e,r){return!t.includes(e.id,r+1)}))}),[null==k?void 0:k.addresses,b]),P=t.useMemo((function(){var e,t;return{selectedMethod:null!=(e=null==g||null==(t=g.deliveryMode)?void 0:t.code)?e:"",selectedType:c,address:null==g?void 0:g.deliveryAddress,deliveryMethods:j||[],deliveryTypes:(null==w?void 0:w.deliveryTypes)||[],deliveryAddresses:O,deliveryDate:x,setSelectedType:u,handleDeliveryMethodUpdate:A,setDeliveryDate:N,handleAddressUpdate:D,handleOneTimeAddressUpdate:_}}),[null==g||null==(n=g.deliveryMode)?void 0:n.code,null==g?void 0:g.deliveryAddress,c,j,null==w?void 0:w.deliveryTypes,O,x,A,N,D,_]);return t.useEffect((function(){var e;!c&&null!=w&&null!=(e=w.deliveryTypes)&&e.length&&u(w.deliveryTypes[0])}),[j,w,c]),t.useEffect((function(){var e=null==g?void 0:g.deliveryMode;if(e&&!f){var t="EX"===e.code||e.showPreferredDate?vn(i):null;v(t),h(!0)}}),[null==g?void 0:g.deliveryMode,i,f]),P}(),i=o.address,l=o.deliveryDate,c=o.deliveryTypes,u=o.deliveryMethods,p=o.selectedMethod,f=o.selectedType,h=o.deliveryAddresses,m=o.setDeliveryDate,x=o.setSelectedType,v=o.handleDeliveryMethodUpdate,y=o.handleAddressUpdate,g=o.handleOneTimeAddressUpdate,b=et(),j=b.t,w=b.oneTimeAddressMandatory,k=b.language;return d.exports.jsxs("div",{ref:a,className:"shadow-md p-6 space-y-2","data-testid":"delivery",children:[d.exports.jsx(n.Text,{size:"lg",bold:!0,testid:"header",children:j(qr)}),d.exports.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[d.exports.jsxs("div",{className:"md:w-1/2 md:pl-6 space-y-1",children:[d.exports.jsxs("div",{"data-testid":"method",children:[d.exports.jsxs("div",{className:"flex",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:j(Yr)}),d.exports.jsx(n.Tooltip,{position:"right",render:d.exports.jsx(xn,{deliveryMethods:u}),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1"})})]}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2 md:pr-2 lg:pr-0","data-testid":"options",children:u.map((function(e){var t=e.code,r=e.name,s=e.showPreferredDate;return d.exports.jsx(n.Radio,{label:r,checked:p===t,onChange:function(){return v(t,s)},testid:t},t)}))})]}),c.length>0&&d.exports.jsxs("div",{"data-testid":"type",children:[d.exports.jsxs("div",{className:"flex",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:j(Gr)}),d.exports.jsx(n.Tooltip,{position:"right",render:j(Hr),children:d.exports.jsx(n.Icon,{type:"info",className:"px-1"})})]}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:c.map((function(e){return d.exports.jsx(n.Radio,{label:e,checked:f===e,onChange:function(){return x(e)},testid:e},e)}))})]}),d.exports.jsxs("div",{className:"w-full md:max-w-max","data-testid":"shippingDate",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:j(Wr)}),d.exports.jsx(n.DatePicker,{minDate:new Date,selected:l,onChange:m,locale:k.split("_")[0],dateFormat:"dd.MM.yyyy"})]})]}),d.exports.jsxs("div",{className:"w-1/2","data-testid":"recipient",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:j(Qr)+(w?"*":"")}),d.exports.jsx(fr,{address:i,available:h,onAdd:g,onChange:y,showOneTimeAddress:!0}),w&&s&&d.exports.jsx(n.Text,{testid:"error",color:"secondary",size:"sm",children:j(hn)})]})]})]})},gn=function(e){var t=e.consents,r=e.setChecked,s=e.checked,a=e.errors,o=et().t;return d.exports.jsx("div",{"data-testid":"consents",children:null==t?void 0:t.map((function(e,t){var i,l;return d.exports.jsx("div",{className:"flex items-center space-x-2","data-testid":"consent",children:d.exports.jsx("div",{className:"m-2",children:d.exports.jsx(n.Checkbox,{checked:s[t],onChange:function(){var e=[].concat(s);e[t]=!e[t],r(e)},error:a.includes("consents_"+t),hint:a.includes("consents_"+t)&&o(hn),label:d.exports.jsx(d.exports.Fragment,{children:null==e||null==(i=e.text)||null==(l=i.split("{}"))?void 0:l.map((function(t,r){return d.exports.jsxs(n.Text,{type:"span",size:"sm",children:[t+" ",e.links[r]&&d.exports.jsx(n.Link,{target:"_blank",href:e.links[r].url,size:"sm",children:e.links[r].text})]},t+r)}))})})})},e.text)}))})},bn=function(e){var t=e.price,r=e.discount,s=et(),a=s.t,o=s.showAdditionalInformation,i=s.showExpressCostDescription;return d.exports.jsxs("div",{className:"space-y-1 lg:w-2/6",children:[t&&d.exports.jsxs(n.Text,{bold:!0,size:"lg",color:"primary",align:"right",testid:"priceTotal",children:[a(rn)+" ",d.exports.jsx(n.Price,{price:t})]}),r&&d.exports.jsxs(n.Text,{color:"green",align:"right",testid:"totalDiscount",children:[a(nn)+" ",d.exports.jsx(n.Price,{price:r})]}),i&&d.exports.jsx(n.Text,{size:"sm",align:"right",testid:"expressCost",children:a(sn)}),o&&d.exports.jsx(n.Text,{size:"sm",align:"right",testid:"additionalInformation",children:a(an)})]})},jn=function(r){var s=r.selectedPaymentMethod,a=r.setDeliveryError,o=et(),i=o.t,l=o.cartCode,c=o.showCalculateDelivery,u=o.oneTimeAddressMandatory,p=e.store.hooks.useNotifications().notify,f=et().showPrice,h=e.store.api.checkout.useGetConsentsQuery({cartCode:l}).data,m=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data,x=e.store.api.cart.useSimulateCartMutation()[0],v=e.store.api.checkout.usePlaceOrderMutation()[0],y=t.useState(Array(null==h?void 0:h.consents.length).fill(!1)||[]),g=y[0],b=y[1],j=t.useState(""),w=j[0],k=j[1],C=t.useState(""),T=C[0],S=C[1],N=t.useState([]),_=N[0],D=N[1],O=function(){var e=rt(ot.mark((function e(){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({cartCode:l,forceSync:!0}).unwrap();case 3:p("success",i(Er),"checkout.calculatePriceSuccess"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),p("error",i(Vr),"checkout.calculatePriceError"),console.error("Simulation cart failed.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=[];return g.some((function(e){return!1===e}))&&g.map((function(t,r){!1===t&&e.push("consents_"+r)})),w||e.push("orderNumber"),null!=m&&m.deliveryAddress||!u?a(!1):(e.push("deliveryAddress"),a(!0)),D(e),0===e.length},M=function(){var e=rt(ot.mark((function e(){var t,r;return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,v({cartCode:l,customerReferenceId:w,paymentModeCode:s,checkoutCommission:T}).unwrap();case 6:t=e.sent,r=t.code,window.location.href=A("/checkout/orderConfirmation/"+r,"redirect"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),p("error",i($r),"checkout.placeOrderError"),console.error("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return d.exports.jsxs("div",{className:"space-y-6","data-testid":"order",children:[d.exports.jsx("div",{className:"shadow-md space-between p-6",children:d.exports.jsxs("div",{className:"flex flex-col space-y-6 mb-2 md:space-y-0 md:justify-between md:flex-row",children:[d.exports.jsxs("div",{className:"lg:w-3/6 space-y-3",children:[d.exports.jsxs("div",{className:"flex flex-col md:space-x-3 md:flex-row",children:[d.exports.jsx(n.TextInput,{label:i(en)+"*",inputClassName:"w-full",value:w,onChange:function(e){return k(e.target.value)},maxlength:35,testid:"orderNumberInput",error:_.includes("orderNumber"),hint:_.includes("orderNumber")&&i(hn)}),d.exports.jsx(n.TextInput,{label:i(tn),inputClassName:"w-full",value:T,onChange:function(e){return S(e.target.value)},maxlength:35,testid:"commissionNumber"})]}),d.exports.jsx(gn,{checked:g,setChecked:b,consents:null==h?void 0:h.consents,errors:_})]}),f&&d.exports.jsx(bn,{price:null==m?void 0:m.simulatedTotalPrice,discount:null==m?void 0:m.simulatedDiscount})]})}),d.exports.jsxs("div",{className:"flex flex-col space-y-2 md:justify-end md:space-y-0 md:space-x-2 md:flex-row",children:[c&&f&&d.exports.jsx(n.Button,{onClick:O,testid:"calculatePriceAndDeliveryButton",isDisabled:null==m?void 0:m.simulated,variant:"outlined",iconType:"simulateprice",children:i(on)}),d.exports.jsx(n.Button,{testid:"orderButton",onClick:M,iconType:"arrow",children:i(ln)})]})]})},wn=function(t){var r,s,a,o=t.selectedPaymentMethod,i=t.setSelectedPaymentMethod,l=t.billingAddress,c=et(),u=c.t,p=c.showBillingAddress,f=c.showPaymentMethod,h=c.cartCode,m=e.store.hooks.useNotifications().notify,x=e.store.api.checkout.useGetB2BUnitQuery(null).data,v=e.store.api.checkout.useGetBillingAddressesQuery({cartCode:h}).data,y=e.store.api.checkout.useSetBillingAddressMutation()[0],g=function(){var e=rt(ot.mark((function e(t){return ot.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({cartCode:h,id:t.id}).unwrap();case 3:m("success",u(zr),"checkout.addressUpdateSuccess"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m("error",u(zr),"checkout.addressUpdateError");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return d.exports.jsxs("div",{className:"shadow-md p-6 space-y-2","data-testid":"payment",children:[d.exports.jsx(n.Text,{size:"lg",bold:!0,testid:"title",children:u(dn)}),d.exports.jsxs("div",{className:"flex flex-col space-y-6 justify-around md:space-y-0 md:flex-row",children:[d.exports.jsxs("div",{className:"md:w-1/2 md:pl-6",children:[(null==x||null==(r=x.defaultPaymentMethods)?void 0:r.length)>0&&f&&d.exports.jsxs("div",{className:"mb-2 space-y-1","data-testid":"method",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:u(cn)}),d.exports.jsx("div",{className:"flex flex-wrap gap-4 pb-2","data-testid":"options",children:null==x?void 0:x.defaultPaymentMethods.map((function(e){var t=e.code,r=e.description;return d.exports.jsx(n.Radio,{checked:o===t,label:r,onChange:function(){return i(t)},testid:t},t)}))})]}),d.exports.jsxs("div",{"data-testid":"terms",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:u(un)}),d.exports.jsx(n.Text,{color:null!=x&&x.defaultPaymentTerm?"green":null,testid:"description",children:null!=(s=null==x||null==(a=x.defaultPaymentTerm)?void 0:a.description)?s:u(pn)})]})]}),d.exports.jsx("div",{className:"w-1/2",children:p&&d.exports.jsxs("div",{"data-testid":"billing",children:[d.exports.jsx(n.Text,{bold:!0,testid:"label",children:u(fn)}),d.exports.jsx(fr,{address:l,available:v||[],onChange:g})]})})]})]})},kn=function(){var r=e.store.hooks.useNotifications().notify,s=et(),a=s.t,o=s.showAdditionalAddressTile,i=s.showPaymentTile,l=s.cartCode,c=t.useState(null),u=c[0],p=c[1],f=t.useState(null),h=f[0],m=f[1],x=e.store.api.checkout.useGetB2BUnitQuery(null).data,v=e.store.api.checkout.useGetCheckoutQuery({cartCode:l}).data;return t.useEffect((function(){var e;(null==x||null==(e=x.defaultPaymentMethods)?void 0:e.length)>0&&p(x.defaultPaymentMethods[0].code)}),[x]),t.useEffect((function(){r("warning",a(Ir),"checkout.deliveryDateWarning")}),[r,a]),d.exports.jsxs("div",{className:"space-y-6","data-testid":"checkout",children:[d.exports.jsx(n.Text,{type:"h3",size:"xl",color:"primary",testid:"header",children:a(Lr)}),i&&d.exports.jsx(wn,{selectedPaymentMethod:u,setSelectedPaymentMethod:p,billingAddress:null==v?void 0:v.billingAddress}),d.exports.jsx(yn,{deliveryAddressesError:h}),o&&d.exports.jsx(mn,{additionalAddresses:null==v?void 0:v.additionalAddresses}),(null==v?void 0:v.groupedEntries)&&d.exports.jsx(Or,{groupedEntries:null==v?void 0:v.groupedEntries}),d.exports.jsx(jn,{selectedPaymentMethod:u,setDeliveryError:m}),d.exports.jsx(Mr,{})]})};!function(t,n){var s='[data-react-app="'+n+'"]:not([data-rendered])',a=document.querySelector(s);if(!a)throw new Error(s+" is missing");var o=document.createElement("div");a.appendChild(o),a.setAttribute("data-rendered","true"),r.render(function(t,r){return d.exports.jsx(e.StoreProvider,{children:d.exports.jsx(k,{appId:r,children:d.exports.jsx(T,{children:d.exports.jsx(t,{})})})})}(t,n),o)}((function(){return d.exports.jsx(kn,{})}),"checkout")}));
